System.register(["./index-legacy-LZepmReL.js","./index-legacy-DduMCVS-.js"],function(e,t){"use strict";var a,o,l,i,n,r,s,c,u,d,g,p,f,m,h,_,v,b,x,y,k,w,S,C,P,A,I,j,E,K,N,O,T,z,B,D,L,U,q,G;return{setters:[e=>{a=e.ae,o=e.af,l=e.d,i=e.r,n=e.o,r=e.S,s=e.a,c=e.b,u=e.w,d=e.u,g=e.I,p=e.g,f=e.h,m=e.l,h=e.A,_=e.q,v=e.k,b=e.s,x=e.a9,y=e.t,k=e.a4,w=e.a7,S=e.n,C=e.ag,P=e.K,A=e.ah,I=e.aa,j=e.ai,E=e.aj,K=e.ak,N=e.al,O=e.m,T=e.am,z=e.an,B=e.M,D=e.e,L=e.f,U=e.N,q=e._},e=>{G=e.T}],execute:function(){var R=document.createElement("style");R.textContent=".profile-section[data-v-0ecf1106]{display:flex;align-items:center;padding:20px;background:#fff;border-radius:10px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,.05)}.profile-img[data-v-0ecf1106]{width:72px;height:72px;border-radius:50%;margin-right:16px;object-fit:cover;border:2px solid #f4f4f4}.profile-info h2[data-v-0ecf1106]{font-size:1.1rem;margin:0 0 4px;font-weight:600;color:#333}.profile-info p[data-v-0ecf1106]{color:#666;margin:0 0 4px;font-size:.9rem}.settings-list[data-v-0ecf1106]{background:transparent;margin-bottom:24px}.settings-list ion-item[data-v-0ecf1106]{--padding-start: 12px;--padding-end: 12px;--min-height: 56px;--border-color: rgba(0, 0, 0, .08)}.logout-section[data-v-0ecf1106]{display:flex;justify-content:center;margin-top:8px}.logout-button[data-v-0ecf1106]{--padding-start: 12px;--padding-end: 12px;--background-activated: rgba(244, 67, 54, .1);font-weight:500}.logout-button[data-v-0ecf1106]:hover{color:var(--ion-color-danger)}\n",document.head.appendChild(R);const V=a("Share",{web:()=>o(()=>t.import("./web-legacy-BWnH03Xj.js"),void 0).then(e=>new e.ShareWeb)}),W={class:"profile-section"},F=["src"],J={class:"profile-info"},M={key:0},$={class:"logout-section"},H="https://www.gravatar.com/avatar/?d=mp";e("default",q(l({__name:"SettingsPage",setup(e){const t=L(),a=i({name:"",id:0,otp:0,phone:""}),o=["Close"],l=i(!1),q=localStorage.getItem("parisklegg_token")||"";let R=null;n(async()=>{const e=localStorage.getItem("parisklegg_user");if(e){const t=JSON.parse(e);t&&(a.value.name=t.fullname,a.value.id=t.user_id,a.value.email=t.username,a.value.image=t.profile_photo_path||H,R=t.user_id),console.log("User data:",t.user_id)}}),r.setOverlaysWebView({overlay:!1}),r.setBackgroundColor({color:"#ffffff"}),r.setStyle({style:s.Light});const Q=async()=>{await V.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"})},X=e=>{window.location.href=e},Y=async()=>{l.value=!0;try{const e=(await D.post("https://school.klgilc.com/api/logout",{user_id:R,bearer_token:q},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`}})).data;console.log(e.data),!0===e.success&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),t.replace("/"))}catch(e){Z(e)}finally{l.value=!1}},Z=e=>{if(console.error("Error fetching data:",e),D.isAxiosError(e)){var a;if(401===(null===(a=e.response)||void 0===a?void 0:a.status))return t.replace("/"),void G.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===e.code)return void G.show({text:"Request timeout. Please try again",position:"top"})}G.show({text:"Failed to load data. Please try again later",position:"top"})};return(e,t)=>(U(),c(d(g),null,{default:u(()=>[p(d(_),null,{default:u(()=>[p(d(f),null,{default:u(()=>[p(d(m),null,{default:u(()=>t[4]||(t[4]=[h("Settings",-1)])),_:1,__:[4]})]),_:1})]),_:1}),p(d(B),{class:"ion-padding"},{default:u(()=>[v("div",W,[v("img",{src:a.value.image||H,class:"profile-img",alt:"Profile Picture"},null,8,F),v("div",J,[v("h2",null,y(a.value.name||"User Name"),1),a.value.phone?(U(),b("p",M,y(a.value.phone||"Phone"),1)):x("",!0),v("p",null,y(a.value.email||"Email"),1)])]),p(d(k),{lines:"full",class:"settings-list"},{default:u(()=>[p(d(w),{button:"",detail:!0,onClick:t[0]||(t[0]=e=>X("https://legal.klgilc.com/privacy-policy.html"))},{default:u(()=>[p(d(S),{slot:"start",icon:d(C),color:"medium"},null,8,["icon"]),p(d(P),null,{default:u(()=>t[5]||(t[5]=[h("Privacy Policy",-1)])),_:1,__:[5]})]),_:1}),p(d(w),{button:"",detail:!0,onClick:t[1]||(t[1]=e=>X("https://legal.klgilc.com/terms-of-service.html"))},{default:u(()=>[p(d(S),{slot:"start",icon:d(A),color:"medium"},null,8,["icon"]),p(d(P),null,{default:u(()=>t[6]||(t[6]=[h("Terms of Service",-1)])),_:1,__:[6]})]),_:1}),p(d(w),{button:"",detail:!0,onClick:t[2]||(t[2]=e=>X("https://wa.me/+233208345390"))},{default:u(()=>[p(d(S),{slot:"start",icon:d(I),color:"medium"},null,8,["icon"]),p(d(P),null,{default:u(()=>t[7]||(t[7]=[h("Contact Support",-1)])),_:1,__:[7]})]),_:1}),p(d(w),{button:"",detail:!0,onClick:t[3]||(t[3]=e=>X("https://legal.klgilc.com/account-deletion.html"))},{default:u(()=>[p(d(S),{slot:"start",icon:d(j),color:"medium"},null,8,["icon"]),p(d(P),null,{default:u(()=>t[8]||(t[8]=[h("Delete Account",-1)])),_:1,__:[8]})]),_:1}),p(d(w),{button:"",detail:!0,onClick:Q},{default:u(()=>[p(d(S),{slot:"start",icon:d(E),color:"medium"},null,8,["icon"]),p(d(P),null,{default:u(()=>t[9]||(t[9]=[h("Share App",-1)])),_:1,__:[9]})]),_:1}),p(d(w),{button:"",id:"about-alert",detail:!0},{default:u(()=>[p(d(S),{slot:"start",icon:d(K),color:"medium"},null,8,["icon"]),p(d(P),null,{default:u(()=>t[10]||(t[10]=[h("About",-1)])),_:1,__:[10]})]),_:1}),p(d(N),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.4",message:"â’¸ 2025 - Klegg Institute of Language and Communication.",buttons:o})]),_:1}),v("div",$,[p(d(O),{fill:"clear",color:"medium",onClick:Y,class:"logout-button"},{default:u(()=>[p(d(S),{slot:"start",icon:d(T)},null,8,["icon"]),t[11]||(t[11]=h(" Sign Out ",-1))]),_:1,__:[11]})]),p(d(z),{"is-open":l.value,message:"Please wait..."},null,8,["is-open"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-0ecf1106"]]))}}});
