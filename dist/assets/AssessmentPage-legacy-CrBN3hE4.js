System.register(["./index-legacy-LZepmReL.js","./index-legacy-DduMCVS-.js"],function(e,a){"use strict";var t,s,r,o,n,l,d,i,c,u,m,f,v,p,g,y,x,_,h,w,b,k,z,S,A,j,C,E,P,N,O,I,L,M,T,$,B,D,G,R,q,K,U,V,F,H,J,W,X,Y;return{setters:[e=>{t=e.d,s=e.ao,r=e.r,o=e.c,n=e.S,l=e.a,d=e.o,i=e.b,c=e.w,u=e.u,m=e.I,f=e.e,v=e.f,p=e.g,g=e.h,y=e.i,x=e.P,_=e.l,h=e.A,w=e.q,b=e.s,k=e.x,z=e.y,S=e.z,A=e.n,j=e.aK,C=e.C,E=e.k,P=e.a3,N=e.t,O=e.X,I=e.v,L=e.aw,M=e.a2,T=e.m,$=e.a4,B=e.U,D=e.T,G=e.M,R=e.N,q=e.as,K=e.a7,U=e.aL,V=e.K,F=e.ap,H=e.ax,J=e.ay,W=e.ak,X=e._},e=>{Y=e.T}],execute:function(){var a=document.createElement("style");a.textContent=".summary-card[data-v-d86e4ffd]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}.summary-title[data-v-d86e4ffd]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:600}.summary-title ion-icon[data-v-d86e4ffd]{font-size:24px}.summary-content[data-v-d86e4ffd]{display:flex;justify-content:space-between;padding:16px}.summary-item[data-v-d86e4ffd]{display:flex;flex-direction:column;align-items:center;flex:1}.divider[data-v-d86e4ffd]{width:1px;background-color:var(--ion-color-light);margin:0 8px}.summary-label[data-v-d86e4ffd]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:4px}.summary-value[data-v-d86e4ffd]{font-size:1.5rem;font-weight:600}.summary-value.excellent[data-v-d86e4ffd]{color:var(--ion-color-success)}.summary-value.good[data-v-d86e4ffd]{color:var(--ion-color-primary)}.summary-value.average[data-v-d86e4ffd]{color:var(--ion-color-warning)}.summary-value.poor[data-v-d86e4ffd]{color:var(--ion-color-danger)}.loading-container[data-v-d86e4ffd]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-d86e4ffd],.error-state[data-v-d86e4ffd]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-d86e4ffd],.error-state ion-icon[data-v-d86e4ffd]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-d86e4ffd],.error-state h3[data-v-d86e4ffd]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-d86e4ffd],.error-state p[data-v-d86e4ffd]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.assessment-item[data-v-d86e4ffd]{--padding-start: 12px;--inner-padding-end: 12px;--background: var(--ion-item-background, var(--ion-background-color, #fff));margin:8px 16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.assessment-item ion-icon[data-v-d86e4ffd]{font-size:24px}.assessment-content[data-v-d86e4ffd]{margin-left:12px}.assessment-header[data-v-d86e4ffd]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.assessment-title[data-v-d86e4ffd]{font-weight:600;font-size:1rem;flex:1;margin-right:8px}.assessment-meta[data-v-d86e4ffd]{display:flex;justify-content:space-between;font-size:.8rem;color:var(--ion-color-medium)}.assessment-score[data-v-d86e4ffd]{font-weight:500}.assessment-date[data-v-d86e4ffd]{color:var(--ion-color-medium)}@media (min-width: 768px){.summary-card[data-v-d86e4ffd]{margin:16px auto;max-width:800px}.assessment-item[data-v-d86e4ffd]{margin:8px auto;max-width:800px}}\n",document.head.appendChild(a);const Q={class:"summary-item"},Z={class:"summary-item"},ee={key:0,class:"loading-container"},ae={key:1,class:"empty-state"},te={key:2,class:"error-state"},se={class:"assessment-header"},re={class:"assessment-meta"};e("default",X(t({__name:"AssessmentPage",setup(e){const a=localStorage.getItem("parisklegg_token")||"",t=localStorage.getItem("parisklegg_user"),X=t?JSON.parse(t):null,oe=(null==X?void 0:X.user_id)||0,ne=s(),le=v(),de=Number(ne.params.id),ie=r(!0),ce=r(!1),ue=r([]),me=o(()=>ue.value.length>0),fe=o(()=>ue.value.length),ve=o(()=>{if(0===ue.value.length)return 0;const e=ue.value.reduce((e,a)=>e+pe(a),0);return Math.round(e/ue.value.length)}),pe=e=>0===e.score_denominator?0:Math.round(e.score_numerator/e.score_denominator*100),ge=e=>{const a=new Date(e);return`${a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}, ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},ye=async()=>{try{ie.value=!0,ce.value=!1,ue.value=[];const e=await f.post("https://school.klgilc.com/api/marks",{tutorship_id:de,student_id:oe},{headers:xe(),timeout:2e4});ue.value=e.data}catch(e){console.error("Error fetching assessments:",e),_e(e),ce.value=!0}finally{ie.value=!1}},xe=()=>({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a}`}),_e=e=>{if(console.error("Error fetching data:",e),f.isAxiosError(e)){var a;if(401===(null===(a=e.response)||void 0===a?void 0:a.status))return le.replace("/"),void Y.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===e.code)return void Y.show({text:"Request timeout. Please try again",position:"top"})}Y.show({text:"Failed to load data. Please try again later",position:"top"})};return n.setOverlaysWebView({overlay:!1}),n.setBackgroundColor({color:"#ffffff"}),n.setStyle({style:l.Light}),d(()=>{ye()}),(e,a)=>(R(),i(u(m),null,{default:c(()=>[p(u(w),null,{default:c(()=>[p(u(g),null,{default:c(()=>[p(u(y),{slot:"start"},{default:c(()=>[p(u(x),{"default-href":"/"})]),_:1}),p(u(_),null,{default:c(()=>a[0]||(a[0]=[h("Assessment",-1)])),_:1,__:[0]})]),_:1})]),_:1}),p(u(G),{fullscreen:!0},{default:c(()=>[p(u(k),{class:"summary-card"},{default:c(()=>[p(u(z),null,{default:c(()=>[p(u(S),{class:"summary-title"},{default:c(()=>[p(u(A),{icon:u(j),color:"primary"},null,8,["icon"]),a[1]||(a[1]=h(" Overall Performance ",-1))]),_:1,__:[1]})]),_:1}),p(u(C),{class:"summary-content"},{default:c(()=>{return[E("div",Q,[p(u(P),{class:"summary-label"},{default:c(()=>a[2]||(a[2]=[h("Assignments Graded",-1)])),_:1,__:[2]}),p(u(P),{class:"summary-value"},{default:c(()=>[h(N(fe.value),1)]),_:1})]),a[4]||(a[4]=E("div",{class:"divider"},null,-1)),E("div",Z,[p(u(P),{class:"summary-label"},{default:c(()=>a[3]||(a[3]=[h("Average Score",-1)])),_:1,__:[3]}),p(u(P),{class:O(["summary-value",(e=ve.value,e>=85?"excellent":e>=70?"good":e>=50?"average":"poor")])},{default:c(()=>[h(N(ve.value)+"% ",1)]),_:1},8,["class"])])];var e}),_:1,__:[4]})]),_:1}),ie.value?(R(),b("div",ee,[p(u(I),{name:"crescent",color:"primary"})])):me.value||ce.value?ce.value?(R(),b("div",te,[p(u(A),{icon:u(M),size:"large",color:"danger"},null,8,["icon"]),p(u(P),null,{default:c(()=>a[6]||(a[6]=[E("h3",null,"Error Loading Grades",-1),E("p",null,"Please try again later",-1)])),_:1,__:[6]}),p(u(T),{fill:"clear",onClick:ye},{default:c(()=>a[7]||(a[7]=[h("Retry",-1)])),_:1,__:[7]})])):(R(),i(u($),{key:3,lines:"none"},{default:c(()=>[(R(!0),b(D,null,B(ue.value,(e,a)=>(R(),i(u(q),{key:a},{default:c(()=>[p(u(K),{class:"assessment-item"},{default:c(()=>[p(u(A),{slot:"start",icon:u(U),color:"primary"},null,8,["icon"]),p(u(V),{class:"assessment-content"},{default:c(()=>{return[E("div",se,[p(u(P),{class:"assessment-title"},{default:c(()=>[h(N(e.assignment_name||"Assignment"),1)]),_:2},1024),p(u(F),{color:(a=pe(e),a>=85?"success":a>=70?"primary":a>=50?"warning":"danger")},{default:c(()=>[h(N(pe(e))+"% ",1)]),_:2},1032,["color"])]),E("div",re,[p(u(P),{class:"assessment-score"},{default:c(()=>[h(N(e.score_numerator)+"/"+N(e.score_denominator),1)]),_:2},1024),p(u(P),{class:"assessment-date"},{default:c(()=>[h(N(ge(e.created_at)),1)]),_:2},1024)])];var a}),_:2},1024)]),_:2},1024),p(u(H),{side:"end"},{default:c(()=>[p(u(J),{color:"tertiary",onClick:a=>(e=>{console.log("Viewing details for:",e)})(e)},{default:c(()=>[p(u(A),{slot:"icon-only",icon:u(W)},null,8,["icon"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(R(),b("div",ae,[p(u(A),{icon:u(L),size:"large",color:"medium"},null,8,["icon"]),p(u(P),null,{default:c(()=>a[5]||(a[5]=[E("h3",null,"No Grades Available",-1),E("p",null,"Your grades will appear here once they're posted",-1)])),_:1,__:[5]})]))]),_:1})]),_:1}))}}),[["__scopeId","data-v-d86e4ffd"]]))}}});
