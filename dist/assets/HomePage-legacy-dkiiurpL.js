!function(){function t(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,e,a,i,c=[],u=!0,l=!1;try{if(a=(o=o.call(t)).next,0===n){if(Object(o)!==o)return;u=!1}else for(;!(u=(r=a.call(o)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(t){l=!0,e=t}finally{try{if(!u&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(l)throw e}}return c}}(t,n)||o(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,n){if(t){if("string"==typeof t)return r(t,n);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,n):void 0}}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,r=Array(n);o<n;o++)r[o]=t[o];return r}function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(o,r,e,i){var c=r&&r.prototype instanceof l?r:l,d=Object.create(c.prototype);return a(d,"_invoke",function(o,r,e){var a,i,c,l=0,d=e||[],f=!1,s={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(n,o){return a=n,i=0,c=t,s.n=o,u}};function p(o,r){for(i=o,c=r,n=0;!f&&l&&!e&&n<d.length;n++){var e,a=d[n],p=s.p,b=a[2];o>3?(e=b===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((e=o<2&&p<a[1])?(i=0,s.v=r,s.n=a[1]):p<b&&(e=o<3||a[0]>r||r>b)&&(a[4]=o,a[5]=r,s.n=b,i=0))}if(e||o>1)return u;throw f=!0,r}return function(e,d,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===d&&p(d,b),i=d,c=b;(n=i<2?t:c)||!f;){a||(i?i<3?(i>1&&(s.n=-1),p(i,c)):s.n=c:s.v=c);try{if(l=2,a){if(i||(e="next"),n=a[e]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),i=1);a=t}else if((n=(f=s.n<0)?c:o.call(r,s))!==u)break}catch(n){a=t,i=1,c=n}finally{l=1}}return{value:n,done:f}}}(o,e,i),!0),d}var u={};function l(){}function d(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(a(n={},r,function(){return this}),n),p=f.prototype=l.prototype=Object.create(s);function b(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return d.prototype=f,a(p,"constructor",f),a(f,"constructor",d),d.displayName="GeneratorFunction",a(f,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,r,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:b}})()}function a(t,n,o,r){var e=Object.defineProperty;try{e({},"",{})}catch(t){e=0}a=function(t,n,o,r){function i(n,o){a(t,n,function(t){return this._invoke(n,o,t)})}n?e?e(t,n,{value:o,enumerable:!r,configurable:!r,writable:!r}):t[n]=o:(i("next",0),i("throw",1),i("return",2))},a(t,n,o,r)}function i(t,n,o,r,e,a,i){try{var c=t[a](i),u=c.value}catch(t){return void o(t)}c.done?n(u):Promise.resolve(u).then(r,e)}function c(t){return function(){var n=this,o=arguments;return new Promise(function(r,e){var a=t.apply(n,o);function c(t){i(a,r,e,c,u,"next",t)}function u(t){i(a,r,e,c,u,"throw",t)}c(void 0)})}}System.register(["./index-legacy-bhlrdrvL.js","./index-legacy-Btp0TFe9.js"],function(o,r){"use strict";var a,i,u,l,d,f,s,p,b,v,g,m,h,x,y,k,w,_,q,j,S,A,z,O,T,E,C,P,G,I,N,D,M,R,F,L,B,H,Y,$,J,U;return{setters:[function(t){a=t.d,i=t.r,u=t.c,l=t.o,d=t.a,f=t.w,s=t.u,p=t.I,b=t.b,v=t.e,g=t.f,m=t.g,h=t.h,x=t.i,y=t.j,k=t.k,w=t.l,_=t.t,q=t.m,j=t.n,S=t.p,A=t.q,z=t.s,O=t.v,T=t.x,E=t.y,C=t.z,P=t.A,G=t.B,I=t.C,N=t.D,D=t.E,M=t.F,R=t.G,F=t.H,L=t.J,B=t.K,H=t.L,Y=t.M,$=t.N,J=t._},function(t){U=t.T}],execute:function(){var r=document.createElement("style");r.textContent="ion-toolbar[data-v-b77143f3]{--background: linear-gradient( 135deg, var(--ion-color-primary), var(--ion-color-secondary) );--color: white;--min-height: 80px;--border-color: transparent}.toolbar-avatar[data-v-b77143f3]{width:40px;height:40px;margin-right:12px;border:2px solid rgba(255,255,255,.3)}.toolbar-title[data-v-b77143f3]{padding-left:8px}.greeting[data-v-b77143f3]{font-size:14px;font-weight:400;opacity:.9}.student-name[data-v-b77143f3]{font-size:18px;font-weight:600}.loading-container[data-v-b77143f3]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;text-align:center;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-b77143f3]{width:48px;height:48px;margin-bottom:16px;color:var(--ion-color-primary)}.loading-container p[data-v-b77143f3]{color:var(--ion-color-medium);margin-top:8px}.content-card[data-v-b77143f3]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);background:var(--ion-card-background);border:1px solid var(--ion-border-color)}ion-card-header[data-v-b77143f3]{padding-bottom:8px;border-bottom:1px solid var(--ion-border-color)}ion-card-title[data-v-b77143f3]{display:flex;align-items:center;font-size:18px;font-weight:600;color:var(--ion-text-color)}ion-card-title ion-icon[data-v-b77143f3]{margin-right:8px;color:var(--ion-color-primary)}ion-card-content[data-v-b77143f3]{padding-top:0;color:var(--ion-text-color)}.notification-content[data-v-b77143f3],.attendance-content[data-v-b77143f3]{margin-bottom:16px}.notification-content p[data-v-b77143f3],.attendance-content p[data-v-b77143f3]{margin-bottom:4px;color:var(--ion-text-color);opacity:.9}ion-note[data-v-b77143f3]{font-size:14px;color:var(--ion-color-medium)}.empty-state[data-v-b77143f3]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px 0;text-align:center;color:var(--ion-color-medium);background:var(--ion-background-color)}.empty-state ion-icon[data-v-b77143f3]{font-size:48px;margin-bottom:8px;opacity:.5;color:var(--ion-color-medium)}.empty-state p[data-v-b77143f3]{margin:0;font-size:14px}.view-all-button[data-v-b77143f3]{--color: var(--ion-color-primary);--background: transparent;margin-top:8px}.view-all-button[data-v-b77143f3]:hover{--background: var(--ion-color-light-shade)}.quick-actions-grid[data-v-b77143f3]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:8px 0}.quick-action-button[data-v-b77143f3]{--padding-start: 0;--padding-end: 0;--padding-top: 12px;--padding-bottom: 12px;--background: var(--ion-item-background);--border-radius: 12px;height:100%;margin:0;border:1px solid var(--ion-border-color)}.quick-action-button .action-icon[data-v-b77143f3]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:var(--ion-color-step-100);border-radius:50%;margin:0 auto 8px;transition:background-color .2s ease}.quick-action-button:hover .action-icon[data-v-b77143f3]{background:var(--ion-color-step-200)}.quick-action-button ion-icon[data-v-b77143f3]{font-size:24px;color:var(--ion-color-primary)}.quick-action-button ion-label[data-v-b77143f3]{font-size:12px;font-weight:500;color:var(--ion-text-color);white-space:normal;margin-top:4px}ion-tab-bar[data-v-b77143f3]{--background: var(--ion-card-background);--border: 1px solid var(--ion-border-color);box-shadow:0 -2px 10px rgba(0,0,0,.08);padding-top:8px;padding-bottom:calc(8px + env(safe-area-inset-bottom));height:auto;min-height:60px}ion-tab-button[data-v-b77143f3]{--color: var(--ion-color-medium);--color-selected: var(--ion-color-primary);--background: transparent;--background-focused: var(--ion-color-step-100)}ion-tab-button ion-icon[data-v-b77143f3]{font-size:24px;margin-bottom:4px}ion-tab-button ion-label[data-v-b77143f3]{font-size:12px;margin-top:0;font-weight:500}.dark .content-card[data-v-b77143f3]{box-shadow:0 4px 12px rgba(0,0,0,.3)}.dark .quick-action-button[data-v-b77143f3]{--background: var(--ion-color-step-150);border-color:var(--ion-border-color)}.dark .quick-action-button .action-icon[data-v-b77143f3]{background:var(--ion-color-step-200)}.dark ion-tab-bar[data-v-b77143f3]{box-shadow:0 -2px 10px rgba(0,0,0,.3)}.quick-action-button[data-v-b77143f3]:focus-visible,ion-tab-button[data-v-b77143f3]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.quick-action-button[data-v-b77143f3]:active{transform:translateY(1px)}@media (max-width: 400px){.quick-actions-grid[data-v-b77143f3]{grid-template-columns:repeat(2,1fr);gap:8px}.quick-action-button[data-v-b77143f3]{--padding-top: 8px;--padding-bottom: 8px}.quick-action-button .action-icon[data-v-b77143f3]{width:40px;height:40px}.quick-action-button ion-icon[data-v-b77143f3]{font-size:20px}ion-tab-button ion-icon[data-v-b77143f3]{font-size:22px}ion-tab-button ion-label[data-v-b77143f3]{font-size:11px}}@media (min-width: 768px){.content-card[data-v-b77143f3]{margin:16px auto;max-width:600px}.quick-actions-grid[data-v-b77143f3]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (prefers-contrast: high){.content-card[data-v-b77143f3],.quick-action-button[data-v-b77143f3]{border:2px solid var(--ion-border-color)}ion-tab-bar[data-v-b77143f3]{--border: 2px solid var(--ion-border-color)}}@media (prefers-reduced-motion: reduce){.quick-action-button[data-v-b77143f3]{transition:none}.quick-action-button[data-v-b77143f3]:active{transform:none}}@supports (padding: max(0px)){.content-card[data-v-b77143f3]{margin-left:max(16px,env(safe-area-inset-left));margin-right:max(16px,env(safe-area-inset-right))}ion-tab-bar[data-v-b77143f3]{padding-left:max(0px,env(safe-area-inset-left));padding-right:max(0px,env(safe-area-inset-right))}}\n/*$vite$:1*/",document.head.appendChild(r);var K=["src"],Q={class:"greeting"},V={class:"student-name"},W={key:0,class:"loading-container"},X={key:1},Z={key:0,class:"notification-content"},tt={key:1,class:"empty-state"},nt={key:0,class:"attendance-content"},ot={key:1,class:"empty-state"},rt={class:"quick-actions-grid"},et={class:"action-icon"},at={class:"action-icon"},it={class:"action-icon"},ct=a({__name:"HomePage",setup:function(o){var r=localStorage.getItem("parisklegg_token")||"",a=localStorage.getItem("parisklegg_user"),J=a?JSON.parse(a):null,ct=(null==J?void 0:J.fullname)||"",ut=v(),lt=i(!0),dt=i([]),ft=i([]),st=u(function(){var t=(new Date).getHours();return t<12?"Good Morning":t<18?"Good Afternoon":"Good Evening"}),pt=u(function(){return dt.value.length>0?dt.value[0]:null}),bt=u(function(){return ft.value.length>0?ft.value[0]:null}),vt=u(function(){return"/assets/img/login-logo.png"}),gt=function(t){var n=new Date(t),o=new Date,r=Math.abs(o.getTime()-n.getTime()),e=Math.floor(r/864e5);return 0===e?"Today":1===e?"Yesterday":e<7?"".concat(e," days ago"):n.toLocaleDateString()},mt=function(){return ut.push("/tutorships")},ht=function(){return ut.push("/notifications")},xt=function(){return ut.push("/settings")},yt=function(){var t=c(e().m(function t(){var n;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return lt.value=!0,t.p=1,t.n=2,kt();case 2:return t.n=3,U.show({text:"Data refreshed",position:"top"});case 3:t.n=5;break;case 4:return t.p=4,n=t.v,console.error("Refresh error:",n),t.n=5,U.show({text:"Refresh failed",position:"top"});case 5:return t.p=5,lt.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[1,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),kt=function(){var t=c(e().m(function t(){var o,r,a,i,c;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,Promise.all([b.get("https://klegg-app-whh7m.ondigitalocean.app/api/notifications",{headers:wt()}),b.get("https://klegg-app-whh7m.ondigitalocean.app/api/attendances",{headers:wt()})]);case 1:o=t.v,r=n(o,2),a=r[0],i=r[1],dt.value=a.data,ft.value=i.data,t.n=3;break;case 2:t.p=2,c=t.v,_t(c);case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),wt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)}},_t=function(t){if(console.error("Error fetching data:",t),b.isAxiosError(t)){var n;if(401===(null===(n=t.response)||void 0===n?void 0:n.status))return ut.replace("/"),void U.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void U.show({text:"Request timeout. Please try again",position:"top"})}U.show({text:"Failed to load data. Please try again later",position:"top"})},qt=function(t){var n=t.matches;g(n)},jt=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return qt(t),t.addEventListener("change",qt),t};return l(c(e().m(function t(){var n;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,jt(),t.n=1,kt();case 1:t.n=3;break;case 2:t.p=2,n=t.v,console.error("Initialization error:",n);case 3:return t.p=3,lt.value=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}))),function(n,o){return $(),d(s(p),null,{default:f(function(){return[m(s(A),{class:"ion-no-border"},{default:f(function(){return[m(s(h),null,{default:f(function(){return[m(s(x),{slot:"start"},{default:f(function(){return[m(s(y),{class:"toolbar-avatar"},{default:f(function(){return[k("img",{src:vt.value,alt:"Student"},null,8,K)]}),_:1})]}),_:1}),m(s(w),{class:"toolbar-title"},{default:f(function(){return[k("div",Q,_(st.value),1),k("div",V,_(s(ct)),1)]}),_:1}),m(s(x),{slot:"end"},{default:f(function(){return[m(s(q),{onClick:yt,fill:"clear"},{default:f(function(){return[m(s(j),{icon:s(S),slot:"icon-only"},null,8,["icon"])]}),_:1})]}),_:1})]}),_:1})]}),_:1}),m(s(Y),{fullscreen:!0},{default:f(function(){return[lt.value?($(),z("div",W,[m(s(O),{name:"crescent"}),o[0]||(o[0]=k("p",null,"Loading your data...",-1))])):($(),z("div",X,[m(s(T),{class:"content-card"},{default:f(function(){return[m(s(E),null,{default:f(function(){return[m(s(C),null,{default:f(function(){return[m(s(j),{icon:s(G)},null,8,["icon"]),o[1]||(o[1]=P(" Recent Updates ",-1))]}),_:1})]}),_:1}),m(s(I),null,{default:f(function(){return[pt.value?($(),z("div",Z,[k("p",null,_((n=pt.value.notification_body,r=100,n?n.length>r?n.substring(0,r)+"...":n:"")),1),m(s(N),null,{default:f(function(){return[P(_(gt(pt.value.created_at)),1)]}),_:1})])):($(),z("div",tt,[m(s(j),{icon:s(D)},null,8,["icon"]),o[2]||(o[2]=k("p",null,"No recent updates",-1))])),m(s(q),{expand:"block",fill:"clear",size:"small",onClick:ht,class:"view-all-button"},{default:f(function(){return t(o[3]||(o[3]=[P(" View All Notifications ",-1)]))}),_:1})];var n,r}),_:1})]}),_:1}),m(s(T),{class:"content-card"},{default:f(function(){return[m(s(E),null,{default:f(function(){return[m(s(C),null,{default:f(function(){return[m(s(j),{icon:s(M)},null,8,["icon"]),o[4]||(o[4]=P(" Recent Attendance ",-1))]}),_:1})]}),_:1}),m(s(I),null,{default:f(function(){return[bt.value?($(),z("div",nt,[k("p",null,[o[5]||(o[5]=P(" You were marked ",-1)),k("strong",null,_(bt.value.student_attendance),1)]),m(s(N),null,{default:f(function(){return[P(_(gt(bt.value.created_at)),1)]}),_:1})])):($(),z("div",ot,[m(s(j),{icon:s(R)},null,8,["icon"]),o[6]||(o[6]=k("p",null,"No attendance records yet",-1))]))]}),_:1})]}),_:1}),m(s(T),{class:"content-card"},{default:f(function(){return[m(s(E),null,{default:f(function(){return[m(s(C),null,{default:f(function(){return[m(s(j),{icon:s(F)},null,8,["icon"]),o[7]||(o[7]=P(" Quick Actions ",-1))]}),_:1})]}),_:1}),m(s(I),null,{default:f(function(){return[k("div",rt,[m(s(q),{fill:"clear",class:"quick-action-button",onClick:mt},{default:f(function(){return[k("div",et,[m(s(j),{icon:s(L)},null,8,["icon"])]),m(s(B),null,{default:f(function(){return t(o[8]||(o[8]=[P("Classes",-1)]))}),_:1})]}),_:1}),m(s(q),{fill:"clear",class:"quick-action-button",onClick:ht},{default:f(function(){return[k("div",at,[m(s(j),{icon:s(G)},null,8,["icon"])]),m(s(B),null,{default:f(function(){return t(o[9]||(o[9]=[P("Notifications",-1)]))}),_:1})]}),_:1}),m(s(q),{fill:"clear",class:"quick-action-button",onClick:xt},{default:f(function(){return[k("div",it,[m(s(j),{icon:s(H)},null,8,["icon"])]),m(s(B),null,{default:f(function(){return t(o[10]||(o[10]=[P("Settings",-1)]))}),_:1})]}),_:1})])]}),_:1})]}),_:1})]))]}),_:1})]}),_:1})}}});o("default",J(ct,[["__scopeId","data-v-b77143f3"]]))}}})}();
