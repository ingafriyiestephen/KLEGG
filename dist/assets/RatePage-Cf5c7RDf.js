import{d as S,ar as B,r as l,c as w,o as V,S as m,a as R,b as v,w as t,u as e,I as P,g as a,h as A,i as D,P as F,l as H,A as g,q as M,x as N,y as $,z,aQ as E,C as W,k as _,s as p,U as j,T as G,a3 as L,t as O,a7 as U,aS as Y,m as q,v as J,M as Q,a_ as K,e as X,N as r,n as Z,W as ee,_ as ae}from"./index-CnbctnAi.js";const te={class:"stars-container"},oe={class:"stars"},se={key:0,class:"rating-hint"},ne={key:1,class:"rating-hint"},le={key:1},re=S({__name:"RatePage",setup(ue){const k=localStorage.getItem("parisklegg_token")||"",I=B().params.id||1;l("Advanced Mathematics"),l("Dr. Sarah Johnson");const s=l(0),i=l(""),u=l(!1),f=l(""),d=l(!1),y=["Poor","Fair","Good","Very Good","Excellent"],b=w(()=>y[s.value-1]),h=c=>{s.value=c},C=async()=>{try{u.value=!0,await X.post("https://klegg-app-whh7m.ondigitalocean.app/api/courses/".concat(I,"/ratings"),{rating:s.value,comment:i.value},{headers:T(),timeout:2e4}),f.value="Thank you for your feedback!",d.value=!0,x()}catch(c){f.value="Failed to submit rating. Please try again.",d.value=!0,console.error(c)}finally{u.value=!1}},x=()=>{s.value=0,i.value=""},T=()=>({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(k)});return V(()=>{m.setOverlaysWebView({overlay:!1}),m.setBackgroundColor({color:"#ffffff"}),m.setStyle({style:R.Light})}),(c,o)=>(r(),v(e(P),null,{default:t(()=>[a(e(M),null,{default:t(()=>[a(e(A),{color:"primary"},{default:t(()=>[a(e(D),{slot:"start"},{default:t(()=>[a(e(F),{"default-href":"/courses"})]),_:1}),a(e(H),null,{default:t(()=>o[2]||(o[2]=[g("Course Rating",-1)])),_:1,__:[2]})]),_:1})]),_:1}),a(e(Q),{class:"ion-padding",fullscreen:!0},{default:t(()=>[a(e(N),{class:"rating-card"},{default:t(()=>[a(e($),null,{default:t(()=>[a(e(z),null,{default:t(()=>o[3]||(o[3]=[g("Share Your Experience",-1)])),_:1,__:[3]}),a(e(E),null,{default:t(()=>o[4]||(o[4]=[g("How would you rate this course?",-1)])),_:1,__:[4]})]),_:1}),a(e(W),null,{default:t(()=>[_("div",te,[_("div",oe,[(r(),p(G,null,j(5,n=>a(e(Z),{key:n,icon:n<=s.value?n:e(ee),color:n<=s.value?"warning":"medium",size:"large",onClick:de=>h(n),class:"star-icon"},null,8,["icon","color","onClick"])),64))]),a(e(L),{color:"medium"},{default:t(()=>[s.value===0?(r(),p("p",se,"Tap to rate")):(r(),p("p",ne,O(b.value),1))]),_:1})]),a(e(U),{class:"feedback-item",lines:"none"},{default:t(()=>[a(e(Y),{label:"Your feedback (optional)","label-placement":"floating",placeholder:"What did you like or think could be improved?",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=n=>i.value=n),counter:!0,disabled:u.value},null,8,["modelValue","disabled"])]),_:1}),a(e(q),{expand:"block",shape:"round",disabled:s.value===0||u.value,onClick:C,class:"submit-button"},{default:t(()=>[u.value?(r(),v(e(J),{key:0,name:"crescent"})):(r(),p("span",le,"Submit Rating"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(e(K),{"is-open":d.value,message:f.value,duration:2e3,onDidDismiss:o[1]||(o[1]=n=>d.value=!1),position:"top"},null,8,["is-open","message"])]),_:1}))}}),pe=ae(re,[["__scopeId","data-v-336f4ef0"]]);export{pe as default};
