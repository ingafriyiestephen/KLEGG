import{d as w,ao as B,r,c as V,o as D,a as v,w as t,u as e,I as P,f as R,g as a,h as A,i as M,P as E,l as F,A as g,q as H,x as N,y as $,z,aP as j,C as G,k as _,s as p,T as L,S as Y,a3 as q,t as J,a7 as O,aS as U,m as W,v as K,M as Q,a_ as X,b as Z,N as u,n as ee,V as ae,_ as te}from"./index-CbFFUppU.js";const oe={class:"stars-container"},se={class:"stars"},ne={key:0,class:"rating-hint"},le={key:1,class:"rating-hint"},re={key:1},ue=w({__name:"RatePage",setup(ie){const h=localStorage.getItem("parisklegg_token")||"",k=B().params.id||1;r("Advanced Mathematics"),r("Dr. Sarah Johnson");const n=r(0),d=r(""),i=r(!1),m=r(""),c=r(!1),I=["Poor","Fair","Good","Very Good","Excellent"],b=V(()=>I[n.value-1]),y=s=>{n.value=s},C=async()=>{try{i.value=!0,await Z.post("https://klegg-app-whh7m.ondigitalocean.app/api/courses/".concat(k,"/ratings"),{rating:n.value,comment:d.value},{headers:x(),timeout:2e4}),m.value="Thank you for your feedback!",c.value=!0,T()}catch(s){m.value="Failed to submit rating. Please try again.",c.value=!0,console.error(s)}finally{i.value=!1}},T=()=>{n.value=0,d.value=""},x=()=>({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(h)}),f=s=>{const o=s.matches;R(o)},S=()=>{const s=window.matchMedia("(prefers-color-scheme: dark)");return f(s),s.addEventListener("change",f),s};return D(()=>{S()}),(s,o)=>(u(),v(e(P),null,{default:t(()=>[a(e(H),null,{default:t(()=>[a(e(A),{color:"primary"},{default:t(()=>[a(e(M),{slot:"start"},{default:t(()=>[a(e(E),{"default-href":"/courses"})]),_:1}),a(e(F),null,{default:t(()=>[...o[2]||(o[2]=[g("Course Rating",-1)])]),_:1})]),_:1})]),_:1}),a(e(Q),{class:"ion-padding",fullscreen:!0},{default:t(()=>[a(e(N),{class:"rating-card"},{default:t(()=>[a(e($),null,{default:t(()=>[a(e(z),null,{default:t(()=>[...o[3]||(o[3]=[g("Share Your Experience",-1)])]),_:1}),a(e(j),null,{default:t(()=>[...o[4]||(o[4]=[g("How would you rate this course?",-1)])]),_:1})]),_:1}),a(e(G),null,{default:t(()=>[_("div",oe,[_("div",se,[(u(),p(Y,null,L(5,l=>a(e(ee),{key:l,icon:l<=n.value?l:e(ae),color:l<=n.value?"warning":"medium",size:"large",onClick:ce=>y(l),class:"star-icon"},null,8,["icon","color","onClick"])),64))]),a(e(q),{color:"medium"},{default:t(()=>[n.value===0?(u(),p("p",ne,"Tap to rate")):(u(),p("p",le,J(b.value),1))]),_:1})]),a(e(O),{class:"feedback-item",lines:"none"},{default:t(()=>[a(e(U),{label:"Your feedback (optional)","label-placement":"floating",placeholder:"What did you like or think could be improved?",modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=l=>d.value=l),counter:!0,disabled:i.value},null,8,["modelValue","disabled"])]),_:1}),a(e(W),{expand:"block",shape:"round",disabled:n.value===0||i.value,onClick:C,class:"submit-button"},{default:t(()=>[i.value?(u(),v(e(K),{key:0,name:"crescent"})):(u(),p("span",re,"Submit Rating"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(e(X),{"is-open":c.value,message:m.value,duration:2e3,onDidDismiss:o[1]||(o[1]=l=>c.value=!1),position:"top"},null,8,["is-open","message"])]),_:1}))}}),me=te(ue,[["__scopeId","data-v-a8cc4dcd"]]);export{me as default};
