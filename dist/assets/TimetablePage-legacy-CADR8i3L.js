!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,a){if(t){if("string"==typeof t)return e(t,a);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,a):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(a,o,n,i){var c=o&&o.prototype instanceof l?o:l,u=Object.create(c.prototype);return r(u,"_invoke",function(a,r,o){var n,i,c,l=0,u=o||[],s=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,a){return n=e,i=0,c=t,f.n=a,d}};function p(a,r){for(i=a,c=r,e=0;!s&&l&&!o&&e<u.length;e++){var o,n=u[e],p=f.p,m=n[2];a>3?(o=m===r)&&(c=n[(i=n[4])?5:(i=3,3)],n[4]=n[5]=t):n[0]<=p&&((o=a<2&&p<n[1])?(i=0,f.v=r,f.n=n[1]):p<m&&(o=a<3||n[0]>r||r>m)&&(n[4]=a,n[5]=r,f.n=m,i=0))}if(o||a>1)return d;throw s=!0,r}return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(s&&1===u&&p(u,m),i=u,c=m;(e=i<2?t:c)||!s;){n||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(l=2,n){if(i||(o="next"),e=n[o]){if(!(e=e.call(n,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=n.return)&&e.call(n),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);n=t}else if((e=(s=f.n<0)?c:a.call(r,f))!==d)break}catch(e){n=t,i=1,c=e}finally{l=1}}return{value:e,done:s}}}(a,n,i),!0),u}var d={};function l(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][n]?e(e([][n]())):(r(e={},n,function(){return this}),e),p=s.prototype=l.prototype=Object.create(f);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,r(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=s,r(p,"constructor",s),r(s,"constructor",u),u.displayName="GeneratorFunction",r(s,i,"GeneratorFunction"),r(p),r(p,i,"Generator"),r(p,n,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m:m}})()}function r(t,e,a,o){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}r=function(t,e,a,o){function i(e,a){r(t,e,function(t){return this._invoke(e,a,t)})}e?n?n(t,e,{value:a,enumerable:!o,configurable:!o,writable:!o}):t[e]=a:(i("next",0),i("throw",1),i("return",2))},r(t,e,a,o)}function o(t,e,a,r,o,n,i){try{var c=t[n](i),d=c.value}catch(t){return void a(t)}c.done?e(d):Promise.resolve(d).then(r,o)}System.register(["./index-legacy-C3op4-Ni.js","./index-legacy-EE099LYJ.js"],function(e,r){"use strict";var n,i,c,d,l,u,s,f,p,m,b,v,y,g,h,x,k,w,_,T,S,j,z,O,D,K,A,P,E,I,C,F,G,N,M,B,L,R,Y,$,q,J,U,W;return{setters:[function(t){n=t.d,i=t.ar,c=t.r,d=t.S,l=t.a,u=t.o,s=t.b,f=t.w,p=t.u,m=t.I,b=t.e,v=t.f,y=t.g,g=t.h,h=t.i,x=t.P,k=t.l,w=t.A,_=t.q,T=t.k,S=t.s,j=t.a9,z=t.a3,O=t.t,D=t.v,K=t.n,A=t.J,P=t.a2,E=t.m,I=t.T,C=t.U,F=t.M,G=t.N,N=t.x,M=t.X,B=t.y,L=t.z,R=t.as,Y=t.C,$=t.a7,q=t.G,J=t.K,U=t._},function(t){W=t.T}],execute:function(){var r=document.createElement("style");r.textContent=".header-section[data-v-0cb64339]{margin-bottom:24px;text-align:center;background:var(--ion-background-color)}.title[data-v-0cb64339]{display:block;font-size:1.5rem;font-weight:600;color:var(--ion-color-primary);margin-bottom:4px}.subtitle[data-v-0cb64339]{font-size:.9rem;color:var(--ion-color-medium)}.loading-container[data-v-0cb64339]{display:flex;justify-content:center;align-items:center;height:200px;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-0cb64339]{color:var(--ion-color-primary)}.empty-state[data-v-0cb64339],.error-state[data-v-0cb64339]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px;background:var(--ion-background-color)}.empty-state ion-icon[data-v-0cb64339]{color:var(--ion-color-medium);font-size:64px;margin-bottom:16px;opacity:.7}.error-state ion-icon[data-v-0cb64339]{color:var(--ion-color-danger);font-size:64px;margin-bottom:16px;opacity:.8}.empty-state h3[data-v-0cb64339],.error-state h3[data-v-0cb64339]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.empty-state p[data-v-0cb64339],.error-state p[data-v-0cb64339]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px;line-height:1.4}.timetable-container[data-v-0cb64339]{display:flex;flex-direction:column;gap:16px;padding:16px;background:var(--ion-background-color)}.day-card[data-v-0cb64339]{background:var(--ion-card-background);border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);transition:transform .2s ease,box-shadow .2s ease;border-left:4px solid var(--ion-color-primary);border:1px solid var(--ion-border-color)}.today-card[data-v-0cb64339]{border-left:4px solid var(--ion-color-success);background:rgba(var(--ion-color-success-rgb),.05);border-color:rgba(var(--ion-color-success-rgb),.2)}.day-card-header[data-v-0cb64339]{padding:16px;border-bottom:1px solid var(--ion-border-color);background:var(--ion-item-background);border-radius:12px 12px 0 0}.day-title[data-v-0cb64339]{display:flex;align-items:center;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--ion-text-color)}.day-date[data-v-0cb64339]{font-size:.8rem;color:var(--ion-color-medium);font-weight:400}.time-content[data-v-0cb64339]{padding:16px;background:var(--ion-card-background);border-radius:0 0 12px 12px}.time-content ion-item[data-v-0cb64339]{--padding-start: 0;--inner-padding-end: 0;--background: transparent;--border-color: var(--ion-border-color);margin-bottom:12px}.time-content ion-item[data-v-0cb64339]:last-child{margin-bottom:0}.time-content ion-icon[data-v-0cb64339]{margin-right:8px;color:var(--ion-color-primary)}.time-slot[data-v-0cb64339]{display:flex;align-items:flex-start;gap:12px;padding:12px;background:var(--ion-color-step-50);border-radius:8px;border-left:3px solid var(--ion-color-primary)}.time-slot.today[data-v-0cb64339]{border-left-color:var(--ion-color-success);background:rgba(var(--ion-color-success-rgb),.08)}.time-info[data-v-0cb64339]{flex:1}.time-range[data-v-0cb64339]{font-size:.9rem;font-weight:600;color:var(--ion-text-color);margin-bottom:4px}.time-subject[data-v-0cb64339]{font-size:.9rem;color:var(--ion-text-color);opacity:.9;margin-bottom:2px}.time-location[data-v-0cb64339]{font-size:.8rem;color:var(--ion-color-medium)}.time-icon[data-v-0cb64339]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:var(--ion-color-primary);color:#fff;border-radius:6px;font-size:14px}.day-card[data-v-0cb64339]:active{transform:scale(.98)}.day-card[data-v-0cb64339]:hover{box-shadow:0 6px 16px rgba(0,0,0,.12)}.dark .day-card[data-v-0cb64339]{box-shadow:0 4px 12px rgba(0,0,0,.15)}.dark .today-card[data-v-0cb64339]{background:rgba(var(--ion-color-success-rgb),.08);border-color:rgba(var(--ion-color-success-rgb),.3)}.dark .time-slot[data-v-0cb64339]{background:var(--ion-color-step-100)}.dark .time-slot.today[data-v-0cb64339]{background:rgba(var(--ion-color-success-rgb),.12)}@media (min-width: 768px){.timetable-container[data-v-0cb64339]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;padding:20px;max-width:1200px;margin:0 auto}.day-card[data-v-0cb64339]{margin:0}}@media (min-width: 1024px){.timetable-container[data-v-0cb64339]{grid-template-columns:repeat(3,1fr)}}@media (prefers-contrast: high){.day-card[data-v-0cb64339]{border:2px solid var(--ion-border-color)}.time-slot[data-v-0cb64339]{border:1px solid var(--ion-border-color)}}@media (prefers-reduced-motion: reduce){.day-card[data-v-0cb64339]{transition:none}.day-card[data-v-0cb64339]:active{transform:none}}@supports (padding: max(0px)){.timetable-container[data-v-0cb64339]{padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}}.day-card[data-v-0cb64339]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.time-slot[data-v-0cb64339]:focus-within{outline:2px solid var(--ion-color-primary);outline-offset:2px}.empty-state .action-button[data-v-0cb64339],.error-state .retry-button[data-v-0cb64339]{margin-top:16px}@keyframes fadeIn-0cb64339{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.day-card[data-v-0cb64339]{animation:fadeIn-0cb64339 .3s ease-out}.day-card[data-v-0cb64339]:nth-child(odd){animation-delay:.1s}.day-card[data-v-0cb64339]:nth-child(2n){animation-delay:.2s}\n/*$vite$:1*/",document.head.appendChild(r);var V={class:"header-section"},X={key:0,class:"loading-container"},H={key:1,class:"empty-state"},Q={key:2,class:"error-state"},Z={key:3,class:"timetable-container"},tt=n({__name:"TimetablePage",setup:function(e){var r=localStorage.getItem("parisklegg_token")||"",n=localStorage.getItem("parisklegg_user");n&&JSON.parse(n);var U=i(),tt=v(),et=Number(U.params.id),at=c(""),rt=c(""),ot=c(!0),nt=c(!1),it=c(!1),ct=c([]),dt=function(){var t,e=(t=a().m(function t(){var e,r;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,ot.value=!0,nt.value=!1,t.n=1,b.post("https://klegg-app-whh7m.ondigitalocean.app/api/timetable",{tutorship_id:et},{headers:ut(),timeout:2e4});case 1:e=t.v,console.log("Timetable response:",e.data),lt(e.data),t.n=3;break;case 2:t.p=2,r=t.v,st(r),nt.value=!0;case 3:return t.p=3,ot.value=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}),function(){var e=this,a=arguments;return new Promise(function(r,n){var i=t.apply(e,a);function c(t){o(i,r,n,c,d,"next",t)}function d(t){o(i,r,n,c,d,"throw",t)}c(void 0)})});return function(){return e.apply(this,arguments)}}(),lt=function(t){var e=[{name:"Monday",dayKey:"monday"},{name:"Tuesday",dayKey:"tuesday"},{name:"Wednesday",dayKey:"wednesday"},{name:"Thursday",dayKey:"thursday"},{name:"Friday",dayKey:"friday"},{name:"Saturday",dayKey:"saturday"},{name:"Sunday",dayKey:"sunday"}],a=(new Date).getDay(),r=e[0===a?6:a-1].dayKey;ct.value=[],it.value=!1,t.forEach(function(t){t.tutorship_id===et&&(at.value=t.tutorship_name||"My Timetable",e.forEach(function(e){var a=t["".concat(e.dayKey,"_start")],o=t["".concat(e.dayKey,"_end")];(function(t,e){return!!t&&""!==t.trim()&&!!e&&""!==e.trim()})(a,o)&&(it.value=!0,ct.value.push({name:e.name,dayKey:e.dayKey,startTime:a,endTime:o,isToday:e.dayKey===r}))}))})},ut=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)}},st=function(t){if(console.error("Error fetching data:",t),b.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return tt.replace("/"),void W.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void W.show({text:"Request timeout. Please try again",position:"top"})}W.show({text:"Failed to load data. Please try again later",position:"top"})};return d.setOverlaysWebView({overlay:!1}),d.setBackgroundColor({color:"#ffffff"}),d.setStyle({style:l.Light}),u(function(){rt.value=function(){var t=new Date,e=t.getDay()||7,a=new Date(t);a.setDate(t.getDate()-e+1);var r=new Date(a);r.setDate(a.getDate()+6);var o={month:"short",day:"numeric"};return"".concat(a.toLocaleDateString(void 0,o)," - ").concat(r.toLocaleDateString(void 0,o))}(),dt(),console.log("Mounted: Fetching timetable for tutorship ID:",et)}),function(e,a){return G(),s(p(m),null,{default:f(function(){return[y(p(_),null,{default:f(function(){return[y(p(g),null,{default:f(function(){return[y(p(h),{slot:"start"},{default:f(function(){return[y(p(x),{"default-href":"/"})]}),_:1}),y(p(k),null,{default:f(function(){return t(a[0]||(a[0]=[w("Timetable",-1)]))}),_:1})]}),_:1})]}),_:1}),y(p(F),{class:"ion-padding",fullscreen:!0},{default:f(function(){return[T("div",V,[at.value?(G(),s(p(z),{key:0,class:"title"},{default:f(function(){return[w(O(at.value),1)]}),_:1})):j("",!0),y(p(z),{class:"subtitle"},{default:f(function(){return[w(O(rt.value),1)]}),_:1})]),ot.value?(G(),S("div",X,[y(p(D),{name:"crescent",color:"primary"})])):it.value?nt.value?(G(),S("div",Q,[y(p(K),{icon:p(P),color:"danger",size:"large"},null,8,["icon"]),y(p(z),null,{default:f(function(){return t(a[2]||(a[2]=[T("h3",null,"Failed to load timetable",-1),T("p",null,"Please try again later",-1)]))}),_:1}),y(p(E),{onClick:dt,fill:"clear"},{default:f(function(){return t(a[3]||(a[3]=[w("Retry",-1)]))}),_:1})])):(G(),S("div",Z,[(G(!0),S(I,null,C(ct.value,function(e,r){return G(),s(p(N),{key:r,class:M(["day-card",{"today-card":e.isToday}])},{default:f(function(){return[y(p(B),null,{default:f(function(){return[y(p(L),{class:"day-title"},{default:f(function(){return[w(O(e.name)+" ",1),e.isToday?(G(),s(p(R),{key:0,color:"success"},{default:f(function(){return t(a[4]||(a[4]=[w("Today",-1)]))}),_:1})):j("",!0)]}),_:2},1024)]}),_:2},1024),y(p(Y),{class:"time-content"},{default:f(function(){return[y(p($),{lines:"none"},{default:f(function(){return[y(p(K),{slot:"start",icon:p(q),color:"primary"},null,8,["icon"]),y(p(J),null,{default:f(function(){return[w(O(e.startTime)+" - "+O(e.endTime),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["class"])}),128))])):(G(),S("div",H,[y(p(K),{icon:p(A),size:"large"},null,8,["icon"]),y(p(z),null,{default:f(function(){return t(a[1]||(a[1]=[T("h3",null,"No Classes Scheduled",-1),T("p",null,"Your timetable will appear here when classes are scheduled",-1)]))}),_:1})]))]}),_:1})]}),_:1})}}});e("default",U(tt,[["__scopeId","data-v-0cb64339"]]))}}})}();
