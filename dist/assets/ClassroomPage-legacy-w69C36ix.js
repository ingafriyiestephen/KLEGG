!function(){function e(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,a,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function s(t,o,r,i){var s=o&&o.prototype instanceof d?o:d,l=Object.create(s.prototype);return n(l,"_invoke",function(t,n,o){var r,i,s,d=0,l=o||[],u=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return r=t,i=0,s=e,m.n=n,c}};function f(t,n){for(i=t,s=n,a=0;!u&&d&&!o&&a<l.length;a++){var o,r=l[a],f=m.p,p=r[2];t>3?(o=p===n)&&(s=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=e):r[0]<=f&&((o=t<2&&f<r[1])?(i=0,m.v=n,m.n=r[1]):f<p&&(o=t<3||r[0]>n||n>p)&&(r[4]=t,r[5]=n,m.n=p,i=0))}if(o||t>1)return c;throw u=!0,n}return function(o,l,p){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&f(l,p),i=l,s=p;(a=i<2?e:s)||!u;){r||(i?i<3?(i>1&&(m.n=-1),f(i,s)):m.n=s:m.v=s);try{if(d=2,r){if(i||(o="next"),a=r[o]){if(!(a=a.call(r,s)))throw TypeError("iterator result is not an object");if(!a.done)return a;s=a.value,i<2&&(i=0)}else 1===i&&(a=r.return)&&a.call(r),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);r=e}else if((a=(u=m.n<0)?s:t.call(n,m))!==c)break}catch(a){r=e,i=1,s=a}finally{d=1}}return{value:a,done:u}}}(t,r,i),!0),l}var c={};function d(){}function l(){}function u(){}a=Object.getPrototypeOf;var m=[][r]?a(a([][r]())):(n(a={},r,function(){return this}),a),f=u.prototype=d.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,n(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,n(f,"constructor",u),n(u,"constructor",l),l.displayName="GeneratorFunction",n(u,i,"GeneratorFunction"),n(f),n(f,i,"Generator"),n(f,r,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),(t=function(){return{w:s,m:p}})()}function n(e,t,a,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}n=function(e,t,a,o){function i(t,a){n(e,t,function(e){return this._invoke(t,a,e)})}t?r?r(e,t,{value:a,enumerable:!o,configurable:!o,writable:!o}):e[t]=a:(i("next",0),i("throw",1),i("return",2))},n(e,t,a,o)}function a(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function s(e){a(i,o,r,s,c,"next",e)}function c(e){a(i,o,r,s,c,"throw",e)}s(void 0)})}}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r,i,s=[],c=!0,d=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=r.call(n)).done)&&(s.push(a.value),s.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw o}}return s}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}System.register(["./index-legacy-DacpHz19.js","./index-legacy-Dgim11H5.js"],function(n,a){"use strict";var i,s,c,d,l,u,m,f,p,g,v,y,b,h,x,w,k,T,_,D,j,S,C,J,E,I,M,P,L,z,O,K,N,A,F,G,R,B,Y,$,q,H,U,V,W,Q,X;return{setters:[function(e){i=e.d,s=e.ao,c=e.r,d=e.o,l=e.P,u=e.ap,m=e.a,f=e.w,p=e.u,g=e.I,v=e.b,y=e.e,b=e.f,h=e.g,x=e.h,w=e.j,k=e.aq,T=e.m,_=e.B,D=e.s,j=e.l,S=e.v,C=e.a9,J=e.a2,E=e.t,I=e.x,M=e.p,P=e.K,L=e.a1,z=e.n,O=e.R,K=e.S,N=e.N,A=e.L,F=e.O,G=e.y,R=e.V,B=e.z,Y=e.A,$=e.ar,q=e.D,H=e.a6,U=e.H,V=e.a8,W=e.as,Q=e._},function(e){X=e.T}],execute:function(){var a=document.createElement("style");a.textContent=".header-section[data-v-7e901d31]{margin-bottom:24px;text-align:center;background:var(--ion-background-color)}.title[data-v-7e901d31]{display:block;font-size:1.5rem;font-weight:600;color:var(--ion-color-primary);margin-bottom:4px}.subtitle[data-v-7e901d31]{font-size:.9rem;color:var(--ion-color-medium)}.loading-container[data-v-7e901d31]{display:flex;justify-content:center;align-items:center;height:200px;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-7e901d31]{color:var(--ion-color-primary)}.empty-state[data-v-7e901d31],.error-state[data-v-7e901d31]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px;background:var(--ion-background-color)}.empty-state ion-icon[data-v-7e901d31]{color:var(--ion-color-medium);font-size:64px;margin-bottom:16px;opacity:.7}.error-state ion-icon[data-v-7e901d31]{color:var(--ion-color-danger);font-size:64px;margin-bottom:16px;opacity:.8}.empty-state h3[data-v-7e901d31],.error-state h3[data-v-7e901d31]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.empty-state p[data-v-7e901d31],.error-state p[data-v-7e901d31]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px;line-height:1.4}.timetable-container[data-v-7e901d31]{display:flex;flex-direction:column;gap:16px;padding:16px;background:var(--ion-background-color)}.day-card[data-v-7e901d31]{background:var(--ion-card-background);border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);transition:transform .2s ease,box-shadow .2s ease;border-left:4px solid var(--ion-color-primary);border:1px solid var(--ion-border-color)}.today-card[data-v-7e901d31]{border-left:4px solid var(--ion-color-success);background:rgba(var(--ion-color-success-rgb),.05);border-color:rgba(var(--ion-color-success-rgb),.2)}.day-card-header[data-v-7e901d31]{padding:16px;border-bottom:1px solid var(--ion-border-color);background:var(--ion-item-background);border-radius:12px 12px 0 0}.day-title[data-v-7e901d31]{display:flex;align-items:center;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--ion-text-color)}.day-date[data-v-7e901d31]{font-size:.8rem;color:var(--ion-color-medium);font-weight:400}.time-content[data-v-7e901d31]{padding:16px;background:var(--ion-card-background);border-radius:0 0 12px 12px}.time-content ion-item[data-v-7e901d31]{--padding-start: 0;--inner-padding-end: 0;--background: transparent;--border-color: var(--ion-border-color);margin-bottom:12px}.time-content ion-item[data-v-7e901d31]:last-child{margin-bottom:0}.time-content ion-icon[data-v-7e901d31]{margin-right:8px;color:var(--ion-color-primary)}.join-section[data-v-7e901d31]{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-step-100)}.join-button[data-v-7e901d31]{margin-bottom:8px}.join-button[data-v-7e901d31]:not(.button-disabled){--box-shadow: 0 4px 12px rgba(var(--ion-color-primary-rgb), .3)}.countdown[data-v-7e901d31]{text-align:center;margin-bottom:8px}.countdown ion-text[data-v-7e901d31]{font-size:.8rem;font-weight:500}.status-message[data-v-7e901d31]{text-align:center}.status-message ion-text[data-v-7e901d31]{font-size:.8rem;font-weight:500}.not-today-message[data-v-7e901d31]{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-step-100);text-align:center}.not-today-message ion-text[data-v-7e901d31]{font-size:.8rem;font-style:italic}@media (min-width: 768px){.timetable-container[data-v-7e901d31]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;padding:20px;max-width:1200px;margin:0 auto}.day-card[data-v-7e901d31]{margin:0}}@media (min-width: 1024px){.timetable-container[data-v-7e901d31]{grid-template-columns:repeat(3,1fr)}}.day-card[data-v-7e901d31]:active{transform:scale(.98)}.day-card[data-v-7e901d31]:hover{box-shadow:0 6px 16px rgba(0,0,0,.12)}.day-card[data-v-7e901d31]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.join-button[data-v-7e901d31]:focus{--box-shadow: 0 0 0 2px var(--ion-color-primary)}@keyframes fadeIn-7e901d31{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.day-card[data-v-7e901d31]{animation:fadeIn-7e901d31 .3s ease-out}.day-card[data-v-7e901d31]:nth-child(odd){animation-delay:.1s}.day-card[data-v-7e901d31]:nth-child(2n){animation-delay:.2s}.no-link-message[data-v-7e901d31]{text-align:center;margin-top:8px}.no-link-message ion-text[data-v-7e901d31]{font-size:.8rem;font-weight:500}.course-name[data-v-7e901d31]{font-size:.9rem;font-weight:500;color:var(--ion-color-primary);margin-top:4px}.day-card-header[data-v-7e901d31]:has(.course-name){padding-bottom:12px}\n/*$vite$:1*/",document.head.appendChild(a);var Z={class:"header-section"},ee={key:0,class:"loading-container"},te={key:1,class:"empty-state"},ne={key:2,class:"error-state"},ae={key:3,class:"timetable-container"},oe={key:0,class:"join-section"},re={key:0,class:"no-link-message"},ie={key:1,class:"countdown"},se={key:2,class:"status-message"},ce={key:1,class:"not-today-message"},de=i({__name:"ClassroomPage",setup:function(n){var a=localStorage.getItem("parisklegg_token")||"",i=localStorage.getItem("parisklegg_user");i&&JSON.parse(i);var Q=s(),de=y(),le=Number(Q.params.id),ue=c(""),me=c(""),fe=c(!0),pe=c(!1),ge=c(!1),ve=c([]),ye=null,be=function(e){return e.classEnded?"Class Ended":e.classInProgress?e.meetingLink?"Join Now":"No Link":e.canJoin?e.meetingLink?"Join Soon":"No Link":"Join Soon"},he=function(e){return e.classEnded?"medium":e.classInProgress?"success":e.canJoin?"primary":"medium"},xe=function(e){return e.classEnded?"outline":e.classInProgress||e.canJoin?"solid":"outline"},we=function(e){return e.classEnded?U:e.classInProgress?W:(e.canJoin,U)},ke=function(e){var t=r(e.split(":").map(Number),2),n=t[0],a=t[1],o=new Date;return o.setHours(n,a,0,0),o},Te=function(e,t){var n=new Date;return n>=e&&n<t},_e=function(e){return new Date>=e},De=function(e){var t=new Date,n=new Date(e.getTime()-6e5);if(t<n){var a=n.getTime()-t.getTime(),o=Math.floor(a/36e5),r=Math.floor(a%36e5/6e4);return o>0?"".concat(o,"h ").concat(r,"m"):"".concat(r,"m")}return""},je=function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},Se=function(){var e=o(t().m(function e(){var n,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,fe.value=!0,pe.value=!1,e.n=1,v.post("https://klegg-app-whh7m.ondigitalocean.app/api/timetable",{tutorship_id:le},{headers:Me(),timeout:2e4});case 1:n=e.v,console.log("Timetable response:",n.data),Ce(n.data),e.n=3;break;case 2:e.p=2,a=e.v,Pe(a),pe.value=!0;case 3:return e.p=3,fe.value=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),Ce=function(e){var t=[{name:"Monday",dayKey:"monday"},{name:"Tuesday",dayKey:"tuesday"},{name:"Wednesday",dayKey:"wednesday"},{name:"Thursday",dayKey:"thursday"},{name:"Friday",dayKey:"friday"},{name:"Saturday",dayKey:"saturday"},{name:"Sunday",dayKey:"sunday"}],n=(new Date).getDay(),a=t[0===n?6:n-1].dayKey;ve.value=[],ge.value=!1,e.forEach(function(e){e.tutorship_id===le&&(ue.value=e.tutorship_name||"My Timetable",t.forEach(function(t){var n=e["".concat(t.dayKey,"_start")],o=e["".concat(t.dayKey,"_end")],r=e["".concat(t.dayKey,"_course")];if(function(e,t){return!!e&&""!==e.trim()&&!!t&&""!==t.trim()}(n,o)){ge.value=!0;var i=ke(n),s=ke(o),c=t.dayKey===a,d=e["".concat(t.dayKey,"_meeting_link")],l={name:t.name,dayKey:t.dayKey,courseName:r,startTime:n,endTime:o,isToday:c,canJoin:!1,classInProgress:!1,classEnded:!1,startDateTime:i,endDateTime:s,meetingLink:d};c&&Je(l),ve.value.push(l)}}))}),Ee()},Je=function(e){if(e.startDateTime&&e.endDateTime){var t=new Date,n=new Date(e.startDateTime.getTime()-6e5);e.canJoin=!1,e.classInProgress=!1,e.classEnded=!1,e.countdown="",e.statusMessage="",e.statusColor="medium",t<n?(e.countdown=De(e.startDateTime),e.statusMessage="Join available at ".concat(je(n)),e.statusColor="medium"):t>=n&&t<e.startDateTime?(e.canJoin=!0,e.statusMessage="Class starting soon - Join now",e.statusColor="success"):Te(e.startDateTime,e.endDateTime)?(e.canJoin=!0,e.classInProgress=!0,e.statusMessage="Class in progress",e.statusColor="warning"):_e(e.endDateTime)&&(e.classEnded=!0,e.statusMessage="Class has ended",e.statusColor="danger")}},Ee=function(){ye&&clearInterval(ye),ye=window.setInterval(function(){ve.value.forEach(function(e){if(e.isToday&&e.startDateTime&&e.endDateTime){var t=new Date,n=new Date(e.startDateTime.getTime()-6e5);e.canJoin=!1,e.statusMessage="",e.statusColor="medium",t<n?(e.countdown=De(e.startDateTime),e.statusMessage="Join available at ".concat(je(n))):t>=n&&t<e.startDateTime?(e.canJoin=!0,e.countdown="",e.statusMessage="Join now to enter class",e.statusColor="success"):Te(e.startDateTime,e.endDateTime)?(e.canJoin=!0,e.countdown="",e.statusMessage="Class in progress - Join now",e.statusColor="warning"):_e(e.endDateTime)&&(e.countdown="",e.statusMessage="Class has ended",e.statusColor="danger")}})},6e4)},Ie=function(){var e=o(t().m(function e(n){var a;return t().w(function(e){for(;;)switch(e.n){case 0:if(n.canJoin&&n.meetingLink){e.n=1;break}return n.meetingLink||X.show({text:"Meeting link not available for this class",position:"top",duration:"short"}),e.a(2);case 1:try{X.show({text:"Opening ".concat(ue.value," class..."),position:"top",duration:"short"}),n.meetingLink.includes("zoom.us")?(a=n.meetingLink.replace("/j/","/join/"),window.open(a,"_system")):n.meetingLink.includes("meet.google.com")?window.open(n.meetingLink,"_system"):window.open(n.meetingLink,"_blank")}catch(t){console.error("Error joining class:",t),X.show({text:"Failed to open meeting link",position:"top",duration:"short"})}case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Me=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},Pe=function(e){if(console.error("Error fetching data:",e),v.isAxiosError(e)){var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status))return de.replace("/"),void X.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===e.code)return void X.show({text:"Request timeout. Please try again",position:"top"})}X.show({text:"Failed to load data. Please try again later",position:"top"})},Le=function(e){var t=e.matches;b(t)},ze=function(){var e=window.matchMedia("(prefers-color-scheme: dark)");return Le(e),e.addEventListener("change",Le),e};return d(function(){ze(),me.value=function(){var e=new Date,t=e.getDay()||7,n=new Date(e);n.setDate(e.getDate()-t+1);var a=new Date(n);a.setDate(n.getDate()+6);var o={month:"short",day:"numeric"};return"".concat(n.toLocaleDateString(void 0,o)," - ").concat(a.toLocaleDateString(void 0,o))}(),Se()}),l(o(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:ze();case 1:return e.a(2)}},e)}))),u(function(){ye&&(clearInterval(ye),ye=null)}),function(t,n){var a=A("ion-card-subtitle");return F(),m(p(g),null,{default:f(function(){return[h(p(D),null,{default:f(function(){return[h(p(x),null,{default:f(function(){return[h(p(w),{slot:"start"},{default:f(function(){return[h(p(k),{"default-href":"/"})]}),_:1}),h(p(T),null,{default:f(function(){return e(n[0]||(n[0]=[_("Classroom",-1)]))}),_:1})]}),_:1})]}),_:1}),h(p(N),{class:"ion-padding",fullscreen:!0},{default:f(function(){return[j("div",Z,[ue.value?(F(),m(p(J),{key:0,class:"title"},{default:f(function(){return[_(E(ue.value),1)]}),_:1})):C("",!0),h(p(J),{class:"subtitle"},{default:f(function(){return[_(E(me.value),1)]}),_:1})]),fe.value?(F(),S("div",ee,[h(p(I),{name:"crescent",color:"primary"})])):ge.value?pe.value?(F(),S("div",ne,[h(p(M),{icon:p(L),color:"danger",size:"large"},null,8,["icon"]),h(p(J),null,{default:f(function(){return e(n[2]||(n[2]=[j("h3",null,"Failed to load timetable",-1),j("p",null,"Please try again later",-1)]))}),_:1}),h(p(z),{onClick:Se,fill:"clear"},{default:f(function(){return e(n[3]||(n[3]=[_("Retry",-1)]))}),_:1})])):(F(),S("div",ae,[(F(!0),S(O,null,K(ve.value,function(t,o){return F(),m(p(G),{key:o,class:R(["day-card",{"today-card":t.isToday}])},{default:f(function(){return[h(p(B),null,{default:f(function(){return[h(p(Y),{class:"day-title"},{default:f(function(){return[_(E(t.name)+" ",1),t.isToday?(F(),m(p($),{key:0,color:"success"},{default:f(function(){return e(n[4]||(n[4]=[_("Today",-1)]))}),_:1})):C("",!0)]}),_:2},1024),t.courseName&&"-"!==t.courseName?(F(),m(a,{key:0,class:"course-name"},{default:f(function(){return[_(E(t.courseName),1)]}),_:2},1024)):C("",!0)]}),_:2},1024),h(p(q),{class:"time-content"},{default:f(function(){return[h(p(H),{lines:"none"},{default:f(function(){return[h(p(M),{slot:"start",icon:p(U),color:"primary"},null,8,["icon"]),h(p(V),null,{default:f(function(){return[_(E(t.startTime)+" - "+E(t.endTime),1)]}),_:2},1024)]}),_:2},1024),t.isToday?(F(),S("div",oe,[h(p(z),{class:"join-button",disabled:!t.canJoin||!t.meetingLink,fill:xe(t),color:he(t),onClick:function(e){return Ie(t)},expand:"block"},{default:f(function(){return[h(p(M),{slot:"start",icon:we(t)},null,8,["icon"]),_(" "+E(be(t)),1)]}),_:2},1032,["disabled","fill","color","onClick"]),!t.meetingLink&&t.canJoin?(F(),S("div",re,[h(p(J),{color:"danger"},{default:f(function(){return e(n[5]||(n[5]=[j("small",null,"Meeting link not available",-1)]))}),_:1})])):C("",!0),!t.countdown||t.canJoin||t.classInProgress?C("",!0):(F(),S("div",ie,[h(p(J),{color:"medium"},{default:f(function(){return[_(" Starts in "+E(t.countdown),1)]}),_:2},1024)])),t.statusMessage?(F(),S("div",se,[h(p(J),{color:t.statusColor},{default:f(function(){return[_(E(t.statusMessage),1)]}),_:2},1032,["color"])])):C("",!0)])):(F(),S("div",ce,[h(p(J),{color:"medium"},{default:f(function(){return[_(" Join link will be available on "+E(t.name),1)]}),_:2},1024)]))]}),_:2},1024)]}),_:2},1032,["class"])}),128))])):(F(),S("div",te,[h(p(M),{icon:p(P),size:"large"},null,8,["icon"]),h(p(J),null,{default:f(function(){return e(n[1]||(n[1]=[j("h3",null,"No Classes Scheduled",-1),j("p",null,"Your timetable will appear here when classes are scheduled",-1)]))}),_:1})]))]}),_:1})]}),_:1})}}});n("default",Q(de,[["__scopeId","data-v-7e901d31"]]))}}})}();
