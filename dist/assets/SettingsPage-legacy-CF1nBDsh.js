!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,o,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.toStringTag||"@@toStringTag";function i(t,r,a,l){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return e(s,"_invoke",function(t,e,r){var a,l,i,c=0,s=r||[],f=!1,d={p:0,n:0,v:n,a:g,f:g.bind(n,4),d:function(t,e){return a=t,l=0,i=n,d.n=e,u}};function g(t,e){for(l=t,i=e,o=0;!f&&c&&!r&&o<s.length;o++){var r,a=s[o],g=d.p,p=a[2];t>3?(r=p===e)&&(i=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=n):a[0]<=g&&((r=t<2&&g<a[1])?(l=0,d.v=e,d.n=a[1]):g<p&&(r=t<3||a[0]>e||e>p)&&(a[4]=t,a[5]=e,d.n=p,l=0))}if(r||t>1)return u;throw f=!0,e}return function(r,s,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&g(s,p),l=s,i=p;(o=l<2?n:i)||!f;){a||(l?l<3?(l>1&&(d.n=-1),g(l,i)):d.n=i:d.v=i);try{if(c=2,a){if(l||(r="next"),o=a[r]){if(!(o=o.call(a,i)))throw TypeError("iterator result is not an object");if(!o.done)return o;i=o.value,l<2&&(l=0)}else 1===l&&(o=a.return)&&o.call(a),l<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=n}else if((o=(f=d.n<0)?i:t.call(e,d))!==u)break}catch(o){a=n,l=1,i=o}finally{c=1}}return{value:o,done:f}}}(t,a,l),!0),s}var u={};function c(){}function s(){}function f(){}o=Object.getPrototypeOf;var d=[][a]?o(o([][a]())):(e(o={},a,function(){return this}),o),g=f.prototype=c.prototype=Object.create(d);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t}return s.prototype=f,e(g,"constructor",f),e(f,"constructor",s),s.displayName="GeneratorFunction",e(f,l,"GeneratorFunction"),e(g),e(g,l,"Generator"),e(g,a,function(){return this}),e(g,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:p}})()}function e(t,n,o,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function(t,n,o,r){function l(n,o){e(t,n,function(t){return this._invoke(n,o,t)})}n?a?a(t,n,{value:o,enumerable:!r,configurable:!r,writable:!r}):t[n]=o:(l("next",0),l("throw",1),l("return",2))},e(t,n,o,r)}function n(t,e,n,o,r,a,l){try{var i=t[a](l),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(o,r)}function o(t){return function(){var e=this,o=arguments;return new Promise(function(r,a){var l=t.apply(e,o);function i(t){n(l,r,a,i,u,"next",t)}function u(t){n(l,r,a,i,u,"throw",t)}i(void 0)})}}System.register(["./index-legacy-UPaEcoFv.js","./index-legacy-ZvApCsva.js"],function(e,n){"use strict";var r,a,l,i,u,c,s,f,d,g,p,m,v,h,_,b,y,k,w,x,S,P,j,C,O,I,T,E,A,G,L,K,N,M,V,D,F,U,q,z,B,R,W;return{setters:[function(t){r=t.ae,a=t.af,l=t.d,i=t.r,u=t.o,c=t.S,s=t.a,f=t.b,d=t.w,g=t.u,p=t.I,m=t.g,v=t.h,h=t.l,_=t.A,b=t.q,y=t.k,k=t.s,w=t.a9,x=t.t,S=t.a4,P=t.ag,j=t.K,C=t.a7,O=t.n,I=t.ah,T=t.ai,E=t.aj,A=t.ak,G=t.aa,L=t.al,K=t.am,N=t.an,M=t.ao,V=t.m,D=t.ap,F=t.aq,U=t.M,q=t.e,z=t.f,B=t.N,R=t._},function(t){W=t.T}],execute:function(){var J=document.createElement("style");J.textContent=".profile-section[data-v-f4168af2]{display:flex;align-items:center;padding:20px;background:#fff;border-radius:10px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,.05)}.profile-img[data-v-f4168af2]{width:72px;height:72px;border-radius:50%;margin-right:16px;object-fit:cover;border:2px solid #f4f4f4}.profile-info h2[data-v-f4168af2]{font-size:1.1rem;margin:0 0 4px;font-weight:600;color:#333}.profile-info p[data-v-f4168af2]{color:#666;margin:0 0 4px;font-size:.9rem}.settings-list[data-v-f4168af2]{background:transparent;margin-bottom:24px}.settings-list ion-item[data-v-f4168af2]{--padding-start: 12px;--padding-end: 12px;--min-height: 56px;--border-color: rgba(0, 0, 0, .08)}.logout-section[data-v-f4168af2]{display:flex;justify-content:center;margin-top:8px}.logout-button[data-v-f4168af2]{--padding-start: 12px;--padding-end: 12px;--background-activated: rgba(244, 67, 54, .1);font-weight:500}.logout-button[data-v-f4168af2]:hover{color:var(--ion-color-danger)}\n",document.head.appendChild(J);var H=r("Share",{web:function(){return a(function(){return n.import("./web-legacy-B2hdbXrz.js")},void 0).then(function(t){return new t.ShareWeb})}}),Q={class:"profile-section"},X=["src"],Y={class:"profile-info"},Z={key:0},$={class:"logout-section"},tt="https://www.gravatar.com/avatar/?d=mp",et=l({__name:"SettingsPage",setup:function(e){var n=z(),r=i({name:"",id:0,otp:0,phone:""}),a=["Close"],l=i(!1),R=localStorage.getItem("parisklegg_token")||"",J=null,et=i(!1);u(o(t().m(function e(){var n,o,a,l;return t().w(function(t){for(;;)switch(t.n){case 0:n=localStorage.getItem("darkMode"),(o=localStorage.getItem("parisklegg_user"))&&((a=JSON.parse(o))&&(r.value.name=a.fullname,r.value.id=a.user_id,r.value.email=a.username,r.value.image=a.profile_photo_path||tt,J=a.user_id),console.log("User data:",a.user_id)),null!==n?(et.value="true"===n,document.body.classList.toggle("dark",et.value)):(l=window.matchMedia("(prefers-color-scheme: dark)"),et.value=l.matches,document.body.classList.toggle("dark",et.value),l.addEventListener("change",function(t){et.value=t.matches,document.body.classList.toggle("dark",et.value)}));case 1:return t.a(2)}},e)}))),c.setOverlaysWebView({overlay:!1}),c.setBackgroundColor({color:"#ffffff"}),c.setStyle({style:s.Light});var nt=function(){var e=o(t().m(function e(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,H.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"});case 1:return t.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ot=function(t){window.location.href=t},rt=function(){var e=o(t().m(function e(){var o,r,a;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return l.value=!0,t.p=1,t.n=2,q.post("https://school.klgilc.com/api/logout",{user_id:J,bearer_token:R},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(R)}});case 2:o=t.v,r=o.data,console.log(r.data),!0===r.success&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),n.replace("/")),t.n=4;break;case 3:t.p=3,a=t.v,at(a);case 4:return t.p=4,l.value=!1,t.f(4);case 5:return t.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),at=function(t){if(console.error("Error fetching data:",t),q.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return n.replace("/"),void W.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void W.show({text:"Request timeout. Please try again",position:"top"})}W.show({text:"Failed to load data. Please try again later",position:"top"})};return function(t,e){return B(),f(g(p),null,{default:d(function(){return[m(g(b),null,{default:d(function(){return[m(g(v),null,{default:d(function(){return[m(g(h),null,{default:d(function(){return e[6]||(e[6]=[_("Settings",-1)])}),_:1,__:[6]})]}),_:1})]}),_:1}),m(g(U),{class:"ion-padding"},{default:d(function(){return[y("div",Q,[y("img",{src:r.value.image||tt,class:"profile-img",alt:"Profile Picture"},null,8,X),y("div",Y,[y("h2",null,x(r.value.name||"User Name"),1),r.value.phone?(B(),k("p",Z,x(r.value.phone||"Phone"),1)):w("",!0),y("p",null,x(r.value.email||"Email"),1)])]),m(g(S),{lines:"full",class:"settings-list"},{default:d(function(){return[m(g(P),null,{default:d(function(){return[m(g(j),null,{default:d(function(){return e[7]||(e[7]=[_("Appearance",-1)])}),_:1,__:[7]})]}),_:1}),m(g(C),{lines:"none"},{default:d(function(){return[m(g(O),{slot:"start",icon:g(I),color:"medium"},null,8,["icon"]),m(g(j),null,{default:d(function(){return e[8]||(e[8]=[_("Dark Mode",-1)])}),_:1,__:[8]}),m(g(T),{slot:"end",modelValue:et.value,"onUpdate:modelValue":e[0]||(e[0]=function(t){return et.value=t}),onIonChange:e[1]||(e[1]=function(t){return e=t.detail.checked,document.body.classList.toggle("dark",e),void localStorage.setItem("darkMode",e);var e})},null,8,["modelValue"])]}),_:1})]}),_:1}),m(g(S),{lines:"full",class:"settings-list"},{default:d(function(){return[m(g(P),null,{default:d(function(){return[m(g(j),null,{default:d(function(){return e[9]||(e[9]=[_("General",-1)])}),_:1,__:[9]})]}),_:1}),m(g(C),{button:"",detail:!0,onClick:e[2]||(e[2]=function(t){return ot("https://legal.klgilc.com/privacy-policy.html")})},{default:d(function(){return[m(g(O),{slot:"start",icon:g(E),color:"medium"},null,8,["icon"]),m(g(j),null,{default:d(function(){return e[10]||(e[10]=[_("Privacy Policy",-1)])}),_:1,__:[10]})]}),_:1}),m(g(C),{button:"",detail:!0,onClick:e[3]||(e[3]=function(t){return ot("https://legal.klgilc.com/terms-of-service.html")})},{default:d(function(){return[m(g(O),{slot:"start",icon:g(A),color:"medium"},null,8,["icon"]),m(g(j),null,{default:d(function(){return e[11]||(e[11]=[_("Terms of Service",-1)])}),_:1,__:[11]})]}),_:1}),m(g(C),{button:"",detail:!0,onClick:e[4]||(e[4]=function(t){return ot("https://wa.me/+233208345390")})},{default:d(function(){return[m(g(O),{slot:"start",icon:g(G),color:"medium"},null,8,["icon"]),m(g(j),null,{default:d(function(){return e[12]||(e[12]=[_("Contact Support",-1)])}),_:1,__:[12]})]}),_:1}),m(g(C),{button:"",detail:!0,onClick:e[5]||(e[5]=function(t){return ot("https://legal.klgilc.com/account-deletion.html")})},{default:d(function(){return[m(g(O),{slot:"start",icon:g(L),color:"medium"},null,8,["icon"]),m(g(j),null,{default:d(function(){return e[13]||(e[13]=[_("Delete Account",-1)])}),_:1,__:[13]})]}),_:1}),m(g(C),{button:"",detail:!0,onClick:nt},{default:d(function(){return[m(g(O),{slot:"start",icon:g(K),color:"medium"},null,8,["icon"]),m(g(j),null,{default:d(function(){return e[14]||(e[14]=[_("Share App",-1)])}),_:1,__:[14]})]}),_:1}),m(g(C),{button:"",id:"about-alert",detail:!0},{default:d(function(){return[m(g(O),{slot:"start",icon:g(N),color:"medium"},null,8,["icon"]),m(g(j),null,{default:d(function(){return e[15]||(e[15]=[_("About",-1)])}),_:1,__:[15]})]}),_:1}),m(g(M),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.6",message:"Ⓒ 2025 - Klegg Institute of Language and Communication.",buttons:a})]}),_:1}),y("div",$,[m(g(V),{fill:"clear",color:"medium",onClick:rt,class:"logout-button"},{default:d(function(){return[m(g(O),{slot:"start",icon:g(D)},null,8,["icon"]),e[16]||(e[16]=_(" Sign Out ",-1))]}),_:1,__:[16]})]),m(g(F),{"is-open":l.value,message:"Please wait..."},null,8,["is-open"])]}),_:1})]}),_:1})}}});e("default",R(et,[["__scopeId","data-v-f4168af2"]]))}}})}();
