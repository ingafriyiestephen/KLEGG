!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function l(r,n,o,i){var l=n&&n.prototype instanceof c?n:c,s=Object.create(l.prototype);return a(s,"_invoke",function(r,a,n){var o,i,l,c=0,s=n||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return o=t,i=0,l=e,f.n=r,u}};function m(r,a){for(i=r,l=a,t=0;!d&&c&&!n&&t<s.length;t++){var n,o=s[t],m=f.p,v=o[2];r>3?(n=v===a)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((n=r<2&&m<o[1])?(i=0,f.v=a,f.n=o[1]):m<v&&(n=r<3||o[0]>a||a>v)&&(o[4]=r,o[5]=a,f.n=v,i=0))}if(n||r>1)return u;throw d=!0,a}return function(n,s,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,v),i=s,l=v;(t=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),m(i,l)):f.n=l:f.v=l);try{if(c=2,o){if(i||(n="next"),t=o[n]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=e}else if((t=(d=f.n<0)?l:r.call(a,f))!==u)break}catch(t){o=e,i=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,o,i),!0),s}var u={};function c(){}function s(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,function(){return this}),t),m=d.prototype=c.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=d,a(m,"constructor",d),a(d,"constructor",s),s.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(m),a(m,i,"Generator"),a(m,o,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(r=function(){return{w:l,m:v}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){function i(t,r){a(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},a(e,t,r,n)}function n(e,t,r,a,n,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(a,n)}System.register(["./index-legacy-bhlrdrvL.js","./index-legacy-Btp0TFe9.js"],function(t,a){"use strict";var o,i,l,u,c,s,d,f,m,v,p,y,g,h,x,b,_,w,k,j,E,S,O,z,P,A,T,I,C,N,R,G,D,F,M,L,$,q,B,Y;return{setters:[function(e){o=e.d,i=e.ao,l=e.r,u=e.c,c=e.o,s=e.O,d=e.a,f=e.w,m=e.u,v=e.I,p=e.b,y=e.e,g=e.f,h=e.g,x=e.h,b=e.i,_=e.P,w=e.l,k=e.A,j=e.q,E=e.s,S=e.x,O=e.y,z=e.z,P=e.n,A=e.aO,T=e.C,I=e.k,C=e.a3,N=e.t,R=e.W,G=e.v,D=e.ay,F=e.a2,M=e.m,L=e.a9,$=e.M,q=e.N,B=e._},function(e){Y=e.T}],execute:function(){var a=document.createElement("style");a.textContent=".summary-card[data-v-a89ee625]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}.summary-title[data-v-a89ee625]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:600;color:var(--ion-text-color);white-space:pre-line}.summary-title ion-icon[data-v-a89ee625]{font-size:24px}.summary-content[data-v-a89ee625]{display:flex;justify-content:space-between;padding:16px}.summary-item[data-v-a89ee625]{display:flex;flex-direction:column;align-items:center;flex:1}.divider[data-v-a89ee625]{width:1px;background-color:var(--ion-color-light);margin:0 8px}.summary-label[data-v-a89ee625]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:4px}.summary-value[data-v-a89ee625]{font-size:1.2rem;font-weight:600}.excellent[data-v-a89ee625]{color:var(--ion-color-success)}.good[data-v-a89ee625]{color:var(--ion-color-primary)}.average[data-v-a89ee625]{color:var(--ion-color-warning)}.poor[data-v-a89ee625]{color:var(--ion-color-danger)}.loading-container[data-v-a89ee625]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-a89ee625],.error-state[data-v-a89ee625]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-a89ee625],.error-state ion-icon[data-v-a89ee625]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-a89ee625],.error-state h3[data-v-a89ee625]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-a89ee625],.error-state p[data-v-a89ee625]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.details-card[data-v-a89ee625]{margin:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.details-card ion-card-title[data-v-a89ee625]{font-size:1.1rem;font-weight:600;color:var(--ion-text-color)}.detail-row[data-v-a89ee625]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--ion-color-light)}.detail-row[data-v-a89ee625]:last-child{border-bottom:none}.detail-label[data-v-a89ee625]{font-size:.9rem;color:var(--ion-color-medium)}.detail-value[data-v-a89ee625]{font-size:.9rem;font-weight:500}.feedback-section[data-v-a89ee625]{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-light)}.feedback-title[data-v-a89ee625]{display:block;font-size:.9rem;font-weight:500;color:var(--ion-color-primary);margin-bottom:8px}.feedback-content[data-v-a89ee625]{font-size:.9rem;color:var(--ion-color-medium);line-height:1.5}@media (min-width: 768px){.summary-card[data-v-a89ee625],.details-card[data-v-a89ee625]{margin:16px auto;max-width:800px}}\n/*$vite$:1*/",document.head.appendChild(a);var J={class:"summary-item"},U={class:"summary-item"},W={key:0,class:"loading-container"},H={key:1,class:"empty-state"},K={key:2,class:"error-state"},Q={class:"detail-row"},V={class:"detail-row"},X={key:0,class:"detail-row"},Z={key:1,class:"feedback-section"},ee=o({__name:"ExamPage",setup:function(t){var a=localStorage.getItem("parisklegg_token")||"",o=localStorage.getItem("parisklegg_user"),B=o?JSON.parse(o):null,ee=(null==B?void 0:B.user_id)||0,te=y(),re=i(),ae=Number(re.params.id),ne=l(!0),oe=l(!1),ie=l({student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0}),le=u(function(){return null!==ie.value}),ue=u(function(){var e;return(null===(e=ie.value)||void 0===e?void 0:e.tutorship_name)||"Exam"}),ce=u(function(){return ie.value?se(ie.value.score_numerator,ie.value.score_denominator):0}),se=function(e,t){return 0===t?0:Math.round(e/t*100)},de=function(e){return e>=85?"excellent":e>=70?"good":e>=50?"average":"poor"},fe=function(){var e,t=(e=r().m(function e(){var t,a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,ne.value=!0,oe.value=!1,ie.value={student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0},e.n=1,p.post("https://klegg-app-whh7m.ondigitalocean.app/api/exams",{tutorship_id:ae,student_id:ee},{headers:me(),timeout:2e4});case 1:(t=e.v).data.length>0&&(ie.value=t.data[0]),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Error fetching exam results:",a),ve(a),oe.value=!0;case 3:return e.p=3,ne.value=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}),function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function l(e){n(i,a,o,l,u,"next",e)}function u(e){n(i,a,o,l,u,"throw",e)}l(void 0)})});return function(){return t.apply(this,arguments)}}(),me=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},ve=function(e){if(console.error("Error fetching data:",e),p.isAxiosError(e)){var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status))return te.replace("/"),void Y.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===e.code)return void Y.show({text:"Request timeout. Please try again",position:"top"})}Y.show({text:"Failed to load data. Please try again later",position:"top"})},pe=function(e){var t=e.matches;g(t)},ye=function(){var e=window.matchMedia("(prefers-color-scheme: dark)");return pe(e),e.addEventListener("change",pe),e};return c(function(){ye(),fe()}),s(function(){ye()}),function(t,r){return q(),d(m(v),null,{default:f(function(){return[h(m(j),null,{default:f(function(){return[h(m(x),null,{default:f(function(){return[h(m(b),{slot:"start"},{default:f(function(){return[h(m(_),{"default-href":"/"})]}),_:1}),h(m(w),null,{default:f(function(){return e(r[0]||(r[0]=[k("Exam Results",-1)]))}),_:1})]}),_:1})]}),_:1}),h(m($),{fullscreen:!0},{default:f(function(){return[h(m(S),{class:"summary-card"},{default:f(function(){return[h(m(O),null,{default:f(function(){return[h(m(z),{class:"summary-title"},{default:f(function(){return[h(m(P),{icon:m(A),color:"primary"},null,8,["icon"]),r[1]||(r[1]=k(" Exam Overview ",-1))]}),_:1})]}),_:1}),h(m(T),{class:"summary-content"},{default:f(function(){return[I("div",J,[h(m(C),{class:"summary-label"},{default:f(function(){return e(r[2]||(r[2]=[k("Exam",-1)]))}),_:1}),h(m(C),{class:"summary-value"},{default:f(function(){return[k(N(ue.value),1)]}),_:1})]),r[4]||(r[4]=I("div",{class:"divider"},null,-1)),I("div",U,[h(m(C),{class:"summary-label"},{default:f(function(){return e(r[3]||(r[3]=[k("Your Score",-1)]))}),_:1}),h(m(C),{class:R(["summary-value",de(ce.value)])},{default:f(function(){return[k(N(ce.value)+"% ",1)]}),_:1},8,["class"])])]}),_:1})]}),_:1}),ne.value?(q(),E("div",W,[h(m(G),{name:"crescent",color:"primary"})])):le.value||oe.value?oe.value?(q(),E("div",K,[h(m(P),{icon:m(F),size:"large",color:"danger"},null,8,["icon"]),h(m(C),null,{default:f(function(){return e(r[6]||(r[6]=[I("h3",null,"Error Loading Results",-1),I("p",null,"Please try again later",-1)]))}),_:1}),h(m(M),{fill:"clear",onClick:fe},{default:f(function(){return e(r[7]||(r[7]=[k("Retry",-1)]))}),_:1})])):(q(),d(m(S),{key:3,class:"details-card"},{default:f(function(){return[h(m(O),null,{default:f(function(){return[h(m(z),null,{default:f(function(){return e(r[8]||(r[8]=[k("Detailed Results",-1)]))}),_:1})]}),_:1}),h(m(T),null,{default:f(function(){return[I("div",Q,[h(m(C),{class:"detail-label"},{default:f(function(){return e(r[9]||(r[9]=[k("Score",-1)]))}),_:1}),h(m(C),{class:"detail-value"},{default:f(function(){return[k(N(ie.value.score_numerator)+"/"+N(ie.value.score_denominator),1)]}),_:1})]),I("div",V,[h(m(C),{class:"detail-label"},{default:f(function(){return e(r[10]||(r[10]=[k("Percentage",-1)]))}),_:1}),h(m(C),{class:R(["detail-value",de(ce.value)])},{default:f(function(){return[k(N(ce.value)+"% ",1)]}),_:1},8,["class"])]),ie.value.created_at?(q(),E("div",X,[h(m(C),{class:"detail-label"},{default:f(function(){return e(r[11]||(r[11]=[k("Date Taken",-1)]))}),_:1}),h(m(C),{class:"detail-value"},{default:f(function(){return[k(N((e=ie.value.created_at,new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}))),1)];var e}),_:1})])):L("",!0),ie.value.comments?(q(),E("div",Z,[h(m(C),{class:"feedback-title"},{default:f(function(){return e(r[12]||(r[12]=[k("Instructor Feedback",-1)]))}),_:1}),h(m(C),{class:"feedback-content"},{default:f(function(){return[k(N(ie.value.comments),1)]}),_:1})])):L("",!0)]}),_:1})]}),_:1})):(q(),E("div",H,[h(m(P),{icon:m(D),size:"large",color:"medium"},null,8,["icon"]),h(m(C),null,{default:f(function(){return e(r[5]||(r[5]=[I("h3",null,"No Exam Results",-1),I("p",null,"Your exam results will appear here once available",-1)]))}),_:1})]))]}),_:1})]}),_:1})}}});t("default",B(ee,[["__scopeId","data-v-a89ee625"]]))}}})}();
