!function(){function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,o){if(t){if("string"==typeof t)return n(t,o);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,o):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,e=Array(n);o<n;o++)e[o]=t[o];return e}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function l(o,r,a,i){var l=r&&r.prototype instanceof u?r:u,s=Object.create(l.prototype);return e(s,"_invoke",function(o,e,r){var a,i,l,u=0,s=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(n,o){return a=n,i=0,l=t,f.n=o,c}};function p(o,e){for(i=o,l=e,n=0;!d&&u&&!r&&n<s.length;n++){var r,a=s[n],p=f.p,g=a[2];o>3?(r=g===e)&&(l=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=o<2&&p<a[1])?(i=0,f.v=e,f.n=a[1]):p<g&&(r=o<3||a[0]>e||e>g)&&(a[4]=o,a[5]=e,f.n=g,i=0))}if(r||o>1)return c;throw d=!0,e}return function(r,s,g){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,g),i=s,l=g;(n=i<2?t:l)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,l)):f.n=l:f.v=l);try{if(u=2,a){if(i||(r="next"),n=a[r]){if(!(n=n.call(a,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=t}else if((n=(d=f.n<0)?l:o.call(e,f))!==c)break}catch(n){a=t,i=1,l=n}finally{u=1}}return{value:n,done:d}}}(o,a,i),!0),s}var c={};function u(){}function s(){}function d(){}n=Object.getPrototypeOf;var f=[][a]?n(n([][a]())):(e(n={},a,function(){return this}),n),p=d.prototype=u.prototype=Object.create(f);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,e(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return s.prototype=d,e(p,"constructor",d),e(d,"constructor",s),s.displayName="GeneratorFunction",e(d,i,"GeneratorFunction"),e(p),e(p,i,"Generator"),e(p,a,function(){return this}),e(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:g}})()}function e(t,n,o,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function(t,n,o,r){function i(n,o){e(t,n,function(t){return this._invoke(n,o,t)})}n?a?a(t,n,{value:o,enumerable:!r,configurable:!r,writable:!r}):t[n]=o:(i("next",0),i("throw",1),i("return",2))},e(t,n,o,r)}function r(t,n,o,e,r,a,i){try{var l=t[a](i),c=l.value}catch(t){return void o(t)}l.done?n(c):Promise.resolve(c).then(e,r)}function a(t){return function(){var n=this,o=arguments;return new Promise(function(e,a){var i=t.apply(n,o);function l(t){r(i,e,a,l,c,"next",t)}function c(t){r(i,e,a,l,c,"throw",t)}l(void 0)})}}System.register(["./index-legacy-bhlrdrvL.js","./index-legacy-Btp0TFe9.js"],function(n,e){"use strict";var r,i,l,c,u,s,d,f,p,g,v,m,b,h,y,x,k,w,_,S,j,P,A,C,O,T,E,I,G,K,N,q,F,z,D,L,M,U,$;return{setters:[function(t){r=t.ae,i=t.af,l=t.d,c=t.r,u=t.o,s=t.a,d=t.w,f=t.u,p=t.I,g=t.f,v=t.g,m=t.h,b=t.l,h=t.A,y=t.q,x=t.k,k=t.s,w=t.a9,_=t.t,S=t.a4,j=t.a7,P=t.n,A=t.ag,C=t.K,O=t.ah,T=t.aa,E=t.ai,I=t.aj,G=t.ak,K=t.al,N=t.m,q=t.am,F=t.an,z=t.M,D=t.b,L=t.e,M=t.N,U=t._},function(t){$=t.T}],execute:function(){var B=document.createElement("style");B.textContent=".profile-section[data-v-9c331fb4]{display:flex;align-items:center;padding:20px;background:var(--ion-card-background, var(--ion-item-background));border-radius:12px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,.08);border:1px solid var(--ion-border-color, rgba(0, 0, 0, .08));transition:all .3s ease}.profile-img[data-v-9c331fb4]{width:72px;height:72px;border-radius:50%;margin-right:16px;object-fit:cover;border:2px solid var(--ion-color-light-shade);transition:border-color .3s ease}.profile-info h2[data-v-9c331fb4]{font-size:1.1rem;margin:0 0 4px;font-weight:600;color:var(--ion-text-color);transition:color .3s ease}.profile-info p[data-v-9c331fb4]{color:var(--ion-color-medium);margin:0 0 4px;font-size:.9rem;transition:color .3s ease}.settings-list[data-v-9c331fb4]{background:transparent;margin-bottom:24px}.settings-list ion-item[data-v-9c331fb4]{--padding-start: 12px;--padding-end: 12px;--min-height: 56px;--border-color: var(--ion-border-color);--background: var(--ion-item-background);--background-hover: var(--ion-color-step-50);--background-activated: var(--ion-color-step-100);transition:all .3s ease}.settings-list ion-item[data-v-9c331fb4]:hover{--background: var(--ion-color-step-50)}.logout-section[data-v-9c331fb4]{display:flex;justify-content:center;margin-top:8px;padding:16px 0}.logout-button[data-v-9c331fb4]{--padding-start: 20px;--padding-end: 20px;--background-activated: var(--ion-color-danger-tint);font-weight:500;border:1px solid var(--ion-border-color);border-radius:8px;transition:all .3s ease}.logout-button[data-v-9c331fb4]:hover{--background: var(--ion-color-danger-tint);border-color:var(--ion-color-danger)}.theme-select[data-v-9c331fb4]{min-width:120px}@media (prefers-color-scheme: dark){.profile-section[data-v-9c331fb4]{box-shadow:0 2px 8px rgba(0,0,0,.3);border-color:var(--ion-color-step-300, #333)}.profile-img[data-v-9c331fb4]{border-color:var(--ion-color-step-400, #444)}}ion-content.dark{background:var(--ion-color-step-50, #1a1a1a);border-color:var(--ion-color-step-200, #333)}ion-content.dark{color:var(--ion-text-color, #ffffff)}ion-content.dark{color:var(--ion-color-step-600, #888)}[data-v-9c331fb4]{transition:background-color .3s ease,border-color .3s ease,color .3s ease}@supports (-webkit-touch-callout: none){.dark .quick-action-button[data-v-9c331fb4]{--padding-top: 14px;--padding-bottom: 14px;--padding-start: 6px;--padding-end: 6px;border:1px solid var(--ion-color-step-250)}.dark .quick-action-button ion-label[data-v-9c331fb4]{padding:0 4px;margin-top:6px}}\n/*$vite$:1*/",document.head.appendChild(B);var R=r("Share",{web:function(){return i(function(){return e.import("./web-legacy-zg0SFylT.js")},void 0).then(function(t){return new t.ShareWeb})}}),J={class:"profile-section"},V=["src"],W={class:"profile-info"},H={key:0},Q={class:"logout-section"},X="https://www.gravatar.com/avatar/?d=mp",Y=l({__name:"SettingsPage",setup:function(n){var e=L(),r=c({name:"",id:0,otp:0,phone:""}),i=["Close"],l=c(!1),U=localStorage.getItem("parisklegg_token")||"",B=null,Y=function(t){var n=t.matches;g(n)},Z=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return Y(t),t.addEventListener("change",Y),t};u(a(o().m(function t(){var n,e;return o().w(function(t){for(;;)switch(t.n){case 0:Z(),(n=localStorage.getItem("parisklegg_user"))&&(e=JSON.parse(n))&&(r.value.name=e.fullname,r.value.id=e.user_id,r.value.email=e.username,r.value.image=e.profile_photo_path||X,B=e.user_id);case 1:return t.a(2)}},t)})));var tt=function(){var t=a(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,R.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),nt=function(t){window.location.href=t},ot=function(){var t=a(o().m(function t(){var n,r,a;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return l.value=!0,t.p=1,t.n=2,D.post("https://klegg-app-whh7m.ondigitalocean.app/api/logout",{user_id:B,bearer_token:U},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)}});case 2:n=t.v,r=n.data,console.log(r.data),!0===r.success&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),e.replace("/")),t.n=4;break;case 3:t.p=3,a=t.v,et(a);case 4:return t.p=4,l.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),et=function(t){if(console.error("Error fetching data:",t),D.isAxiosError(t)){var n;if(401===(null===(n=t.response)||void 0===n?void 0:n.status))return e.replace("/"),void $.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void $.show({text:"Request timeout. Please try again",position:"top"})}$.show({text:"Failed to load data. Please try again later",position:"top"})};return function(n,o){return M(),s(f(p),null,{default:d(function(){return[v(f(y),null,{default:d(function(){return[v(f(m),null,{default:d(function(){return[v(f(b),null,{default:d(function(){return t(o[4]||(o[4]=[h("Settings",-1)]))}),_:1})]}),_:1})]}),_:1}),v(f(z),{class:"ion-padding"},{default:d(function(){return[x("div",J,[x("img",{src:r.value.image||X,class:"profile-img",alt:"Profile Picture"},null,8,V),x("div",W,[x("h2",null,_(r.value.name||"User Name"),1),r.value.phone?(M(),k("p",H,_(r.value.phone||"Phone"),1)):w("",!0),x("p",null,_(r.value.email||"Email"),1)])]),v(f(S),{lines:"none",class:"settings-list"},{default:d(function(){return[v(f(j),{button:"",onClick:o[0]||(o[0]=function(t){return nt("https://legal.klgilc.com/privacy-policy.html")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(A),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(o[5]||(o[5]=[h("Privacy Policy",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:o[1]||(o[1]=function(t){return nt("https://legal.klgilc.com/terms-of-service.html")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(O),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(o[6]||(o[6]=[h("Terms of Service",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:o[2]||(o[2]=function(t){return nt("https://wa.me/+233208345390")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(T),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(o[7]||(o[7]=[h("Contact Support",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:o[3]||(o[3]=function(t){return nt("https://legal.klgilc.com/account-deletion.html")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(E),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(o[8]||(o[8]=[h("Delete Account",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:tt},{default:d(function(){return[v(f(P),{slot:"start",icon:f(I),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(o[9]||(o[9]=[h("Share App",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",id:"about-alert"},{default:d(function(){return[v(f(P),{slot:"start",icon:f(G),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(o[10]||(o[10]=[h("About",-1)]))}),_:1})]}),_:1}),v(f(K),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.1",message:"Ⓒ 2025 - Klegg Institute of Language and Communication.",buttons:i})]}),_:1}),x("div",Q,[v(f(N),{fill:"clear",color:"medium",onClick:ot,class:"logout-button"},{default:d(function(){return[v(f(P),{slot:"start",icon:f(q)},null,8,["icon"]),o[11]||(o[11]=h(" Sign Out ",-1))]}),_:1})]),v(f(F),{"is-open":l.value,message:"Please wait..."},null,8,["is-open"])]}),_:1})]}),_:1})}}});n("default",U(Y,[["__scopeId","data-v-9c331fb4"]]))}}})}();
