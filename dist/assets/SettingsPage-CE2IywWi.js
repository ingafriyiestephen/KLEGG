const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-RlmCRBNn.js","assets/index-D8EdY7VT.js","assets/index-BpYW0NNw.css"])))=>i.map(i=>d[i]);
import{af as B,ag as L,d as N,r as w,o as V,a as R,w as l,u as t,I as $,f as G,g as a,h as U,m as j,B as s,s as F,l as r,v as M,aa as W,t as m,a4 as q,a7 as u,p as i,ah as z,a9 as g,ai as H,ab as J,aj as Q,ak as X,al as Y,am as Z,n as ee,an as te,ao as ae,N as oe,ap as le,b as C,e as ne,O as S,_ as se}from"./index-D8EdY7VT.js";import{T as f}from"./index-DSbRV_FN.js";const h=B("Share",{web:()=>L(()=>import("./web-RlmCRBNn.js"),__vite__mapDeps([0,1,2])).then(v=>new v.ShareWeb)}),ie={class:"profile-section"},re=["src"],ue={class:"profile-info"},ge={key:0},de={class:"logout-section"},y="https://www.gravatar.com/avatar/?d=mp",ce=N({__name:"SettingsPage",setup(v){const _=ne(),n=w({name:"",id:0,otp:0,phone:""}),A=["Close"],c=w(!1),b=localStorage.getItem("parisklegg_token")||"";let k=null;const I=o=>{const e=o.matches;G(e)},P=()=>{const o=window.matchMedia("(prefers-color-scheme: dark)");return I(o),o.addEventListener("change",I),o};V(async()=>{P();const o=localStorage.getItem("parisklegg_user");if(o){const e=JSON.parse(o);e&&(n.value.name=e.fullname,n.value.id=e.user_id,n.value.email=e.username,n.value.image=e.profile_photo_path||y,k=e.user_id)}});const x=async()=>{const o=le.getPlatform();return o==="android"?T():o==="ios"?D():O()},O=async()=>{await h.share({title:"Klegg",text:"Access the Klegg app on the web.",url:"https://klegg.vercel.app",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"})},T=async()=>{await h.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"})},D=async()=>{await h.share({title:"Download Klegg.",text:"Get the Klegg app on the App Store.",url:"https://apps.apple.com/gh/app/klegg/id6753220908",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"})},d=o=>{window.location.href=o},E=async()=>{c.value=!0;try{const e=(await C.post("https://klegg-app-whh7m.ondigitalocean.app/api/logout",{user_id:k,bearer_token:b},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)}})).data;console.log(e.data),e.success===!0&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),_.replace("/"))}catch(o){K(o)}finally{c.value=!1}},K=o=>{var e;if(console.error("Error fetching data:",o),C.isAxiosError(o)){if(((e=o.response)==null?void 0:e.status)===401){_.replace("/"),f.show({text:"Session expired. Please login again",position:"top",duration:"long"});return}if(o.code==="ECONNABORTED"){f.show({text:"Request timeout. Please try again",position:"top"});return}}f.show({text:"Failed to load data. Please try again later",position:"top"})};return(o,e)=>(S(),R(t($),null,{default:l(()=>[a(t(F),null,{default:l(()=>[a(t(U),null,{default:l(()=>[a(t(j),null,{default:l(()=>[...e[4]||(e[4]=[s("Settings",-1)])]),_:1})]),_:1})]),_:1}),a(t(oe),{class:"ion-padding"},{default:l(()=>[r("div",ie,[r("img",{src:n.value.image||y,class:"profile-img",alt:"Profile Picture"},null,8,re),r("div",ue,[r("h2",null,m(n.value.name||"User Name"),1),n.value.phone?(S(),M("p",ge,m(n.value.phone||"Phone"),1)):W("",!0),r("p",null,m(n.value.email||"Email"),1)])]),a(t(q),{lines:"none",class:"settings-list"},{default:l(()=>[a(t(u),{button:"",onClick:e[0]||(e[0]=p=>d("https://legal.klgilc.com/privacy-policy.html"))},{default:l(()=>[a(t(i),{slot:"start",icon:t(z),color:"medium"},null,8,["icon"]),a(t(g),null,{default:l(()=>[...e[5]||(e[5]=[s("Privacy Policy",-1)])]),_:1})]),_:1}),a(t(u),{button:"",onClick:e[1]||(e[1]=p=>d("https://legal.klgilc.com/terms-of-service.html"))},{default:l(()=>[a(t(i),{slot:"start",icon:t(H),color:"medium"},null,8,["icon"]),a(t(g),null,{default:l(()=>[...e[6]||(e[6]=[s("Terms of Service",-1)])]),_:1})]),_:1}),a(t(u),{button:"",onClick:e[2]||(e[2]=p=>d("https://wa.me/+233208345390"))},{default:l(()=>[a(t(i),{slot:"start",icon:t(J),color:"medium"},null,8,["icon"]),a(t(g),null,{default:l(()=>[...e[7]||(e[7]=[s("Contact Support",-1)])]),_:1})]),_:1}),a(t(u),{button:"",onClick:e[3]||(e[3]=p=>d("https://legal.klgilc.com/account-deletion.html"))},{default:l(()=>[a(t(i),{slot:"start",icon:t(Q),color:"medium"},null,8,["icon"]),a(t(g),null,{default:l(()=>[...e[8]||(e[8]=[s("Delete Account",-1)])]),_:1})]),_:1}),a(t(u),{button:"",onClick:x},{default:l(()=>[a(t(i),{slot:"start",icon:t(X),color:"medium"},null,8,["icon"]),a(t(g),null,{default:l(()=>[...e[9]||(e[9]=[s("Share App",-1)])]),_:1})]),_:1}),a(t(u),{button:"",id:"about-alert"},{default:l(()=>[a(t(i),{slot:"start",icon:t(Y),color:"medium"},null,8,["icon"]),a(t(g),null,{default:l(()=>[...e[10]||(e[10]=[s("About",-1)])]),_:1})]),_:1}),a(t(Z),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.1.0",message:"â’¸ 2026 - Klegg Institute of Language and Communication.",buttons:A})]),_:1}),r("div",de,[a(t(ee),{fill:"clear",color:"medium",onClick:E,class:"logout-button"},{default:l(()=>[a(t(i),{slot:"start",icon:t(te)},null,8,["icon"]),e[11]||(e[11]=s(" Sign Out ",-1))]),_:1})]),a(t(ae),{"is-open":c.value,message:"Please wait..."},null,8,["is-open"])]),_:1})]),_:1}))}}),fe=se(ce,[["__scopeId","data-v-127739b1"]]);export{fe as default};
