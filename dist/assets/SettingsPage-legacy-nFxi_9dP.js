!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function l(n,r,a,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return o(s,"_invoke",function(n,o,r){var a,i,l,c=0,s=r||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,l=t,f.n=n,u}};function p(n,o){for(i=n,l=o,e=0;!d&&c&&!r&&e<s.length;e++){var r,a=s[e],p=f.p,g=a[2];n>3?(r=g===o)&&(l=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(i=0,f.v=o,f.n=a[1]):p<g&&(r=n<3||a[0]>o||o>g)&&(a[4]=n,a[5]=o,f.n=g,i=0))}if(r||n>1)return u;throw d=!0,o}return function(r,s,g){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,g),i=s,l=g;(e=i<2?t:l)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,l)):f.n=l:f.v=l);try{if(c=2,a){if(i||(r="next"),e=a[r]){if(!(e=e.call(a,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=t}else if((e=(d=f.n<0)?l:n.call(o,f))!==u)break}catch(e){a=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,a,i),!0),s}var u={};function c(){}function s(){}function d(){}e=Object.getPrototypeOf;var f=[][a]?e(e([][a]())):(o(e={},a,function(){return this}),e),p=d.prototype=c.prototype=Object.create(f);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return s.prototype=d,o(p,"constructor",d),o(d,"constructor",s),s.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,a,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:l,m:g}})()}function o(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}o=function(t,e,n,r){function i(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},o(t,e,n,r)}function r(t,e,n,o,r,a,i){try{var l=t[a](i),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(o,r)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function l(t){r(i,o,a,l,u,"next",t)}function u(t){r(i,o,a,l,u,"throw",t)}l(void 0)})}}System.register(["./index-legacy-C8AAjeca.js","./index-legacy-DhEKgVkm.js"],function(e,o){"use strict";var r,i,l,u,c,s,d,f,p,g,v,m,b,h,y,x,k,w,_,S,j,P,O,C,A,T,E,I,G,N,K,F,q,z,B,D,L,U,$;return{setters:[function(t){r=t.ae,i=t.af,l=t.d,u=t.r,c=t.o,s=t.a,d=t.w,f=t.u,p=t.I,g=t.f,v=t.g,m=t.h,b=t.m,h=t.B,y=t.s,x=t.l,k=t.v,w=t.a9,_=t.t,S=t.a3,j=t.a6,P=t.p,O=t.ag,C=t.a8,A=t.ah,T=t.aa,E=t.ai,I=t.aj,G=t.ak,N=t.al,K=t.n,F=t.am,q=t.an,z=t.N,B=t.b,D=t.e,L=t.O,U=t._},function(t){$=t.T}],execute:function(){var M=document.createElement("style");M.textContent=".profile-section[data-v-e31ebf76]{display:flex;align-items:center;padding:20px;background:var(--ion-card-background, var(--ion-item-background));border-radius:12px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,.08);border:1px solid var(--ion-border-color, rgba(0, 0, 0, .08));transition:all .3s ease}.profile-img[data-v-e31ebf76]{width:72px;height:72px;border-radius:50%;margin-right:16px;object-fit:cover;border:2px solid var(--ion-color-light-shade);transition:border-color .3s ease}.profile-info h2[data-v-e31ebf76]{font-size:1.1rem;margin:0 0 4px;font-weight:600;color:var(--ion-text-color);transition:color .3s ease}.profile-info p[data-v-e31ebf76]{color:var(--ion-color-medium);margin:0 0 4px;font-size:.9rem;transition:color .3s ease}.settings-list[data-v-e31ebf76]{background:transparent;margin-bottom:24px}.settings-list ion-item[data-v-e31ebf76]{--padding-start: 12px;--padding-end: 12px;--min-height: 56px;--border-color: var(--ion-border-color);--background: var(--ion-item-background);--background-hover: var(--ion-color-step-50);--background-activated: var(--ion-color-step-100);transition:all .3s ease}.settings-list ion-item[data-v-e31ebf76]:hover{--background: var(--ion-color-step-50)}.logout-section[data-v-e31ebf76]{display:flex;justify-content:center;margin-top:8px;padding:16px 0}.logout-button[data-v-e31ebf76]{--padding-start: 20px;--padding-end: 20px;--background-activated: var(--ion-color-danger-tint);font-weight:500;border:1px solid var(--ion-border-color);border-radius:8px;transition:all .3s ease}.logout-button[data-v-e31ebf76]:hover{--background: var(--ion-color-danger-tint);border-color:var(--ion-color-danger)}.theme-select[data-v-e31ebf76]{min-width:120px}@media (prefers-color-scheme: dark){.profile-section[data-v-e31ebf76]{box-shadow:0 2px 8px rgba(0,0,0,.3);border-color:var(--ion-color-step-300, #333)}.profile-img[data-v-e31ebf76]{border-color:var(--ion-color-step-400, #444)}}ion-content.dark{background:var(--ion-color-step-50, #1a1a1a);border-color:var(--ion-color-step-200, #333)}ion-content.dark{color:var(--ion-text-color, #ffffff)}ion-content.dark{color:var(--ion-color-step-600, #888)}[data-v-e31ebf76]{transition:background-color .3s ease,border-color .3s ease,color .3s ease}@supports (-webkit-touch-callout: none){.dark .quick-action-button[data-v-e31ebf76]{--padding-top: 14px;--padding-bottom: 14px;--padding-start: 6px;--padding-end: 6px;border:1px solid var(--ion-color-step-250)}.dark .quick-action-button ion-label[data-v-e31ebf76]{padding:0 4px;margin-top:6px}}\n/*$vite$:1*/",document.head.appendChild(M);var R=r("Share",{web:function(){return i(function(){return o.import("./web-legacy-BCsIH_Ro.js")},void 0).then(function(t){return new t.ShareWeb})}}),J={class:"profile-section"},V=["src"],W={class:"profile-info"},H={key:0},Q={class:"logout-section"},X="https://www.gravatar.com/avatar/?d=mp",Y=l({__name:"SettingsPage",setup:function(e){var o=D(),r=u({name:"",id:0,otp:0,phone:""}),i=["Close"],l=u(!1),U=localStorage.getItem("parisklegg_token")||"",M=null,Y=function(t){var e=t.matches;g(e)},Z=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return Y(t),t.addEventListener("change",Y),t};c(a(n().m(function t(){var e,o;return n().w(function(t){for(;;)switch(t.n){case 0:Z(),(e=localStorage.getItem("parisklegg_user"))&&(o=JSON.parse(e))&&(r.value.name=o.fullname,r.value.id=o.user_id,r.value.email=o.username,r.value.image=o.profile_photo_path||X,M=o.user_id);case 1:return t.a(2)}},t)})));var tt=function(){var t=a(n().m(function t(){return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,R.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),et=function(t){window.location.href=t},nt=function(){var t=a(n().m(function t(){var e,r,a;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return l.value=!0,t.p=1,t.n=2,B.post("https://klegg-app-whh7m.ondigitalocean.app/api/logout",{user_id:M,bearer_token:U},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)}});case 2:e=t.v,r=e.data,console.log(r.data),!0===r.success&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),o.replace("/")),t.n=4;break;case 3:t.p=3,a=t.v,ot(a);case 4:return t.p=4,l.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),ot=function(t){if(console.error("Error fetching data:",t),B.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return o.replace("/"),void $.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void $.show({text:"Request timeout. Please try again",position:"top"})}$.show({text:"Failed to load data. Please try again later",position:"top"})};return function(e,n){return L(),s(f(p),null,{default:d(function(){return[v(f(y),null,{default:d(function(){return[v(f(m),null,{default:d(function(){return[v(f(b),null,{default:d(function(){return t(n[4]||(n[4]=[h("Settings",-1)]))}),_:1})]}),_:1})]}),_:1}),v(f(z),{class:"ion-padding"},{default:d(function(){return[x("div",J,[x("img",{src:r.value.image||X,class:"profile-img",alt:"Profile Picture"},null,8,V),x("div",W,[x("h2",null,_(r.value.name||"User Name"),1),r.value.phone?(L(),k("p",H,_(r.value.phone||"Phone"),1)):w("",!0),x("p",null,_(r.value.email||"Email"),1)])]),v(f(S),{lines:"none",class:"settings-list"},{default:d(function(){return[v(f(j),{button:"",onClick:n[0]||(n[0]=function(t){return et("https://legal.klgilc.com/privacy-policy.html")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(O),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(n[5]||(n[5]=[h("Privacy Policy",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:n[1]||(n[1]=function(t){return et("https://legal.klgilc.com/terms-of-service.html")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(A),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(n[6]||(n[6]=[h("Terms of Service",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:n[2]||(n[2]=function(t){return et("https://wa.me/+233208345390")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(T),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(n[7]||(n[7]=[h("Contact Support",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:n[3]||(n[3]=function(t){return et("https://legal.klgilc.com/account-deletion.html")})},{default:d(function(){return[v(f(P),{slot:"start",icon:f(E),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(n[8]||(n[8]=[h("Delete Account",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",onClick:tt},{default:d(function(){return[v(f(P),{slot:"start",icon:f(I),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(n[9]||(n[9]=[h("Share App",-1)]))}),_:1})]}),_:1}),v(f(j),{button:"",id:"about-alert"},{default:d(function(){return[v(f(P),{slot:"start",icon:f(G),color:"medium"},null,8,["icon"]),v(f(C),null,{default:d(function(){return t(n[10]||(n[10]=[h("About",-1)]))}),_:1})]}),_:1}),v(f(N),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.8",message:"â’¸ 2025 - Klegg Institute of Language and Communication.",buttons:i})]}),_:1}),x("div",Q,[v(f(K),{fill:"clear",color:"medium",onClick:nt,class:"logout-button"},{default:d(function(){return[v(f(P),{slot:"start",icon:f(F)},null,8,["icon"]),n[11]||(n[11]=h(" Sign Out ",-1))]}),_:1})]),v(f(q),{"is-open":l.value,message:"Please wait..."},null,8,["is-open"])]}),_:1})]}),_:1})}}});e("default",U(Y,[["__scopeId","data-v-e31ebf76"]]))}}})}();
