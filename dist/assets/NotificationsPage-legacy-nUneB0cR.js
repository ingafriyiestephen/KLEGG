!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,a,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",i=e.toStringTag||"@@toStringTag";function c(t,e,r,i){var c=e&&e.prototype instanceof u?e:u,d=Object.create(c.prototype);return o(d,"_invoke",function(t,o,e){var r,i,c,u=0,d=e||[],s=!1,p={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(t,o){return r=t,i=0,c=n,p.n=o,l}};function f(t,o){for(i=t,c=o,a=0;!s&&u&&!e&&a<d.length;a++){var e,r=d[a],f=p.p,v=r[2];t>3?(e=v===o)&&(c=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=n):r[0]<=f&&((e=t<2&&f<r[1])?(i=0,p.v=o,p.n=r[1]):f<v&&(e=t<3||r[0]>o||o>v)&&(r[4]=t,r[5]=o,p.n=v,i=0))}if(e||t>1)return l;throw s=!0,o}return function(e,d,v){if(u>1)throw TypeError("Generator is already running");for(s&&1===d&&f(d,v),i=d,c=v;(a=i<2?n:c)||!s;){r||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(u=2,r){if(i||(e="next"),a=r[e]){if(!(a=a.call(r,c)))throw TypeError("iterator result is not an object");if(!a.done)return a;c=a.value,i<2&&(i=0)}else 1===i&&(a=r.return)&&a.call(r),i<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),i=1);r=n}else if((a=(s=p.n<0)?c:t.call(o,p))!==l)break}catch(a){r=n,i=1,c=a}finally{u=1}}return{value:a,done:s}}}(t,r,i),!0),d}var l={};function u(){}function d(){}function s(){}a=Object.getPrototypeOf;var p=[][r]?a(a([][r]())):(o(a={},r,function(){return this}),a),f=s.prototype=u.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,o(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return d.prototype=s,o(f,"constructor",s),o(s,"constructor",d),d.displayName="GeneratorFunction",o(s,i,"GeneratorFunction"),o(f),o(f,i,"Generator"),o(f,r,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:v}})()}function o(t,n,a,e){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}o=function(t,n,a,e){function i(n,a){o(t,n,function(t){return this._invoke(n,a,t)})}n?r?r(t,n,{value:a,enumerable:!e,configurable:!e,writable:!e}):t[n]=a:(i("next",0),i("throw",1),i("return",2))},o(t,n,a,e)}function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,o){if(t){if("string"==typeof t)return a(t,o);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,o):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,o){(null==o||o>t.length)&&(o=t.length);for(var n=0,a=Array(o);n<o;n++)a[n]=t[n];return a}function e(t,o,n,a,e,r,i){try{var c=t[r](i),l=c.value}catch(t){return void n(t)}c.done?o(l):Promise.resolve(l).then(a,e)}function r(t){return function(){var o=this,n=arguments;return new Promise(function(a,r){var i=t.apply(o,n);function c(t){e(i,a,r,c,l,"next",t)}function l(t){e(i,a,r,c,l,"throw",t)}c(void 0)})}}System.register(["./index-legacy-UPaEcoFv.js","./index-legacy-ZvApCsva.js"],function(o,a){"use strict";var e,i,c,l,u,d,s,p,f,v,g,m,h,y,x,b,w,k,_,S,j,O,z,P,A,E,I,N,T,C,G,L,F,R,B,D,U,q,H,M,J,K,V,W,X,Y;return{setters:[function(t){e=t.d,i=t.r,c=t.O,l=t.o,u=t.b,d=t.w,s=t.u,p=t.I,f=t.e,v=t.f,g=t.S,m=t.a,h=t.g,y=t.h,x=t.l,b=t.A,w=t.q,k=t.s,_=t.k,S=t.v,j=t.n,O=t.a2,z=t.a3,P=t.m,A=t.E,E=t.a4,I=t.U,N=t.T,T=t.a5,C=t.a6,G=t.M,L=t.R,F=t.N,R=t.a7,B=t.X,D=t.j,U=t.a8,q=t.K,H=t.a9,M=t.t,J=t.aa,K=t.ab,V=t.ac,W=t.ad,X=t._},function(t){Y=t.T}],execute:function(){var a=document.createElement("style");a.textContent=".loading-container[data-v-ace97c71]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;text-align:center;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-ace97c71]{width:48px;height:48px;margin-bottom:16px;color:var(--ion-color-primary)}.loading-container p[data-v-ace97c71]{color:var(--ion-color-medium);margin-top:8px}.error-state[data-v-ace97c71],.empty-state[data-v-ace97c71]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px;background:var(--ion-background-color)}.error-state ion-icon[data-v-ace97c71],.empty-state ion-icon[data-v-ace97c71]{margin-bottom:16px;font-size:64px;opacity:.8}.error-state ion-icon[data-v-ace97c71]{color:var(--ion-color-danger)}.empty-state ion-icon[data-v-ace97c71]{color:var(--ion-color-medium)}.error-state h3[data-v-ace97c71],.empty-state h3[data-v-ace97c71]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.error-state p[data-v-ace97c71],.empty-state p[data-v-ace97c71]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px;line-height:1.4}.notification-item[data-v-ace97c71]{--padding-start: 16px;--padding-end: 16px;--inner-padding-end: 16px;--border-color: var(--ion-border-color);--background: var(--ion-item-background);margin-bottom:1px}.notification-item.unread[data-v-ace97c71]{--background: rgba(var(--ion-color-primary-rgb), .08);border-left:3px solid var(--ion-color-primary)}.notification-item[data-v-ace97c71]:last-child{margin-bottom:0}.notification-avatar[data-v-ace97c71]{width:48px;height:48px;margin-right:16px;border:2px solid var(--ion-border-color);background:var(--ion-color-step-100)}.notification-content[data-v-ace97c71]{flex:1}.notification-item h2[data-v-ace97c71]{font-size:1rem;font-weight:600;margin-bottom:6px;color:var(--ion-text-color);line-height:1.3}.preview-text[data-v-ace97c71]{font-size:.9rem;color:var(--ion-text-color);margin-bottom:8px;line-height:1.4;opacity:.9}.notification-meta[data-v-ace97c71]{display:flex;align-items:center;gap:12px;font-size:.8rem;color:var(--ion-color-medium);margin-top:8px}.notification-meta ion-badge[data-v-ace97c71]{font-size:.7rem;font-weight:500;padding:4px 8px;--background: var(--ion-color-step-200);--color: var(--ion-text-color)}.notification-meta ion-badge.primary[data-v-ace97c71]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast)}.date[data-v-ace97c71]{flex:1;color:var(--ion-color-medium)}.reactions-row[data-v-ace97c71]{display:flex;gap:6px;margin:12px 0 8px;flex-wrap:wrap}.reactions-row ion-chip[data-v-ace97c71]{--background: var(--ion-color-step-100);--color: var(--ion-text-color);height:28px;margin:0;font-size:.8rem}.reactions-row ion-chip[data-v-ace97c71]:active{--background: var(--ion-color-step-200)}.reactions-row ion-icon[data-v-ace97c71]{margin-right:4px;font-size:14px;color:var(--ion-color-primary)}.reactions-row ion-label[data-v-ace97c71]{font-size:.75rem;font-weight:500}.comments-count[data-v-ace97c71]{display:flex;align-items:center;gap:4px;color:var(--ion-color-medium)}.comments-count ion-icon[data-v-ace97c71]{font-size:16px}.notification-actions[data-v-ace97c71]{display:flex;gap:8px;margin-top:12px;padding-top:12px;border-top:1px solid var(--ion-border-color)}.action-button[data-v-ace97c71]{--padding-start: 12px;--padding-end: 12px;--border-radius: 6px;font-size:.8rem;height:32px}.dark .notification-item.unread[data-v-ace97c71]{--background: rgba(var(--ion-color-primary-rgb), .12);border-left-color:var(--ion-color-primary)}.dark .reactions-row ion-chip[data-v-ace97c71]{--background: var(--ion-color-step-200)}.dark .notification-avatar[data-v-ace97c71]{background:var(--ion-color-step-200);border-color:var(--ion-color-step-300)}.notification-item[data-v-ace97c71]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:-2px}.reactions-row ion-chip[data-v-ace97c71]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}@media (hover: hover){.notification-item[data-v-ace97c71]:hover{--background: var(--ion-color-step-50)}.reactions-row ion-chip[data-v-ace97c71]:hover{--background: var(--ion-color-step-150)}}@keyframes highlightPulse-ace97c71{0%{background-color:rgba(var(--ion-color-primary-rgb),.1)}50%{background-color:rgba(var(--ion-color-primary-rgb),.2)}to{background-color:rgba(var(--ion-color-primary-rgb),.1)}}.notification-item.new-notification[data-v-ace97c71]{animation:highlightPulse-ace97c71 2s ease-in-out}@media (max-width: 480px){.notification-item[data-v-ace97c71]{--padding-start: 12px;--padding-end: 12px;--inner-padding-end: 12px}.notification-avatar[data-v-ace97c71]{width:40px;height:40px;margin-right:12px}.reactions-row[data-v-ace97c71]{gap:4px}.reactions-row ion-chip[data-v-ace97c71]{height:26px;font-size:.75rem}.notification-meta[data-v-ace97c71]{gap:8px;flex-wrap:wrap}}@media (prefers-contrast: high){.notification-item[data-v-ace97c71]{border-bottom:2px solid var(--ion-border-color)}.notification-item.unread[data-v-ace97c71]{border-left-width:4px}.reactions-row ion-chip[data-v-ace97c71]{border:1px solid var(--ion-border-color)}}@media (prefers-reduced-motion: reduce){.notification-item.new-notification[data-v-ace97c71]{animation:none}}@supports (padding: max(0px)){.notification-item[data-v-ace97c71]{--padding-start: max(16px, env(safe-area-inset-left));--padding-end: max(16px, env(safe-area-inset-right))}}.empty-state .action-button[data-v-ace97c71],.error-state .retry-button[data-v-ace97c71]{margin-top:16px}.loading-container[data-v-ace97c71]{animation:fadeIn-ace97c71 .3s ease-out}@keyframes fadeIn-ace97c71{0%{opacity:0}to{opacity:1}}\n",document.head.appendChild(a);var $={key:0,class:"loading-container"},Q={key:1,class:"error-state"},Z={key:2,class:"empty-state"},tt={class:"preview-text"},ot={key:0,class:"reactions-row"},nt={class:"notification-meta"},at={class:"date"},et={key:0,class:"comments-count"},rt=e({__name:"NotificationsPage",setup:function(o){var a=localStorage.getItem("parisklegg_token")||"",e=localStorage.getItem("parisklegg_user");e&&JSON.parse(e);var X=function(t){return{like:W,heart:V,"thumbs-up":K}[t]||W},rt=v(),it=i(!0),ct=i(!1),lt=i(!1),ut=i([]),dt=i(1),st=i(!0),pt=function(){var o=r(t().m(function o(){var e,r,i,c=arguments;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:1,t.p=1,1===e?(it.value=!0,ut.value=[]):ct.value=!0,lt.value=!1,a){t.n=2;break}throw new Error("No authentication token found");case 2:return t.n=3,f.get("https://school.klgilc.com/api/notifications",{headers:vt(),timeout:1e4,params:{page:e}});case 3:r=t.v,ut.value=1===e?r.data.data:[].concat(n(ut.value),n(r.data.data)),dt.value=e,st.value=!!r.data.next_page_url,console.log("Notifications fetched successfully:",ut.value),t.n=5;break;case 4:t.p=4,i=t.v,gt(i),lt.value=!0;case 5:return t.p=5,it.value=!1,ct.value=!1,t.f(5);case 6:return t.a(2)}},o,null,[[1,4,5,6]])}));return function(){return o.apply(this,arguments)}}(),ft=function(){var o=r(t().m(function o(n){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,pt(dt.value+1);case 1:n.target.complete();case 2:return t.a(2)}},o)}));return function(t){return o.apply(this,arguments)}}();c(r(t().m(function o(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,pt();case 1:return t.a(2)}},o)})));var vt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},gt=function(t){if(console.error("Error fetching data:",t),f.isAxiosError(t)){var o;if(401===(null===(o=t.response)||void 0===o?void 0:o.status))return rt.replace("/"),void Y.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void Y.show({text:"Request timeout. Please try again",position:"top"})}g.setOverlaysWebView({overlay:!1}),g.setBackgroundColor({color:"#ffffff"}),g.setStyle({style:m.Light}),Y.show({text:"Failed to load data. Please try again later",position:"top"})};return l(function(){pt()}),function(t,o){var n=L("ion-chip");return F(),u(s(p),null,{default:d(function(){return[h(s(w),null,{default:d(function(){return[h(s(y),null,{default:d(function(){return[h(s(x),null,{default:d(function(){return o[2]||(o[2]=[b("Notifications",-1)])}),_:1,__:[2]})]}),_:1})]}),_:1}),h(s(G),{fullscreen:!0,onIonScroll:o[1]||(o[1]=function(t){return function(t){var o=t.target;if(o){var n=o.scrollHeight;o.scrollTop+o.clientHeight>.8*n&&st.value&&!ct.value&&pt(dt.value+1)}}(t)})},{default:d(function(){return[it.value&&!ct.value?(F(),k("div",$,[h(s(S),{name:"crescent",color:"primary"}),o[3]||(o[3]=_("p",null,"Loading notifications...",-1))])):lt.value?(F(),k("div",Q,[h(s(j),{icon:s(O),color:"danger",size:"large"},null,8,["icon"]),h(s(z),null,{default:d(function(){return o[4]||(o[4]=[_("h3",null,"Error Loading Notifications",-1),_("p",null,"Please try again later",-1)])}),_:1,__:[4]}),h(s(P),{fill:"clear",onClick:pt},{default:d(function(){return o[5]||(o[5]=[b("Retry",-1)])}),_:1,__:[5]})])):0!==ut.value.length||it.value?(F(),u(s(E),{key:3},{default:d(function(){return[(F(!0),k(N,null,I(ut.value,function(t){return F(),u(s(R),{key:t.id,onClick:function(o){return n=t.id,void rt.push("/notifications/".concat(n));var n},class:B(["notification-item",{unread:!t.is_read}])},{default:d(function(){return[h(s(D),{slot:"start",class:"notification-avatar"},{default:d(function(){return o[7]||(o[7]=[_("img",{src:U,alt:"School Logo"},null,-1)])}),_:1,__:[7]}),h(s(q),null,{default:d(function(){return[_("h2",null,M(t.title),1),_("p",tt,M((a=t.body,e=60,a.length<=e?a:a.substring(0,e)+"...")),1),t.reaction_counts&&Object.keys(t.reaction_counts).length?(F(),k("div",ot,[(F(!0),k(N,null,I(t.reaction_counts,function(t,o){return F(),u(n,{key:o,color:"light",class:"reaction-chip"},{default:d(function(){return[h(s(j),{icon:X(o)},null,8,["icon"]),h(s(q),null,{default:d(function(){return[b(M(t),1)]}),_:2},1024)]}),_:2},1024)}),128))])):H("",!0),_("div",nt,[_("span",at,M((o=t.created_at,new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}))),1),t.comments_count?(F(),k("span",et,[h(s(j),{icon:s(J)},null,8,["icon"]),b(" "+M(t.comments_count),1)])):H("",!0)])];var o,a,e}),_:2},1024)]}),_:2},1032,["onClick","class"])}),128))]}),_:1})):(F(),k("div",Z,[h(s(j),{icon:s(A),color:"medium",size:"large"},null,8,["icon"]),h(s(z),null,{default:d(function(){return o[6]||(o[6]=[_("h3",null,"No Notifications",-1),_("p",null,"You don't have any notifications yet",-1)])}),_:1,__:[6]})])),h(s(T),{onIonInfinite:o[0]||(o[0]=function(t){return ft(t)}),threshold:"100px",disabled:!st.value},{default:d(function(){return[h(s(C),{"loading-spinner":"bubbles","loading-text":"Loading more notifications..."})]}),_:1},8,["disabled"])]}),_:1})]}),_:1})}}});o("default",X(rt,[["__scopeId","data-v-ace97c71"]]))}}})}();
