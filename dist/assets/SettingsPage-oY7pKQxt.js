const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CktwzKya.js","assets/index-Bfnbz8KY.js","assets/index-BpYW0NNw.css"])))=>i.map(i=>d[i]);
import{ae as A,af as E,d as D,r as I,o as B,a as N,w as l,u as t,I as L,f as V,g as o,h as K,m as R,B as n,s as $,l as r,v as U,a9 as j,t as m,a3 as F,a6 as u,p as i,ag as G,a8 as d,ah as M,aa as q,ai as z,aj as H,ak as J,al as W,n as Q,am as X,an as Y,N as Z,b as w,e as ee,O as S,_ as te}from"./index-Bfnbz8KY.js";import{T as f}from"./index-CmNb0h0M.js";const oe=A("Share",{web:()=>E(()=>import("./web-CktwzKya.js"),__vite__mapDeps([0,1,2])).then(h=>new h.ShareWeb)}),ae={class:"profile-section"},le=["src"],se={class:"profile-info"},ne={key:0},ie={class:"logout-section"},C="https://www.gravatar.com/avatar/?d=mp",re=D({__name:"SettingsPage",setup(h){const _=ee(),s=I({name:"",id:0,otp:0,phone:""}),y=["Close"],g=I(!1),v=localStorage.getItem("parisklegg_token")||"";let k=null;const b=a=>{const e=a.matches;V(e)},P=()=>{const a=window.matchMedia("(prefers-color-scheme: dark)");return b(a),a.addEventListener("change",b),a};B(async()=>{P();const a=localStorage.getItem("parisklegg_user");if(a){const e=JSON.parse(a);e&&(s.value.name=e.fullname,s.value.id=e.user_id,s.value.email=e.username,s.value.image=e.profile_photo_path||C,k=e.user_id)}});const O=async()=>{await oe.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"})},c=a=>{window.location.href=a},x=async()=>{g.value=!0;try{const e=(await w.post("https://klegg-app-whh7m.ondigitalocean.app/api/logout",{user_id:k,bearer_token:v},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}})).data;console.log(e.data),e.success===!0&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),_.replace("/"))}catch(a){T(a)}finally{g.value=!1}},T=a=>{var e;if(console.error("Error fetching data:",a),w.isAxiosError(a)){if(((e=a.response)==null?void 0:e.status)===401){_.replace("/"),f.show({text:"Session expired. Please login again",position:"top",duration:"long"});return}if(a.code==="ECONNABORTED"){f.show({text:"Request timeout. Please try again",position:"top"});return}}f.show({text:"Failed to load data. Please try again later",position:"top"})};return(a,e)=>(S(),N(t(L),null,{default:l(()=>[o(t($),null,{default:l(()=>[o(t(K),null,{default:l(()=>[o(t(R),null,{default:l(()=>[...e[4]||(e[4]=[n("Settings",-1)])]),_:1})]),_:1})]),_:1}),o(t(Z),{class:"ion-padding"},{default:l(()=>[r("div",ae,[r("img",{src:s.value.image||C,class:"profile-img",alt:"Profile Picture"},null,8,le),r("div",se,[r("h2",null,m(s.value.name||"User Name"),1),s.value.phone?(S(),U("p",ne,m(s.value.phone||"Phone"),1)):j("",!0),r("p",null,m(s.value.email||"Email"),1)])]),o(t(F),{lines:"none",class:"settings-list"},{default:l(()=>[o(t(u),{button:"",onClick:e[0]||(e[0]=p=>c("https://legal.klgilc.com/privacy-policy.html"))},{default:l(()=>[o(t(i),{slot:"start",icon:t(G),color:"medium"},null,8,["icon"]),o(t(d),null,{default:l(()=>[...e[5]||(e[5]=[n("Privacy Policy",-1)])]),_:1})]),_:1}),o(t(u),{button:"",onClick:e[1]||(e[1]=p=>c("https://legal.klgilc.com/terms-of-service.html"))},{default:l(()=>[o(t(i),{slot:"start",icon:t(M),color:"medium"},null,8,["icon"]),o(t(d),null,{default:l(()=>[...e[6]||(e[6]=[n("Terms of Service",-1)])]),_:1})]),_:1}),o(t(u),{button:"",onClick:e[2]||(e[2]=p=>c("https://wa.me/+233208345390"))},{default:l(()=>[o(t(i),{slot:"start",icon:t(q),color:"medium"},null,8,["icon"]),o(t(d),null,{default:l(()=>[...e[7]||(e[7]=[n("Contact Support",-1)])]),_:1})]),_:1}),o(t(u),{button:"",onClick:e[3]||(e[3]=p=>c("https://legal.klgilc.com/account-deletion.html"))},{default:l(()=>[o(t(i),{slot:"start",icon:t(z),color:"medium"},null,8,["icon"]),o(t(d),null,{default:l(()=>[...e[8]||(e[8]=[n("Delete Account",-1)])]),_:1})]),_:1}),o(t(u),{button:"",onClick:O},{default:l(()=>[o(t(i),{slot:"start",icon:t(H),color:"medium"},null,8,["icon"]),o(t(d),null,{default:l(()=>[...e[9]||(e[9]=[n("Share App",-1)])]),_:1})]),_:1}),o(t(u),{button:"",id:"about-alert"},{default:l(()=>[o(t(i),{slot:"start",icon:t(J),color:"medium"},null,8,["icon"]),o(t(d),null,{default:l(()=>[...e[10]||(e[10]=[n("About",-1)])]),_:1})]),_:1}),o(t(W),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.8",message:"â’¸ 2025 - Klegg Institute of Language and Communication.",buttons:y})]),_:1}),r("div",ie,[o(t(Q),{fill:"clear",color:"medium",onClick:x,class:"logout-button"},{default:l(()=>[o(t(i),{slot:"start",icon:t(X)},null,8,["icon"]),e[11]||(e[11]=n(" Sign Out ",-1))]),_:1})]),o(t(Y),{"is-open":g.value,message:"Please wait..."},null,8,["is-open"])]),_:1})]),_:1}))}}),ce=te(re,[["__scopeId","data-v-e31ebf76"]]);export{ce as default};
