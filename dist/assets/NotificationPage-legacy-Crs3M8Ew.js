!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){a(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function a(e,n,a){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function r(n,a,o,r){var i=a&&a.prototype instanceof l?a:l,d=Object.create(i.prototype);return u(d,"_invoke",function(n,a,o){var r,i,u,l=0,d=o||[],s=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return r=e,i=0,u=t,p.n=n,c}};function v(n,a){for(i=n,u=a,e=0;!s&&l&&!o&&e<d.length;e++){var o,r=d[e],v=p.p,f=r[2];n>3?(o=f===a)&&(u=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=t):r[0]<=v&&((o=n<2&&v<r[1])?(i=0,p.v=a,p.n=r[1]):v<f&&(o=n<3||r[0]>a||a>f)&&(r[4]=n,r[5]=a,p.n=f,i=0))}if(o||n>1)return c;throw s=!0,a}return function(o,d,f){if(l>1)throw TypeError("Generator is already running");for(s&&1===d&&v(d,f),i=d,u=f;(e=i<2?t:u)||!s;){r||(i?i<3?(i>1&&(p.n=-1),v(i,u)):p.n=u:p.v=u);try{if(l=2,r){if(i||(o="next"),e=r[o]){if(!(e=e.call(r,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=r.return)&&e.call(r),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);r=t}else if((e=(s=p.n<0)?u:n.call(a,p))!==c)break}catch(e){r=t,i=1,u=e}finally{l=1}}return{value:e,done:s}}}(n,o,r),!0),d}var c={};function l(){}function d(){}function s(){}e=Object.getPrototypeOf;var p=[][a]?e(e([][a]())):(u(e={},a,function(){return this}),e),v=s.prototype=l.prototype=Object.create(p);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,u(t,o,"GeneratorFunction")),t.prototype=Object.create(v),t}return d.prototype=s,u(v,"constructor",s),u(s,"constructor",d),d.displayName="GeneratorFunction",u(s,o,"GeneratorFunction"),u(v),u(v,o,"Generator"),u(v,a,function(){return this}),u(v,"toString",function(){return"[object Generator]"}),(i=function(){return{w:r,m:f}})()}function u(t,e,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}u=function(t,e,n,a){function r(e,n){u(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(r("next",0),r("throw",1),r("return",2))},u(t,e,n,a)}function c(t,e,n,a,o,r,i){try{var u=t[r](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(a,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var r=t.apply(e,n);function i(t){c(r,a,o,i,u,"next",t)}function u(t){c(r,a,o,i,u,"throw",t)}i(void 0)})}}System.register(["./index-legacy-BDm5fI0y.js","./index-legacy-5QTRqfGm.js"],function(t,e){"use strict";var a,r,u,c,d,s,p,v,f,m,g,h,b,y,x,k,_,w,j,O,S,C,P,z,E,I,N,A,T,D,L,F,G,R,U,$,B,J,M,V,Y,H,W,Z,q,X,K,Q,tt,et,nt,at,ot,rt,it,ut,ct,lt,dt,st,pt,vt,ft,mt,gt,ht;return{setters:[function(t){a=t.d,r=t.r,u=t.ap,c=t.c,d=t.o,s=t.P,p=t.a,v=t.w,f=t.u,m=t.I,g=t.b,h=t.e,b=t.f,y=t.g,x=t.h,k=t.L,_=t.ar,w=t.m,j=t.B,O=t.s,S=t.v,C=t.aa,P=t.x,z=t.p,E=t.a2,I=t.a3,N=t.l,A=t.n,T=t.y,D=t.z,L=t.A,F=t.t,G=t.aW,R=t.D,U=t.aX,$=t.aY,B=t.a7,J=t.aO,M=t.a9,V=t.T,Y=t.aI,H=t.R,W=t.S,Z=t.aZ,q=t.a4,X=t.a_,K=t.a5,Q=t.a6,tt=t.a$,et=t.b0,nt=t.b1,at=t.N,ot=t.b2,rt=t.b3,it=t.b4,ut=t.aH,ct=t.O,lt=t.k,dt=t.ac,st=t.b5,pt=t.b6,vt=t.b7,ft=t.ad,mt=t.ae,gt=t._},function(t){ht=t.T}],execute:function(){var e=document.createElement("style");e.textContent='.loading-container[data-v-a6d15329]{display:flex;justify-content:center;align-items:center;height:100px;margin:20px 0}.error-state[data-v-a6d15329]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.error-state ion-icon[data-v-a6d15329]{margin-bottom:16px;color:var(--ion-color-medium)}.error-state h3[data-v-a6d15329]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.error-state p[data-v-a6d15329]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.notification-card[data-v-a6d15329]{margin:0;border-radius:0;box-shadow:none;border-bottom:1px solid var(--ion-border-color);background:var(--ion-card-background)}.notification-title[data-v-a6d15329]{color:var(--ion-text-color);white-space:pre-line}.notification-body[data-v-a6d15329]{font-size:1rem;line-height:1.5;color:var(--ion-text-color);white-space:pre-line}.attachment-container[data-v-a6d15329]{margin:16px 0}.image-attachment[data-v-a6d15329]{border-radius:12px;overflow:hidden;background:var(--ion-color-light);cursor:pointer;transition:transform .2s ease}.image-attachment[data-v-a6d15329]:hover{transform:scale(1.02)}.attachment-image[data-v-a6d15329]{width:100%;max-height:400px;object-fit:contain;display:block}.file-attachment[data-v-a6d15329]{margin:16px 0}.file-attachment ion-item[data-v-a6d15329]{--background: var(--ion-color-light);--border-radius: 12px;--padding-start: 16px;--padding-end: 16px;margin:8px 0}.reactions-container[data-v-a6d15329]{display:flex;gap:8px;margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-border-color)}.reaction-button[data-v-a6d15329]{--color: var(--ion-color-medium);--background: var(--ion-item-background);--background-hover: var(--ion-color-light-shade);--background-activated: var(--ion-color-light-tint)}.comments-section[data-v-a6d15329]{margin-top:16px;background:var(--ion-background-color)}.comment-item[data-v-a6d15329]{--padding-start: 0;--inner-padding-end: 0;--background: var(--ion-item-background);border-bottom:1px solid var(--ion-border-color)}.comment-item[data-v-a6d15329]:last-child{border-bottom:none}.comment-item ion-avatar[data-v-a6d15329]{width:40px;height:40px;margin-right:12px}.comment-item h3[data-v-a6d15329]{font-size:.9rem;font-weight:500;color:var(--ion-text-color)}.comment-item p[data-v-a6d15329]{font-size:.9rem;color:var(--ion-text-color);margin:4px 0;opacity:.9}.comment-date[data-v-a6d15329]{font-size:.7rem;color:var(--ion-color-medium)}.comment-input-container[data-v-a6d15329]{position:sticky;bottom:0;background:var(--ion-background-color);padding:8px;border-top:1px solid var(--ion-border-color)}.comment-input-container ion-textarea[data-v-a6d15329]{background:var(--ion-color-step-100);border-radius:20px;--padding-start: 12px;--padding-end: 12px;font-size:.9rem;--color: var(--ion-text-color);--placeholder-color: var(--ion-color-medium);--placeholder-opacity: .6}ion-popover[data-v-a6d15329]{--background: var(--ion-card-background);--color: var(--ion-text-color)}ion-popover ion-content[data-v-a6d15329]{--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--background: var(--ion-card-background)}.reaction-picker-buttons[data-v-a6d15329]{display:flex;gap:4px;flex-wrap:wrap}.reaction-picker-button[data-v-a6d15329]{--padding-start: 8px;--padding-end: 8px;--background: var(--ion-item-background);--color: var(--ion-text-color);--border-radius: 16px;font-size:1.2rem}.vote-buttons[data-v-a6d15329]{display:flex;flex-direction:column;align-items:center;margin-right:8px;background:var(--ion-item-background);border-radius:20px;padding:4px}.vote-button[data-v-a6d15329]{--color: var(--ion-color-medium);--background: transparent;--background-hover: var(--ion-color-light-shade);--background-activated: var(--ion-color-light-tint)}.vote-button.active[data-v-a6d15329]{--color: var(--ion-color-primary)}.vote-count[data-v-a6d15329]{font-size:.8em;margin:4px 0;color:var(--ion-text-color);font-weight:500}.image-modal[data-v-a6d15329]{--width: 100%;--height: 100%}.modal-content[data-v-a6d15329]{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#000}.modal-image[data-v-a6d15329]{max-width:100%;max-height:100%;object-fit:contain}.close-btn[data-v-a6d15329]{position:absolute;top:16px;right:16px;--background: rgba(255, 255, 255, .2)}ion-icon[data-v-a6d15329]{width:16px;height:16px;color:var(--ion-color-medium)}@media (max-width: 480px){.comment-item[data-v-a6d15329]{--padding-start: 8px;--padding-end: 8px}.vote-buttons[data-v-a6d15329]{margin-right:4px;padding:2px}.attachment-image[data-v-a6d15329]{max-height:300px}}.comment-input-container ion-textarea[data-v-a6d15329]:focus-within{background:var(--ion-color-step-200);outline:2px solid var(--ion-color-primary-tint)}.reaction-button[data-v-a6d15329]:focus,.vote-button[data-v-a6d15329]:focus{outline:2px solid var(--ion-color-primary);outline-offset:2px}.notification-card.new-item[data-v-a6d15329]{animation:fadeInUp-a6d15329 .3s ease-out}@keyframes fadeInUp-a6d15329{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.attachment-loading[data-v-a6d15329]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;background:var(--ion-color-light);border-radius:12px;gap:12px}.attachment-loading p[data-v-a6d15329]{margin:0;color:var(--ion-color-medium);font-size:.9rem}.file-loading[data-v-a6d15329]{display:flex;align-items:center;justify-content:center;width:24px;height:24px}.modal-loading[data-v-a6d15329]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;z-index:10}.modal-loading p[data-v-a6d15329]{color:#fff;margin:0;font-size:.9rem}.attachment-image[data-v-a6d15329],.modal-image[data-v-a6d15329]{transition:opacity .3s ease}.file-attachment ion-item[disabled][data-v-a6d15329]{opacity:.6;pointer-events:none}@media (max-width: 480px){.attachment-loading[data-v-a6d15329]{height:150px}.attachment-loading p[data-v-a6d15329]{font-size:.8rem}}.skeleton-image[data-v-a6d15329]{width:100%;height:300px;background:var(--ion-color-medium-shade);position:relative;overflow:hidden;border-radius:8px}.skeleton-image[data-v-a6d15329]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.3) 50%,transparent 100%);animation:wave-a6d15329 1.5s infinite}@keyframes wave-a6d15329{0%{transform:translate(-100%)}to{transform:translate(100%)}}.image-skeleton[data-v-a6d15329]{width:100%;height:220px;border-radius:10px;background:linear-gradient(90deg,#e0e0e0 25%,#f5f5f5,#e0e0e0 75%);background-size:400% 100%;animation:skeletonLoading-a6d15329 1.4s ease infinite;margin-top:10px}@keyframes skeletonLoading-a6d15329{0%{background-position:100% 0}to{background-position:-100% 0}}.attachment-image[data-v-a6d15329]{width:100%;border-radius:10px;margin-top:10px}.attachment-image[data-v-a6d15329]{width:100%;border-radius:10px;margin-top:10px;cursor:pointer}\n/*$vite$:1*/',document.head.appendChild(e);var bt={key:0,class:"loading-container"},yt={key:1,class:"error-state"},xt={key:2},kt={class:"notification-body"},_t={key:0,class:"attachment-container"},wt={key:0,class:"image-skeleton"},jt=["src"],Ot={key:1,class:"file-attachment"},St={key:0,class:"file-loading",slot:"start"},Ct={class:"reactions-container"},Pt={class:"comments-section"},zt=["src"],Et={class:"comment-date"},It={slot:"end",class:"vote-buttons"},Nt={class:"vote-count"},At={class:"vote-count"},Tt={class:"comment-input-container"},Dt={key:0,class:"modal-content"},Lt={key:0,class:"modal-loading"},Ft=["src","alt"],Gt=a({__name:"NotificationPage",setup:function(t){var e=localStorage.getItem("parisklegg_token")||"",a=localStorage.getItem("parisklegg_user");a&&JSON.parse(a);var gt=null,Gt=r({name:"",id:0,otp:0,phone:""}),Rt=u(),Ut=h(),$t=Number(Rt.params.id),Bt=r(!0),Jt=r(!1),Mt=r(!1),Vt=r(!1),Yt=r(!1),Ht=r(null),Wt=r([]),Zt=r(1),qt=r(!0),Xt=r(""),Kt=r(null),Qt=r(!1),te=r(null),ee=r(0),ne=r(null),ae=["like","heart","thumbs-up"],oe=c(function(){var t;return(null===(t=Ht.value)||void 0===t||null===(t=t.user_reaction)||void 0===t?void 0:t.reaction_type)||null}),re=function(t){return{like:mt,heart:ft,"thumbs-up":dt}[t]||mt},ie=function(t){if(!t)return"Just now";var e=t.replace(/\.\d{6}Z$/,""),n=new Date(e);if(isNaN(n.getTime()))return"Invalid date";var a=n.toLocaleString("en-US",{month:"short"}),o=n.getDate(),r=String(n.getHours()).padStart(2,"0"),i=String(n.getMinutes()).padStart(2,"0");return"".concat(a," ").concat(o,", ").concat(r,":").concat(i)},ue=r(!1),ce=r(!1),le=function(){ue.value=!1},de=function(){ce.value=!1},se=function(t){ce.value=!1;var e=t.target;e.style.opacity="0.5",e.alt="Failed to load image"},pe=function(t){return"https://storage.draugustinaosabutey.com/api/files/".concat(t,"/view")},ve=function(t){return[".png",".jpg",".jpeg",".gif",".webp",".bmp",".svg"].some(function(e){return t.toLowerCase().endsWith(e)})},fe=function(t){ue.value=!1;var e=t.target;e.style.opacity="0.5",e.alt="Failed to load image"},me=function(){var t=l(i().m(function t(e){var n,a,o,r=arguments;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"view",t.p=1,t.n=2,ht.show({text:"view"===n?"Opening file...":"Opening file for download...",position:"top"});case 2:return t.v,a="https://storage.draugustinaosabutey.com/api/files/".concat(e,"/view"),window.open(a,"_blank"),t.n=3,ht.show({text:"File opened successfully",position:"top",duration:"short"});case 3:t.n=5;break;case 4:return t.p=4,o=t.v,console.error("File access error:",o),t.n=5,ht.show({text:"Failed to open file. Please try again.",position:"top",duration:"long"});case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}(),ge=function(){var t=l(i().m(function t(){var e,n,a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,Bt.value=!0,Jt.value=!1,ue.value=!1,t.n=1,g.get("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat($t),{headers:Oe(),timeout:2e4});case 1:if(n=t.v,Ht.value=n.data,console.log("Notification loaded:",n.data),null!==(e=Ht.value)&&void 0!==e&&e.attachment&&ve(Ht.value.attachment)&&(ue.value=!0),0!==n.data.is_read){t.n=2;break}return t.n=2,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat($t,"/read"),{},{headers:Oe(),timeout:1e4});case 2:return t.n=3,he();case 3:t.n=5;break;case 4:t.p=4,a=t.v,console.error("Error loading notification:",a),Se(a),Jt.value=!0;case 5:return t.p=5,Bt.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[0,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),he=function(){var t=l(i().m(function t(){var e,n,a,r=arguments;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,t.p=1,t.n=2,g.get("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat($t,"/comments"),{params:{page:e},headers:Oe(),timeout:1e4});case 2:n=t.v,Wt.value=1===e?n.data.data:[].concat(o(Wt.value),o(n.data.data)),Zt.value=e,qt.value=!!n.data.next_page_url,t.n=4;break;case 3:t.p=3,a=t.v,console.error("Error loading comments:",a);case 4:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),be=function(){var t=l(i().m(function t(e){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,he(Zt.value+1);case 1:e.target.complete();case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),ye=function(){var t=l(i().m(function t(){var e,n,a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(Xt.value.trim()){t.n=1;break}return t.a(2);case 1:return Mt.value=!0,t.p=2,t.n=3,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat($t,"/create_comment"),{comment_body:Xt.value},{headers:Oe(),timeout:1e4});case 3:e=t.v,n={id:e.data.comment.id,comment_body:e.data.comment.comment_body,created_at:e.data.comment.created_at,user_id:e.data.comment.user_id,user_name:e.data.comment.user_name,avatar:e.data.comment.avatar||null,upvotes_count:0,downvotes_count:0,user_vote:null},Wt.value.unshift(n),Xt.value="",Ht.value&&(Ht.value.comments_count+=1),t.n=5;break;case 4:t.p=4,a=t.v,console.error("Error adding comment:",a);case 5:return t.p=5,Mt.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[2,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),xe=function(){var t=l(i().m(function t(e){var n;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return Kt.value=e,t.p=1,t.n=2,g.delete("https://klegg-app-whh7m.ondigitalocean.app/api/comments/".concat(e),{headers:Oe(),timeout:1e4});case 2:Wt.value=Wt.value.filter(function(t){return t.id!==e}),Ht.value&&(Ht.value.comments_count-=1),t.n=4;break;case 3:t.p=3,n=t.v,console.error("Error deleting comment:",n);case 4:return t.p=4,Kt.value=null,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(e){return t.apply(this,arguments)}}(),ke=function(){var t=l(i().m(function t(e){return i().w(function(t){for(;;)switch(t.n){case 0:if(oe.value!==e){t.n=2;break}return t.n=1,je();case 1:t.n=3;break;case 2:return t.n=3,we(e);case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),_e=function(){var t=l(i().m(function t(e,a){var o,r,u,c,l;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!Yt.value){t.n=1;break}return t.a(2);case 1:if(Yt.value=!0,t.p=2,-1!==(o=Wt.value.findIndex(function(t){return t.id===e}))){t.n=3;break}return t.a(2);case 3:return r=Wt.value[o],(u=r.user_vote)===a?(r.user_vote=null,"upvote"===a&&r.upvotes_count--,"downvote"===a&&r.downvotes_count--):("upvote"===u&&r.upvotes_count--,"downvote"===u&&r.downvotes_count--,r.user_vote=a,"upvote"===a&&r.upvotes_count++,"downvote"===a&&r.downvotes_count++),t.n=4,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/comments/".concat(e,"/vote"),{vote_type:a},{headers:Oe(),timeout:1e4});case 4:c=t.v,Wt.value[o]=n(n({},Wt.value[o]),{},{upvotes_count:c.data.upvotes_count,downvotes_count:c.data.downvotes_count,user_vote:c.data.user_vote}),t.n=6;break;case 5:t.p=5,l=t.v,console.error("Error voting on comment:",l),he(Zt.value);case 6:return t.p=6,Yt.value=!1,t.f(6);case 7:return t.a(2)}},t,null,[[2,5,6,7]])}));return function(e,n){return t.apply(this,arguments)}}(),we=function(){var t=l(i().m(function t(e){var n,a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return Vt.value=!0,Qt.value=!1,t.p=1,t.n=2,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat($t,"/reactions"),{reaction_type:e},{headers:Oe(),timeout:1e4});case 2:n=t.v,Ht.value&&(Ht.value.reaction_counts=n.data.reaction_counts,Ht.value.user_reaction={reaction_type:e},te.value=n.data.reaction_id,console.log("Reaction added:",te.value)),t.n=4;break;case 3:t.p=3,a=t.v,console.error("Error adding reaction:",a);case 4:return t.p=4,Vt.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(e){return t.apply(this,arguments)}}(),je=function(){var t=l(i().m(function t(){var e,n;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return Vt.value=!0,t.p=1,t.n=2,g.delete("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat($t,"/delete_reaction"),{headers:Oe(),timeout:1e4});case 2:e=t.v,Ht.value&&(Ht.value.reaction_counts=e.data.reaction_counts,te.value=0,Ht.value.user_reaction=null),t.n=4;break;case 3:t.p=3,n=t.v,console.error("Error removing reaction:",n);case 4:return t.p=4,Vt.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),Oe=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)}},Se=function(t){if(console.error("Error fetching data:",t),g.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return Ut.replace("/"),void ht.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void ht.show({text:"Request timeout. Please try again",position:"top"})}ht.show({text:"Failed to load data. Please try again later",position:"top"})},Ce=function(t){var e=t.matches;b(e)},Pe=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return Ce(t),t.addEventListener("change",Ce),t};return d(function(){Pe(),ge();var t=localStorage.getItem("parisklegg_user");if(t){var e=JSON.parse(t);e&&(Gt.value.name=e.fullname,Gt.value.id=e.user_id,Gt.value.email=e.username,gt=e.user_id)}ee.value=gt?Number(gt):0}),s(l(i().m(function t(){return i().w(function(t){for(;;)switch(t.n){case 0:Pe();case 1:return t.a(2)}},t)}))),function(t,e){var n=k("ion-buttons");return ct(),p(f(m),null,{default:v(function(){return[y(f(O),null,{default:v(function(){return[y(f(x),null,{default:v(function(){return[y(n,{slot:"start"},{default:v(function(){return[y(f(_))]}),_:1}),y(f(w),null,{default:v(function(){return o(e[8]||(e[8]=[j(" Notification ",-1)]))}),_:1})]}),_:1})]}),_:1}),y(f(at),{fullscreen:!0},{default:v(function(){return[Bt.value?(ct(),S("div",bt,[y(f(P),{name:"crescent",color:"primary"})])):Jt.value?(ct(),S("div",yt,[y(f(z),{icon:f(E),color:"danger",size:"large"},null,8,["icon"]),y(f(I),null,{default:v(function(){return o(e[9]||(e[9]=[N("h3",null,"Error Loading Notification",-1),N("p",null,"Please try again later",-1)]))}),_:1}),y(f(A),{fill:"clear",onClick:ge},{default:v(function(){return o(e[10]||(e[10]=[j("Retry",-1)]))}),_:1})])):Ht.value?(ct(),S("div",xt,[y(f(T),{class:"notification-card"},{default:v(function(){return[y(f(D),null,{default:v(function(){return[y(f(L),{class:"notification-title"},{default:v(function(){return[j(F(Ht.value.title),1)]}),_:1}),y(f(G),null,{default:v(function(){return[j(F(ie(Ht.value.created_at)),1)]}),_:1})]}),_:1}),y(f(R),null,{default:v(function(){return[N("p",kt,F(Ht.value.body),1),Ht.value.attachment&&ve(Ht.value.attachment)?(ct(),S("div",_t,[ue.value?(ct(),S("div",wt)):C("",!0),U(N("img",{src:pe(Ht.value.attachment),class:"attachment-image",onLoad:le,onError:fe,onClick:e[0]||(e[0]=function(t){return e=Ht.value.attachment,ne.value=e,void(ce.value=!0);var e})},null,40,jt),[[$,!ue.value]])])):Ht.value.attachment?(ct(),S("div",Ot,[y(f(B),{button:"",onClick:e[2]||(e[2]=function(t){return me(Ht.value.attachment)}),disabled:ue.value},{default:v(function(){return[ue.value?(ct(),S("div",St,[y(f(P),{name:"dots",color:"primary"})])):(ct(),p(f(z),{key:1,icon:f(J),slot:"start",color:"primary"},null,8,["icon"])),y(f(M),null,{default:v(function(){return[N("h3",null,F(Ht.value.attachment),1),e[11]||(e[11]=N("p",null,"File Attachment",-1))]}),_:1}),y(f(A),{fill:"clear",slot:"end",onClick:e[1]||(e[1]=V(function(t){return me(Ht.value.attachment)},["stop"])),disabled:ue.value},{default:v(function(){return[ue.value?(ct(),p(f(P),{key:0,name:"dots"})):(ct(),p(f(z),{key:1,icon:f(Y)},null,8,["icon"]))]}),_:1},8,["disabled"])]}),_:1},8,["disabled"])])):C("",!0),N("div",Ct,[(ct(!0),S(H,null,W(Ht.value.reaction_counts,function(t,e){return ct(),p(f(A),{key:e,fill:"clear",size:"small",onClick:function(t){return ke(e)},color:oe.value===e?"primary":"medium",disabled:Vt.value},{default:v(function(){return[Vt.value&&oe.value===e?(ct(),p(f(P),{key:0,name:"dots",slot:"start"})):(ct(),p(f(z),{key:1,icon:re(e),slot:"start"},null,8,["icon"])),j(" "+F(t),1)]}),_:2},1032,["onClick","color","disabled"])}),128)),y(f(A),{fill:"clear",size:"small",onClick:e[3]||(e[3]=function(t){return Qt.value=!0}),disabled:Vt.value},{default:v(function(){return[y(f(z),{icon:f(Z),slot:"icon-only"},null,8,["icon"])]}),_:1},8,["disabled"])])]}),_:1})]}),_:1}),N("div",Pt,[y(f(q),null,{default:v(function(){return[y(f(X),null,{default:v(function(){return[y(f(M),null,{default:v(function(){return[j("Comments ("+F(Ht.value.comments_count)+")",1)]}),_:1})]}),_:1}),(ct(!0),S(H,null,W(Wt.value,function(t){return ct(),p(f(B),{key:t.id,class:"comment-item"},{default:v(function(){return[y(f(lt),{slot:"start",style:{"margin-left":"20px"}},{default:v(function(){return[N("img",{src:t.avatar||"/assets/img/default-avatar.svg"},null,8,zt)]}),_:2},1024),y(f(M),null,{default:v(function(){return[N("h3",null,F(t.user_name),1),N("p",null,F(t.comment_body),1),N("p",Et,F(ie(t.created_at)),1)]}),_:2},1024),N("div",It,[y(f(A),{fill:"clear",size:"small",onClick:function(e){return _e(t.id,"upvote")},disabled:Yt.value},{default:v(function(){return[y(f(z),{icon:f(dt),color:"upvote"===t.user_vote?"primary":"medium"},null,8,["icon","color"]),N("span",Nt,F(t.upvotes_count),1)]}),_:2},1032,["onClick","disabled"]),y(f(A),{fill:"clear",size:"small",onClick:function(e){return _e(t.id,"downvote")},disabled:Yt.value},{default:v(function(){return[y(f(z),{icon:f(st),color:"downvote"===t.user_vote?"danger":"medium"},null,8,["icon","color"]),N("span",At,F(t.downvotes_count),1)]}),_:2},1032,["onClick","disabled"])]),t.user_id===ee.value?(ct(),p(f(A),{key:0,fill:"clear",color:"danger",onClick:function(e){return xe(t.id)},disabled:Kt.value===t.id},{default:v(function(){return[Kt.value===t.id?(ct(),p(f(P),{key:0,name:"dots",slot:"icon-only"})):(ct(),p(f(z),{key:1,icon:f(pt),slot:"icon-only"},null,8,["icon"]))]}),_:2},1032,["onClick","disabled"])):C("",!0)]}),_:2},1024)}),128)),y(f(K),{onIonInfinite:be,threshold:"100px",disabled:!qt.value},{default:v(function(){return[y(f(Q),{"loading-spinner":"bubbles","loading-text":"Loading more comments..."})]}),_:1},8,["disabled"])]}),_:1})]),N("div",Tt,[y(f(B),null,{default:v(function(){return[y(f(tt),{modelValue:Xt.value,"onUpdate:modelValue":e[4]||(e[4]=function(t){return Xt.value=t}),placeholder:"Add a comment...","auto-grow":""},null,8,["modelValue"]),y(f(A),{slot:"end",fill:"clear",disabled:!Xt.value.trim(),onClick:ye},{default:v(function(){return[Mt.value?(ct(),p(f(P),{key:0,slot:"start",name:"dots"})):C("",!0),y(f(z),{icon:f(et),color:"primary"},null,8,["icon"])]}),_:1},8,["disabled"])]}),_:1})])])):C("",!0),y(f(nt),{"is-open":Qt.value,onDidDismiss:e[5]||(e[5]=function(t){return Qt.value=!1})},{default:v(function(){return[y(f(at),null,{default:v(function(){return[y(f(ot),null,{default:v(function(){return[y(f(rt),null,{default:v(function(){return[(ct(),S(H,null,W(ae,function(t){return y(f(vt),{key:t,size:"auto",onClick:function(e){return we(t)}},{default:v(function(){return[y(f(A),{fill:"clear"},{default:v(function(){return[y(f(z),{icon:re(t),size:"large"},null,8,["icon"])]}),_:2},1024)]}),_:2},1032,["onClick"])}),64))]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["is-open"]),y(f(it),{"is-open":!!ne.value,onDidDismiss:e[7]||(e[7]=function(t){return ne.value=null}),class:"image-modal"},{default:v(function(){return[y(f(at),null,{default:v(function(){return[ne.value?(ct(),S("div",Dt,[ce.value?(ct(),S("div",Lt,[y(f(P),{name:"crescent",color:"light"}),e[12]||(e[12]=N("p",null,"Loading image...",-1))])):C("",!0),U(N("img",{src:pe(ne.value),alt:ne.value,class:"modal-image",onLoad:de,onError:se},null,40,Ft),[[$,!ce.value]]),y(f(A),{fill:"clear",color:"light",class:"close-btn",onClick:e[6]||(e[6]=function(t){return ne.value=null})},{default:v(function(){return[y(f(z),{icon:f(ut)},null,8,["icon"])]}),_:1})])):C("",!0)]}),_:1})]}),_:1},8,["is-open"])]}),_:1})]}),_:1})}}});t("default",gt(Gt,[["__scopeId","data-v-a6d15329"]]))}}})}();
