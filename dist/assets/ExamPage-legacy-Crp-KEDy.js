System.register(["./index-legacy-LZepmReL.js","./index-legacy-DduMCVS-.js"],function(e,a){"use strict";var t,l,o,r,i,s,n,d,u,c,m,v,p,f,_,g,b,x,y,h,w,k,z,E,S,j,C,P,R,N,A,D,I,O,T,B,L,M,q,F;return{setters:[e=>{t=e.d,l=e.ao,o=e.r,r=e.c,i=e.S,s=e.a,n=e.o,d=e.b,u=e.w,c=e.u,m=e.I,v=e.e,p=e.f,f=e.g,_=e.h,g=e.i,b=e.P,x=e.l,y=e.A,h=e.q,w=e.s,k=e.x,z=e.y,E=e.z,S=e.n,j=e.aM,C=e.C,P=e.k,R=e.a3,N=e.t,A=e.X,D=e.v,I=e.aw,O=e.a2,T=e.m,B=e.a9,L=e.M,M=e.N,q=e._},e=>{F=e.T}],execute:function(){var a=document.createElement("style");a.textContent=".summary-card[data-v-7b848005]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}.summary-title[data-v-7b848005]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:600}.summary-title ion-icon[data-v-7b848005]{font-size:24px}.summary-content[data-v-7b848005]{display:flex;justify-content:space-between;padding:16px}.summary-item[data-v-7b848005]{display:flex;flex-direction:column;align-items:center;flex:1}.divider[data-v-7b848005]{width:1px;background-color:var(--ion-color-light);margin:0 8px}.summary-label[data-v-7b848005]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:4px}.summary-value[data-v-7b848005]{font-size:1.2rem;font-weight:600}.excellent[data-v-7b848005]{color:var(--ion-color-success)}.good[data-v-7b848005]{color:var(--ion-color-primary)}.average[data-v-7b848005]{color:var(--ion-color-warning)}.poor[data-v-7b848005]{color:var(--ion-color-danger)}.loading-container[data-v-7b848005]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-7b848005],.error-state[data-v-7b848005]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-7b848005],.error-state ion-icon[data-v-7b848005]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-7b848005],.error-state h3[data-v-7b848005]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-7b848005],.error-state p[data-v-7b848005]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.details-card[data-v-7b848005]{margin:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.detail-row[data-v-7b848005]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--ion-color-light)}.detail-row[data-v-7b848005]:last-child{border-bottom:none}.detail-label[data-v-7b848005]{font-size:.9rem;color:var(--ion-color-medium)}.detail-value[data-v-7b848005]{font-size:.9rem;font-weight:500}.feedback-section[data-v-7b848005]{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-light)}.feedback-title[data-v-7b848005]{display:block;font-size:.9rem;font-weight:500;color:var(--ion-color-primary);margin-bottom:8px}.feedback-content[data-v-7b848005]{font-size:.9rem;color:var(--ion-color-medium);line-height:1.5}@media (min-width: 768px){.summary-card[data-v-7b848005],.details-card[data-v-7b848005]{margin:16px auto;max-width:800px}}\n",document.head.appendChild(a);const Y={class:"summary-item"},J={class:"summary-item"},V={key:0,class:"loading-container"},W={key:1,class:"empty-state"},X={key:2,class:"error-state"},$={class:"detail-row"},G={class:"detail-row"},H={key:0,class:"detail-row"},K={key:1,class:"feedback-section"};e("default",q(t({__name:"ExamPage",setup(e){const a=localStorage.getItem("parisklegg_token")||"",t=localStorage.getItem("parisklegg_user"),q=t?JSON.parse(t):null,Q=(null==q?void 0:q.user_id)||0,U=p(),Z=l(),ee=Number(Z.params.id),ae=o(!0),te=o(!1),le=o({student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0}),oe=r(()=>null!==le.value),re=r(()=>{var e;return(null===(e=le.value)||void 0===e?void 0:e.tutorship_name)||"Exam"}),ie=r(()=>le.value?se(le.value.score_numerator,le.value.score_denominator):0),se=(e,a)=>0===a?0:Math.round(e/a*100),ne=e=>e>=85?"excellent":e>=70?"good":e>=50?"average":"poor",de=async()=>{try{ae.value=!0,te.value=!1,le.value={student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0};const e=await v.post("https://school.klgilc.com/api/exams",{tutorship_id:ee,student_id:Q},{headers:ue(),timeout:2e4});e.data.length>0&&(le.value=e.data[0])}catch(e){console.error("Error fetching exam results:",e),ce(e),te.value=!0}finally{ae.value=!1}},ue=()=>({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a}`}),ce=e=>{if(console.error("Error fetching data:",e),v.isAxiosError(e)){var a;if(401===(null===(a=e.response)||void 0===a?void 0:a.status))return U.replace("/"),void F.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===e.code)return void F.show({text:"Request timeout. Please try again",position:"top"})}F.show({text:"Failed to load data. Please try again later",position:"top"})};return i.setOverlaysWebView({overlay:!1}),i.setBackgroundColor({color:"#ffffff"}),i.setStyle({style:s.Light}),n(()=>{de()}),(e,a)=>(M(),d(c(m),null,{default:u(()=>[f(c(h),null,{default:u(()=>[f(c(_),null,{default:u(()=>[f(c(g),{slot:"start"},{default:u(()=>[f(c(b),{"default-href":"/"})]),_:1}),f(c(x),null,{default:u(()=>a[0]||(a[0]=[y("Exam Results",-1)])),_:1,__:[0]})]),_:1})]),_:1}),f(c(L),{fullscreen:!0},{default:u(()=>[f(c(k),{class:"summary-card"},{default:u(()=>[f(c(z),null,{default:u(()=>[f(c(E),{class:"summary-title"},{default:u(()=>[f(c(S),{icon:c(j),color:"primary"},null,8,["icon"]),a[1]||(a[1]=y(" Exam Overview ",-1))]),_:1,__:[1]})]),_:1}),f(c(C),{class:"summary-content"},{default:u(()=>[P("div",Y,[f(c(R),{class:"summary-label"},{default:u(()=>a[2]||(a[2]=[y("Exam",-1)])),_:1,__:[2]}),f(c(R),{class:"summary-value"},{default:u(()=>[y(N(re.value),1)]),_:1})]),a[4]||(a[4]=P("div",{class:"divider"},null,-1)),P("div",J,[f(c(R),{class:"summary-label"},{default:u(()=>a[3]||(a[3]=[y("Your Score",-1)])),_:1,__:[3]}),f(c(R),{class:A(["summary-value",ne(ie.value)])},{default:u(()=>[y(N(ie.value)+"% ",1)]),_:1},8,["class"])])]),_:1,__:[4]})]),_:1}),ae.value?(M(),w("div",V,[f(c(D),{name:"crescent",color:"primary"})])):oe.value||te.value?te.value?(M(),w("div",X,[f(c(S),{icon:c(O),size:"large",color:"danger"},null,8,["icon"]),f(c(R),null,{default:u(()=>a[6]||(a[6]=[P("h3",null,"Error Loading Results",-1),P("p",null,"Please try again later",-1)])),_:1,__:[6]}),f(c(T),{fill:"clear",onClick:de},{default:u(()=>a[7]||(a[7]=[y("Retry",-1)])),_:1,__:[7]})])):(M(),d(c(k),{key:3,class:"details-card"},{default:u(()=>[f(c(z),null,{default:u(()=>[f(c(E),null,{default:u(()=>a[8]||(a[8]=[y("Detailed Results",-1)])),_:1,__:[8]})]),_:1}),f(c(C),null,{default:u(()=>[P("div",$,[f(c(R),{class:"detail-label"},{default:u(()=>a[9]||(a[9]=[y("Score",-1)])),_:1,__:[9]}),f(c(R),{class:"detail-value"},{default:u(()=>[y(N(le.value.score_numerator)+"/"+N(le.value.score_denominator),1)]),_:1})]),P("div",G,[f(c(R),{class:"detail-label"},{default:u(()=>a[10]||(a[10]=[y("Percentage",-1)])),_:1,__:[10]}),f(c(R),{class:A(["detail-value",ne(ie.value)])},{default:u(()=>[y(N(ie.value)+"% ",1)]),_:1},8,["class"])]),le.value.created_at?(M(),w("div",H,[f(c(R),{class:"detail-label"},{default:u(()=>a[11]||(a[11]=[y("Date Taken",-1)])),_:1,__:[11]}),f(c(R),{class:"detail-value"},{default:u(()=>{return[y(N((e=le.value.created_at,new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}))),1)];var e}),_:1})])):B("",!0),le.value.comments?(M(),w("div",K,[f(c(R),{class:"feedback-title"},{default:u(()=>a[12]||(a[12]=[y("Instructor Feedback",-1)])),_:1,__:[12]}),f(c(R),{class:"feedback-content"},{default:u(()=>[y(N(le.value.comments),1)]),_:1})])):B("",!0)]),_:1})]),_:1})):(M(),w("div",W,[f(c(S),{icon:c(I),size:"large",color:"medium"},null,8,["icon"]),f(c(R),null,{default:u(()=>a[5]||(a[5]=[P("h3",null,"No Exam Results",-1),P("p",null,"Your exam results will appear here once available",-1)])),_:1,__:[5]})]))]),_:1})]),_:1}))}}),[["__scopeId","data-v-7b848005"]]))}}});
