!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,a,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function c(t,n,o,i){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return e(s,"_invoke",function(t,e,n){var o,i,c,u=0,s=n||[],d=!1,f={p:0,n:0,v:r,a:v,f:v.bind(r,4),d:function(t,e){return o=t,i=0,c=r,f.n=e,l}};function v(t,e){for(i=t,c=e,a=0;!d&&u&&!n&&a<s.length;a++){var n,o=s[a],v=f.p,m=o[2];t>3?(n=m===e)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=r):o[0]<=v&&((n=t<2&&v<o[1])?(i=0,f.v=e,f.n=o[1]):v<m&&(n=t<3||o[0]>e||e>m)&&(o[4]=t,o[5]=e,f.n=m,i=0))}if(n||t>1)return l;throw d=!0,e}return function(n,s,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&v(s,m),i=s,c=m;(a=i<2?r:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),v(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(n="next"),a=o[n]){if(!(a=a.call(o,c)))throw TypeError("iterator result is not an object");if(!a.done)return a;c=a.value,i<2&&(i=0)}else 1===i&&(a=o.return)&&a.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=r}else if((a=(d=f.n<0)?c:t.call(e,f))!==l)break}catch(a){o=r,i=1,c=a}finally{u=1}}return{value:a,done:d}}}(t,o,i),!0),s}var l={};function u(){}function s(){}function d(){}a=Object.getPrototypeOf;var f=[][o]?a(a([][o]())):(e(a={},o,function(){return this}),a),v=d.prototype=u.prototype=Object.create(f);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,e(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t}return s.prototype=d,e(v,"constructor",d),e(d,"constructor",s),s.displayName="GeneratorFunction",e(d,i,"GeneratorFunction"),e(v),e(v,i,"Generator"),e(v,o,function(){return this}),e(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:m}})()}function e(t,r,a,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}e=function(t,r,a,n){function i(r,a){e(t,r,function(t){return this._invoke(r,a,t)})}r?o?o(t,r,{value:a,enumerable:!n,configurable:!n,writable:!n}):t[r]=a:(i("next",0),i("throw",1),i("return",2))},e(t,r,a,n)}function r(t,e,r,a,n,o,i){try{var c=t[o](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(a,n)}System.register(["./index-legacy-DZ_oEP4m.js","./index-legacy-D37Tvi_R.js"],function(e,a){"use strict";var n,o,i,c,l,u,s,d,f,v,m,p,g,_,y,h,x,b,w,k,j,z,E,O,S,P,T,C,N,R,G,A,D,F,I,B,L,q,M,Y;return{setters:[function(t){n=t.d,o=t.ar,i=t.r,c=t.c,l=t.S,u=t.a,s=t.o,d=t.b,f=t.w,v=t.u,m=t.I,p=t.e,g=t.f,_=t.g,y=t.h,h=t.i,x=t.P,b=t.l,w=t.A,k=t.q,j=t.s,z=t.x,E=t.y,O=t.z,S=t.n,P=t.aP,T=t.C,C=t.k,N=t.a3,R=t.t,G=t.X,A=t.v,D=t.az,F=t.a2,I=t.m,B=t.a9,L=t.M,q=t.N,M=t._},function(t){Y=t.T}],execute:function(){var a=document.createElement("style");a.textContent=".summary-card[data-v-90c9fc80]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}.summary-title[data-v-90c9fc80]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:600;color:var(--ion-text-color);white-space:pre-line}.summary-title ion-icon[data-v-90c9fc80]{font-size:24px}.summary-content[data-v-90c9fc80]{display:flex;justify-content:space-between;padding:16px}.summary-item[data-v-90c9fc80]{display:flex;flex-direction:column;align-items:center;flex:1}.divider[data-v-90c9fc80]{width:1px;background-color:var(--ion-color-light);margin:0 8px}.summary-label[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:4px}.summary-value[data-v-90c9fc80]{font-size:1.2rem;font-weight:600}.excellent[data-v-90c9fc80]{color:var(--ion-color-success)}.good[data-v-90c9fc80]{color:var(--ion-color-primary)}.average[data-v-90c9fc80]{color:var(--ion-color-warning)}.poor[data-v-90c9fc80]{color:var(--ion-color-danger)}.loading-container[data-v-90c9fc80]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-90c9fc80],.error-state[data-v-90c9fc80]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-90c9fc80],.error-state ion-icon[data-v-90c9fc80]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-90c9fc80],.error-state h3[data-v-90c9fc80]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-90c9fc80],.error-state p[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.details-card[data-v-90c9fc80]{margin:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.details-card ion-card-title[data-v-90c9fc80]{font-size:1.1rem;font-weight:600;color:var(--ion-text-color)}.detail-row[data-v-90c9fc80]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--ion-color-light)}.detail-row[data-v-90c9fc80]:last-child{border-bottom:none}.detail-label[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium)}.detail-value[data-v-90c9fc80]{font-size:.9rem;font-weight:500}.feedback-section[data-v-90c9fc80]{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-light)}.feedback-title[data-v-90c9fc80]{display:block;font-size:.9rem;font-weight:500;color:var(--ion-color-primary);margin-bottom:8px}.feedback-content[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium);line-height:1.5}@media (min-width: 768px){.summary-card[data-v-90c9fc80],.details-card[data-v-90c9fc80]{margin:16px auto;max-width:800px}}\n",document.head.appendChild(a);var J={class:"summary-item"},V={class:"summary-item"},W={key:0,class:"loading-container"},X={key:1,class:"empty-state"},H={key:2,class:"error-state"},K={class:"detail-row"},Q={class:"detail-row"},U={key:0,class:"detail-row"},Z={key:1,class:"feedback-section"},$=n({__name:"ExamPage",setup:function(e){var a=localStorage.getItem("parisklegg_token")||"",n=localStorage.getItem("parisklegg_user"),M=n?JSON.parse(n):null,$=(null==M?void 0:M.user_id)||0,tt=g(),et=o(),rt=Number(et.params.id),at=i(!0),nt=i(!1),ot=i({student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0}),it=c(function(){return null!==ot.value}),ct=c(function(){var t;return(null===(t=ot.value)||void 0===t?void 0:t.tutorship_name)||"Exam"}),lt=c(function(){return ot.value?ut(ot.value.score_numerator,ot.value.score_denominator):0}),ut=function(t,e){return 0===e?0:Math.round(t/e*100)},st=function(t){return t>=85?"excellent":t>=70?"good":t>=50?"average":"poor"},dt=function(){var e,a=(e=t().m(function e(){var r,a;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,at.value=!0,nt.value=!1,ot.value={student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0},t.n=1,p.post("https://klegg-app-whh7m.ondigitalocean.app/api/exams",{tutorship_id:rt,student_id:$},{headers:ft(),timeout:2e4});case 1:(r=t.v).data.length>0&&(ot.value=r.data[0]),t.n=3;break;case 2:t.p=2,a=t.v,console.error("Error fetching exam results:",a),vt(a),nt.value=!0;case 3:return t.p=3,at.value=!1,t.f(3);case 4:return t.a(2)}},e,null,[[0,2,3,4]])}),function(){var t=this,a=arguments;return new Promise(function(n,o){var i=e.apply(t,a);function c(t){r(i,n,o,c,l,"next",t)}function l(t){r(i,n,o,c,l,"throw",t)}c(void 0)})});return function(){return a.apply(this,arguments)}}(),ft=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},vt=function(t){if(console.error("Error fetching data:",t),p.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return tt.replace("/"),void Y.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void Y.show({text:"Request timeout. Please try again",position:"top"})}Y.show({text:"Failed to load data. Please try again later",position:"top"})};return l.setOverlaysWebView({overlay:!1}),l.setBackgroundColor({color:"#ffffff"}),l.setStyle({style:u.Light}),s(function(){dt()}),function(t,e){return q(),d(v(m),null,{default:f(function(){return[_(v(k),null,{default:f(function(){return[_(v(y),null,{default:f(function(){return[_(v(h),{slot:"start"},{default:f(function(){return[_(v(x),{"default-href":"/"})]}),_:1}),_(v(b),null,{default:f(function(){return e[0]||(e[0]=[w("Exam Results",-1)])}),_:1,__:[0]})]}),_:1})]}),_:1}),_(v(L),{fullscreen:!0},{default:f(function(){return[_(v(z),{class:"summary-card"},{default:f(function(){return[_(v(E),null,{default:f(function(){return[_(v(O),{class:"summary-title"},{default:f(function(){return[_(v(S),{icon:v(P),color:"primary"},null,8,["icon"]),e[1]||(e[1]=w(" Exam Overview ",-1))]}),_:1,__:[1]})]}),_:1}),_(v(T),{class:"summary-content"},{default:f(function(){return[C("div",J,[_(v(N),{class:"summary-label"},{default:f(function(){return e[2]||(e[2]=[w("Exam",-1)])}),_:1,__:[2]}),_(v(N),{class:"summary-value"},{default:f(function(){return[w(R(ct.value),1)]}),_:1})]),e[4]||(e[4]=C("div",{class:"divider"},null,-1)),C("div",V,[_(v(N),{class:"summary-label"},{default:f(function(){return e[3]||(e[3]=[w("Your Score",-1)])}),_:1,__:[3]}),_(v(N),{class:G(["summary-value",st(lt.value)])},{default:f(function(){return[w(R(lt.value)+"% ",1)]}),_:1},8,["class"])])]}),_:1,__:[4]})]}),_:1}),at.value?(q(),j("div",W,[_(v(A),{name:"crescent",color:"primary"})])):it.value||nt.value?nt.value?(q(),j("div",H,[_(v(S),{icon:v(F),size:"large",color:"danger"},null,8,["icon"]),_(v(N),null,{default:f(function(){return e[6]||(e[6]=[C("h3",null,"Error Loading Results",-1),C("p",null,"Please try again later",-1)])}),_:1,__:[6]}),_(v(I),{fill:"clear",onClick:dt},{default:f(function(){return e[7]||(e[7]=[w("Retry",-1)])}),_:1,__:[7]})])):(q(),d(v(z),{key:3,class:"details-card"},{default:f(function(){return[_(v(E),null,{default:f(function(){return[_(v(O),null,{default:f(function(){return e[8]||(e[8]=[w("Detailed Results",-1)])}),_:1,__:[8]})]}),_:1}),_(v(T),null,{default:f(function(){return[C("div",K,[_(v(N),{class:"detail-label"},{default:f(function(){return e[9]||(e[9]=[w("Score",-1)])}),_:1,__:[9]}),_(v(N),{class:"detail-value"},{default:f(function(){return[w(R(ot.value.score_numerator)+"/"+R(ot.value.score_denominator),1)]}),_:1})]),C("div",Q,[_(v(N),{class:"detail-label"},{default:f(function(){return e[10]||(e[10]=[w("Percentage",-1)])}),_:1,__:[10]}),_(v(N),{class:G(["detail-value",st(lt.value)])},{default:f(function(){return[w(R(lt.value)+"% ",1)]}),_:1},8,["class"])]),ot.value.created_at?(q(),j("div",U,[_(v(N),{class:"detail-label"},{default:f(function(){return e[11]||(e[11]=[w("Date Taken",-1)])}),_:1,__:[11]}),_(v(N),{class:"detail-value"},{default:f(function(){return[w(R((t=ot.value.created_at,new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}))),1)];var t}),_:1})])):B("",!0),ot.value.comments?(q(),j("div",Z,[_(v(N),{class:"feedback-title"},{default:f(function(){return e[12]||(e[12]=[w("Instructor Feedback",-1)])}),_:1,__:[12]}),_(v(N),{class:"feedback-content"},{default:f(function(){return[w(R(ot.value.comments),1)]}),_:1})])):B("",!0)]}),_:1})]}),_:1})):(q(),j("div",X,[_(v(S),{icon:v(D),size:"large",color:"medium"},null,8,["icon"]),_(v(N),null,{default:f(function(){return e[5]||(e[5]=[C("h3",null,"No Exam Results",-1),C("p",null,"Your exam results will appear here once available",-1)])}),_:1,__:[5]})]))]}),_:1})]}),_:1})}}});e("default",M($,[["__scopeId","data-v-90c9fc80"]]))}}})}();
