!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,a,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function i(t,r,o,c){var i=r&&r.prototype instanceof l?r:l,s=Object.create(i.prototype);return e(s,"_invoke",function(t,e,r){var o,c,i,l=0,s=r||[],d=!1,f={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(t,e){return o=t,c=0,i=n,f.n=e,u}};function m(t,e){for(c=t,i=e,a=0;!d&&l&&!r&&a<s.length;a++){var r,o=s[a],m=f.p,p=o[2];t>3?(r=p===e)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=m&&((r=t<2&&m<o[1])?(c=0,f.v=e,f.n=o[1]):m<p&&(r=t<3||o[0]>e||e>p)&&(o[4]=t,o[5]=e,f.n=p,c=0))}if(r||t>1)return u;throw d=!0,e}return function(r,s,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,p),c=s,i=p;(a=c<2?n:i)||!d;){o||(c?c<3?(c>1&&(f.n=-1),m(c,i)):f.n=i:f.v=i);try{if(l=2,o){if(c||(r="next"),a=o[r]){if(!(a=a.call(o,i)))throw TypeError("iterator result is not an object");if(!a.done)return a;i=a.value,c<2&&(c=0)}else 1===c&&(a=o.return)&&a.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=n}else if((a=(d=f.n<0)?i:t.call(e,f))!==u)break}catch(a){o=n,c=1,i=a}finally{l=1}}return{value:a,done:d}}}(t,o,c),!0),s}var u={};function l(){}function s(){}function d(){}a=Object.getPrototypeOf;var f=[][o]?a(a([][o]())):(e(a={},o,function(){return this}),a),m=d.prototype=l.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,e(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=d,e(m,"constructor",d),e(d,"constructor",s),s.displayName="GeneratorFunction",e(d,c,"GeneratorFunction"),e(m),e(m,c,"Generator"),e(m,o,function(){return this}),e(m,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:p}})()}function e(t,n,a,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}e=function(t,n,a,r){function c(n,a){e(t,n,function(t){return this._invoke(n,a,t)})}n?o?o(t,n,{value:a,enumerable:!r,configurable:!r,writable:!r}):t[n]=a:(c("next",0),c("throw",1),c("return",2))},e(t,n,a,r)}function n(t,e,n,a,r,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,r)}System.register(["./index-legacy-DZ_oEP4m.js","./index-legacy-D37Tvi_R.js"],function(e,a){"use strict";var r,o,c,i,u,l,s,d,f,m,p,v,g,b,y,h,_,x,w,k,C,j,z,O,S,P,A,T,E,L,F,G,N,D,R,B,I,q,J,M,U,K,V,W,Y,$,H,Q,X,Z,tt,et,nt,at,rt,ot;return{setters:[function(t){r=t.d,o=t.ar,c=t.r,i=t.S,u=t.a,l=t.o,s=t.b,d=t.w,f=t.u,m=t.I,p=t.e,v=t.f,g=t.g,b=t.h,y=t.i,h=t.P,_=t.l,x=t.A,w=t.q,k=t.k,C=t.s,j=t.a9,z=t.a3,O=t.t,S=t.x,P=t.C,A=t.n,T=t.at,E=t.au,L=t.v,F=t.J,G=t.a2,N=t.m,D=t.a4,R=t.T,B=t.U,I=t.M,q=t.N,J=t.av,M=t.a7,U=t.$,K=t.K,V=t.aw,W=t.ax,Y=t.ay,$=t.az,H=t.aA,Q=t.aB,X=t.aC,Z=t.aD,tt=t.aE,et=t.aF,nt=t.aG,at=t.F,rt=t._},function(t){ot=t.T}],execute:function(){var a=document.createElement("style");a.textContent=".header-section[data-v-375c2bc6]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);color:#fff;padding-bottom:16px}.header-section .title[data-v-375c2bc6]{display:block;font-size:1.5rem;font-weight:600;color:#fff;margin-bottom:16px}.summary-cards[data-v-375c2bc6]{display:flex;gap:16px;margin-top:8px}.summary-card[data-v-375c2bc6]{flex:1;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1);margin:0}.summary-card.present[data-v-375c2bc6]{--background: rgba(var(--ion-color-success-rgb), .1)}.summary-card.absent[data-v-375c2bc6]{--background: rgba(var(--ion-color-danger-rgb), .1)}.summary-content[data-v-375c2bc6]{display:flex;align-items:center;gap:12px}.summary-icon[data-v-375c2bc6]{font-size:32px}.summary-card.present .summary-icon[data-v-375c2bc6]{color:var(--ion-color-success)}.summary-card.absent .summary-icon[data-v-375c2bc6]{color:var(--ion-color-danger)}.summary-count[data-v-375c2bc6]{font-size:1.5rem;font-weight:700;display:block;line-height:1.2;color:var(--ion-color-light)}.summary-label[data-v-375c2bc6]{font-size:.875rem;opacity:.8;display:block;color:var(--ion-color-light)}.bal-text-color[data-v-375c2bc6]{color:var(--ion-text-color);white-space:pre-line}.loading-container[data-v-375c2bc6]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-375c2bc6],.error-state[data-v-375c2bc6]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-375c2bc6],.error-state ion-icon[data-v-375c2bc6]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-375c2bc6],.error-state h3[data-v-375c2bc6]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-375c2bc6],.error-state p[data-v-375c2bc6]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.status-indicator[data-v-375c2bc6]{width:4px;height:100%;border-radius:4px;position:absolute;left:0}.attendance-item[data-v-375c2bc6]{--padding-start: 12px;--inner-padding-end: 12px;--background: var(--ion-item-background, var(--ion-background-color, #fff));margin-bottom:8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.attendance-content[data-v-375c2bc6]{margin-left:12px}.attendance-header[data-v-375c2bc6]{display:flex;justify-content:space-between;margin-bottom:8px}.attendance-status[data-v-375c2bc6]{font-weight:600;font-size:.9rem}.attendance-date[data-v-375c2bc6]{font-size:.8rem;color:var(--ion-color-medium)}.attendance-details[data-v-375c2bc6]{font-size:.875rem;color:var(--ion-color-medium)}.detail-row[data-v-375c2bc6]{display:flex;align-items:center;margin-bottom:4px}.detail-row ion-icon[data-v-375c2bc6]{margin-right:8px;font-size:16px;min-width:20px}.attendance-icon[data-v-375c2bc6]{font-size:24px}@media (min-width: 768px){.summary-cards[data-v-375c2bc6]{gap:24px}.attendance-item[data-v-375c2bc6]{margin:0 auto 12px;max-width:800px}}\n",document.head.appendChild(a);var ct={class:"header-section ion-padding"},it={class:"summary-cards"},ut={class:"summary-content"},lt={class:"summary-content"},st={key:0,class:"loading-container"},dt={key:1,class:"empty-state"},ft={key:2,class:"error-state"},mt={key:3},pt={class:"attendance-header"},vt={class:"attendance-details"},gt={class:"detail-row"},bt={class:"detail-row"},yt={key:0,class:"detail-row"},ht={key:1,class:"detail-row"},_t={slot:"end",class:"attendance-icon"},xt=r({__name:"AttendancePage",setup:function(e){var a=localStorage.getItem("parisklegg_token")||"",r=localStorage.getItem("parisklegg_user"),rt=r?JSON.parse(r):null,xt=(null==rt?void 0:rt.user_id)||0,wt=o(),kt=v(),Ct=Number(wt.params.id),jt=c(""),zt=c(!0),Ot=c(!1),St=c(!1),Pt=c([]),At=c(0),Tt=c(0),Et=function(t){switch(null==t?void 0:t.toLowerCase()){case"present":return"var(--ion-color-success)";case"absent":return"var(--ion-color-danger)";case"late":return"var(--ion-color-warning)";case"sick":return"var(--ion-color-primary)";default:return"var(--ion-color-medium)"}},Lt=function(t){switch(null==t?void 0:t.toLowerCase()){case"present":return at;case"absent":return nt;case"late":return et;case"sick":return tt;default:return Z}},Ft=function(t){switch(null==t?void 0:t.toLowerCase()){case"present":return"success";case"absent":return"danger";case"late":return"warning";case"sick":return"primary";default:return"medium"}},Gt=function(){var e,a=(e=t().m(function e(){var n,a,r;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,zt.value=!0,Ot.value=!1,Pt.value=[],At.value=0,Tt.value=0,t.n=1,p.get("https://klegg-app-whh7m.ondigitalocean.app/api/attendances",{headers:Nt(),timeout:2e4});case 1:n=t.v,a=n.data.filter(function(t){return t.tutorship_id===Ct&&t.user_id===xt}),console.log("Filtered user attendance records:",a),a.length>0&&(St.value=!0,jt.value=a[0].tutorship_name||"My Attendance",a.forEach(function(t){"present"===t.student_attendance.toLowerCase()?At.value++:"absent"===t.student_attendance.toLowerCase()&&Tt.value++}),Pt.value=a.sort(function(t,e){return new Date(e.attendance_date||e.created_at).getTime()-new Date(t.attendance_date||t.created_at).getTime()})),t.n=3;break;case 2:t.p=2,r=t.v,Dt(r),Ot.value=!0;case 3:return t.p=3,zt.value=!1,t.f(3);case 4:return t.a(2)}},e,null,[[0,2,3,4]])}),function(){var t=this,a=arguments;return new Promise(function(r,o){var c=e.apply(t,a);function i(t){n(c,r,o,i,u,"next",t)}function u(t){n(c,r,o,i,u,"throw",t)}i(void 0)})});return function(){return a.apply(this,arguments)}}(),Nt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},Dt=function(t){if(console.error("Error fetching data:",t),p.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return kt.replace("/"),void ot.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void ot.show({text:"Request timeout. Please try again",position:"top"})}ot.show({text:"Failed to load data. Please try again later",position:"top"})};return i.setOverlaysWebView({overlay:!1}),i.setBackgroundColor({color:"#ffffff"}),i.setStyle({style:u.Light}),l(function(){Gt()}),function(t,e){return q(),s(f(m),null,{default:d(function(){return[g(f(w),null,{default:d(function(){return[g(f(b),null,{default:d(function(){return[g(f(y),{slot:"start"},{default:d(function(){return[g(f(h),{"default-href":"/"})]}),_:1}),g(f(_),null,{default:d(function(){return e[0]||(e[0]=[x("Attendance",-1)])}),_:1,__:[0]})]}),_:1})]}),_:1}),g(f(I),{fullscreen:!0},{default:d(function(){return[k("div",ct,[jt.value?(q(),s(f(z),{key:0,class:"title"},{default:d(function(){return[x(O(jt.value),1)]}),_:1})):j("",!0),k("div",it,[g(f(S),{class:"summary-card present"},{default:d(function(){return[g(f(P),null,{default:d(function(){return[k("div",ut,[g(f(A),{icon:f(T),class:"summary-icon"},null,8,["icon"]),k("div",null,[g(f(z),{class:"summary-count"},{default:d(function(){return[x(O(At.value),1)]}),_:1}),g(f(z),{class:"summary-label"},{default:d(function(){return e[1]||(e[1]=[x("Present",-1)])}),_:1,__:[1]})])])]}),_:1})]}),_:1}),g(f(S),{class:"summary-card absent"},{default:d(function(){return[g(f(P),null,{default:d(function(){return[k("div",lt,[g(f(A),{icon:f(E),class:"summary-icon"},null,8,["icon"]),k("div",null,[g(f(z),{class:"summary-count"},{default:d(function(){return[x(O(Tt.value),1)]}),_:1}),g(f(z),{class:"summary-label"},{default:d(function(){return e[2]||(e[2]=[x("Absent",-1)])}),_:1,__:[2]})])])]}),_:1})]}),_:1})])]),zt.value?(q(),C("div",st,[g(f(L),{name:"crescent",color:"primary"})])):St.value||Ot.value?Ot.value?(q(),C("div",ft,[g(f(A),{icon:f(G),color:"danger"},null,8,["icon"]),g(f(z),null,{default:d(function(){return e[4]||(e[4]=[k("h3",null,"Error Loading Attendance",-1),k("p",null,"Please try again later",-1)])}),_:1,__:[4]}),g(f(N),{fill:"clear",onClick:Gt},{default:d(function(){return e[5]||(e[5]=[x("Retry",-1)])}),_:1,__:[5]})])):(q(),C("div",mt,[g(f(D),{lines:"none"},{default:d(function(){return[(q(!0),C(R,null,B(Pt.value,function(t,e){return q(),s(f(J),{key:e},{default:d(function(){return[g(f(M),{class:"attendance-item",detail:!1},{default:d(function(){return[k("div",{slot:"start",class:"status-indicator",style:U({backgroundColor:Et(t.student_attendance)})},null,4),g(f(K),{class:"attendance-content"},{default:d(function(){return[k("div",pt,[g(f(z),{class:"attendance-status",style:U({color:Et(t.student_attendance)})},{default:d(function(){return[x(O(t.student_attendance),1)]}),_:2},1032,["style"]),g(f(z),{class:"attendance-date bal-text-color"},{default:d(function(){return[x(O((e=t.attendance_date||t.created_at,new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))),1)];var e}),_:2},1024)]),k("div",vt,[k("div",gt,[g(f(A),{icon:f(V)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:d(function(){return[x(O(t.student_name),1)]}),_:2},1024)]),k("div",bt,[g(f(A),{icon:f(W)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:d(function(){return[x(O(t.teacher_name),1)]}),_:2},1024)]),t.attendance_code?(q(),C("div",yt,[g(f(A),{icon:f(Y)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:d(function(){return[x("Code: "+O(t.attendance_code),1)]}),_:2},1024)])):j("",!0),t.remark?(q(),C("div",ht,[g(f(A),{icon:f($)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:d(function(){return[x(O(t.remark),1)]}),_:2},1024)])):j("",!0)])]}),_:2},1024),k("div",_t,[g(f(A),{icon:Lt(t.student_attendance),color:Ft(t.student_attendance)},null,8,["icon","color"])])]}),_:2},1024),g(f(H),{side:"end"},{default:d(function(){return[g(f(Q),{color:"danger",onClick:function(e){return function(t){console.log("Reporting issue for record:",t)}(t)}},{default:d(function(){return[g(f(A),{slot:"icon-only",icon:f(X)},null,8,["icon"])]}),_:2},1032,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])):(q(),C("div",dt,[g(f(A),{icon:f(F),color:"medium"},null,8,["icon"]),g(f(z),null,{default:d(function(){return e[3]||(e[3]=[k("h3",null,"No Attendance Records",-1),k("p",null,"Your attendance will appear here when marked by your teacher",-1)])}),_:1,__:[3]})]))]}),_:1})]}),_:1})}}});e("default",rt(xt,[["__scopeId","data-v-375c2bc6"]]))}}})}();
