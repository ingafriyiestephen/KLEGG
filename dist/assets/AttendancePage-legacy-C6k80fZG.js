!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,a,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function i(e,r,o,c){var i=r&&r.prototype instanceof l?r:l,d=Object.create(i.prototype);return t(d,"_invoke",function(e,t,r){var o,c,i,l=0,d=r||[],s=!1,f={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return o=e,c=0,i=n,f.n=t,u}};function m(e,t){for(c=e,i=t,a=0;!s&&l&&!r&&a<d.length;a++){var r,o=d[a],m=f.p,p=o[2];e>3?(r=p===t)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=m&&((r=e<2&&m<o[1])?(c=0,f.v=t,f.n=o[1]):m<p&&(r=e<3||o[0]>t||t>p)&&(o[4]=e,o[5]=t,f.n=p,c=0))}if(r||e>1)return u;throw s=!0,t}return function(r,d,p){if(l>1)throw TypeError("Generator is already running");for(s&&1===d&&m(d,p),c=d,i=p;(a=c<2?n:i)||!s;){o||(c?c<3?(c>1&&(f.n=-1),m(c,i)):f.n=i:f.v=i);try{if(l=2,o){if(c||(r="next"),a=o[r]){if(!(a=a.call(o,i)))throw TypeError("iterator result is not an object");if(!a.done)return a;i=a.value,c<2&&(c=0)}else 1===c&&(a=o.return)&&a.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=n}else if((a=(s=f.n<0)?i:e.call(t,f))!==u)break}catch(a){o=n,c=1,i=a}finally{l=1}}return{value:a,done:s}}}(e,o,c),!0),d}var u={};function l(){}function d(){}function s(){}a=Object.getPrototypeOf;var f=[][o]?a(a([][o]())):(t(a={},o,function(){return this}),a),m=s.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,t(e,c,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=s,t(m,"constructor",s),t(s,"constructor",d),d.displayName="GeneratorFunction",t(s,c,"GeneratorFunction"),t(m),t(m,c,"Generator"),t(m,o,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:p}})()}function t(e,n,a,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}t=function(e,n,a,r){function c(n,a){t(e,n,function(e){return this._invoke(n,a,e)})}n?o?o(e,n,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[n]=a:(c("next",0),c("throw",1),c("return",2))},t(e,n,a,r)}function n(e,t,n,a,r,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(a,r)}System.register(["./index-legacy-UPaEcoFv.js","./index-legacy-ZvApCsva.js"],function(t,a){"use strict";var r,o,c,i,u,l,d,s,f,m,p,v,g,y,h,_,b,x,w,k,C,j,z,O,S,P,A,T,E,L,F,G,N,D,R,B,I,q,J,M,U,K,V,W,Y,$,H,Q,X,Z,ee,te,ne,ae,re,oe;return{setters:[function(e){r=e.d,o=e.ar,c=e.r,i=e.S,u=e.a,l=e.o,d=e.b,s=e.w,f=e.u,m=e.I,p=e.e,v=e.f,g=e.g,y=e.h,h=e.i,_=e.P,b=e.l,x=e.A,w=e.q,k=e.k,C=e.s,j=e.a9,z=e.a3,O=e.t,S=e.x,P=e.C,A=e.n,T=e.at,E=e.au,L=e.v,F=e.J,G=e.a2,N=e.m,D=e.a4,R=e.T,B=e.U,I=e.M,q=e.N,J=e.av,M=e.a7,U=e.$,K=e.K,V=e.aw,W=e.ax,Y=e.ay,$=e.az,H=e.aA,Q=e.aB,X=e.aC,Z=e.aD,ee=e.aE,te=e.aF,ne=e.aG,ae=e.F,re=e._},function(e){oe=e.T}],execute:function(){var a=document.createElement("style");a.textContent=".header-section[data-v-3ae54d6c]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);color:#fff;padding-bottom:16px}.header-section .title[data-v-3ae54d6c]{display:block;font-size:1.5rem;font-weight:600;color:#fff;margin-bottom:16px}.summary-cards[data-v-3ae54d6c]{display:flex;gap:16px;margin-top:8px}.summary-card[data-v-3ae54d6c]{flex:1;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1);margin:0}.summary-card.present[data-v-3ae54d6c]{--background: rgba(var(--ion-color-success-rgb), .1)}.summary-card.absent[data-v-3ae54d6c]{--background: rgba(var(--ion-color-danger-rgb), .1)}.summary-content[data-v-3ae54d6c]{display:flex;align-items:center;gap:12px}.summary-icon[data-v-3ae54d6c]{font-size:32px}.summary-card.present .summary-icon[data-v-3ae54d6c]{color:var(--ion-color-success)}.summary-card.absent .summary-icon[data-v-3ae54d6c]{color:var(--ion-color-danger)}.summary-count[data-v-3ae54d6c]{font-size:1.5rem;font-weight:700;display:block;line-height:1.2;color:var(--ion-color-light)}.summary-label[data-v-3ae54d6c]{font-size:.875rem;opacity:.8;display:block;color:var(--ion-color-light)}.bal-text-color[data-v-3ae54d6c]{color:var(--ion-text-color);white-space:pre-line}.loading-container[data-v-3ae54d6c]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-3ae54d6c],.error-state[data-v-3ae54d6c]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-3ae54d6c],.error-state ion-icon[data-v-3ae54d6c]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-3ae54d6c],.error-state h3[data-v-3ae54d6c]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-3ae54d6c],.error-state p[data-v-3ae54d6c]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.status-indicator[data-v-3ae54d6c]{width:4px;height:100%;border-radius:4px;position:absolute;left:0}.attendance-item[data-v-3ae54d6c]{--padding-start: 12px;--inner-padding-end: 12px;--background: var(--ion-item-background, var(--ion-background-color, #fff));margin-bottom:8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.attendance-content[data-v-3ae54d6c]{margin-left:12px}.attendance-header[data-v-3ae54d6c]{display:flex;justify-content:space-between;margin-bottom:8px}.attendance-status[data-v-3ae54d6c]{font-weight:600;font-size:.9rem}.attendance-date[data-v-3ae54d6c]{font-size:.8rem;color:var(--ion-color-medium)}.attendance-details[data-v-3ae54d6c]{font-size:.875rem;color:var(--ion-color-medium)}.detail-row[data-v-3ae54d6c]{display:flex;align-items:center;margin-bottom:4px}.detail-row ion-icon[data-v-3ae54d6c]{margin-right:8px;font-size:16px;min-width:20px}.attendance-icon[data-v-3ae54d6c]{font-size:24px}@media (min-width: 768px){.summary-cards[data-v-3ae54d6c]{gap:24px}.attendance-item[data-v-3ae54d6c]{margin:0 auto 12px;max-width:800px}}\n",document.head.appendChild(a);var ce={class:"header-section ion-padding"},ie={class:"summary-cards"},ue={class:"summary-content"},le={class:"summary-content"},de={key:0,class:"loading-container"},se={key:1,class:"empty-state"},fe={key:2,class:"error-state"},me={key:3},pe={class:"attendance-header"},ve={class:"attendance-details"},ge={class:"detail-row"},ye={class:"detail-row"},he={key:0,class:"detail-row"},_e={key:1,class:"detail-row"},be={slot:"end",class:"attendance-icon"},xe=r({__name:"AttendancePage",setup:function(t){var a=localStorage.getItem("parisklegg_token")||"",r=localStorage.getItem("parisklegg_user"),re=r?JSON.parse(r):null,xe=(null==re?void 0:re.user_id)||0,we=o(),ke=v(),Ce=Number(we.params.id),je=c(""),ze=c(!0),Oe=c(!1),Se=c(!1),Pe=c([]),Ae=c(0),Te=c(0),Ee=function(e){switch(null==e?void 0:e.toLowerCase()){case"present":return"var(--ion-color-success)";case"absent":return"var(--ion-color-danger)";case"late":return"var(--ion-color-warning)";case"sick":return"var(--ion-color-primary)";default:return"var(--ion-color-medium)"}},Le=function(e){switch(null==e?void 0:e.toLowerCase()){case"present":return ae;case"absent":return ne;case"late":return te;case"sick":return ee;default:return Z}},Fe=function(e){switch(null==e?void 0:e.toLowerCase()){case"present":return"success";case"absent":return"danger";case"late":return"warning";case"sick":return"primary";default:return"medium"}},Ge=function(){var t,a=(t=e().m(function t(){var n,a,r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,ze.value=!0,Oe.value=!1,Pe.value=[],Ae.value=0,Te.value=0,e.n=1,p.get("https://school.klgilc.com/api/attendances",{headers:Ne(),timeout:2e4});case 1:n=e.v,a=n.data.filter(function(e){return e.tutorship_id===Ce&&e.user_id===xe}),console.log("Filtered user attendance records:",a),a.length>0&&(Se.value=!0,je.value=a[0].tutorship_name||"My Attendance",a.forEach(function(e){"present"===e.student_attendance.toLowerCase()?Ae.value++:"absent"===e.student_attendance.toLowerCase()&&Te.value++}),Pe.value=a.sort(function(e,t){return new Date(t.attendance_date||t.created_at).getTime()-new Date(e.attendance_date||e.created_at).getTime()})),e.n=3;break;case 2:e.p=2,r=e.v,De(r),Oe.value=!0;case 3:return e.p=3,ze.value=!1,e.f(3);case 4:return e.a(2)}},t,null,[[0,2,3,4]])}),function(){var e=this,a=arguments;return new Promise(function(r,o){var c=t.apply(e,a);function i(e){n(c,r,o,i,u,"next",e)}function u(e){n(c,r,o,i,u,"throw",e)}i(void 0)})});return function(){return a.apply(this,arguments)}}(),Ne=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},De=function(e){if(console.error("Error fetching data:",e),p.isAxiosError(e)){var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status))return ke.replace("/"),void oe.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===e.code)return void oe.show({text:"Request timeout. Please try again",position:"top"})}oe.show({text:"Failed to load data. Please try again later",position:"top"})};return i.setOverlaysWebView({overlay:!1}),i.setBackgroundColor({color:"#ffffff"}),i.setStyle({style:u.Light}),l(function(){Ge()}),function(e,t){return q(),d(f(m),null,{default:s(function(){return[g(f(w),null,{default:s(function(){return[g(f(y),null,{default:s(function(){return[g(f(h),{slot:"start"},{default:s(function(){return[g(f(_),{"default-href":"/"})]}),_:1}),g(f(b),null,{default:s(function(){return t[0]||(t[0]=[x("Attendance",-1)])}),_:1,__:[0]})]}),_:1})]}),_:1}),g(f(I),{fullscreen:!0},{default:s(function(){return[k("div",ce,[je.value?(q(),d(f(z),{key:0,class:"title"},{default:s(function(){return[x(O(je.value),1)]}),_:1})):j("",!0),k("div",ie,[g(f(S),{class:"summary-card present"},{default:s(function(){return[g(f(P),null,{default:s(function(){return[k("div",ue,[g(f(A),{icon:f(T),class:"summary-icon"},null,8,["icon"]),k("div",null,[g(f(z),{class:"summary-count"},{default:s(function(){return[x(O(Ae.value),1)]}),_:1}),g(f(z),{class:"summary-label"},{default:s(function(){return t[1]||(t[1]=[x("Present",-1)])}),_:1,__:[1]})])])]}),_:1})]}),_:1}),g(f(S),{class:"summary-card absent"},{default:s(function(){return[g(f(P),null,{default:s(function(){return[k("div",le,[g(f(A),{icon:f(E),class:"summary-icon"},null,8,["icon"]),k("div",null,[g(f(z),{class:"summary-count"},{default:s(function(){return[x(O(Te.value),1)]}),_:1}),g(f(z),{class:"summary-label"},{default:s(function(){return t[2]||(t[2]=[x("Absent",-1)])}),_:1,__:[2]})])])]}),_:1})]}),_:1})])]),ze.value?(q(),C("div",de,[g(f(L),{name:"crescent",color:"primary"})])):Se.value||Oe.value?Oe.value?(q(),C("div",fe,[g(f(A),{icon:f(G),color:"danger"},null,8,["icon"]),g(f(z),null,{default:s(function(){return t[4]||(t[4]=[k("h3",null,"Error Loading Attendance",-1),k("p",null,"Please try again later",-1)])}),_:1,__:[4]}),g(f(N),{fill:"clear",onClick:Ge},{default:s(function(){return t[5]||(t[5]=[x("Retry",-1)])}),_:1,__:[5]})])):(q(),C("div",me,[g(f(D),{lines:"none"},{default:s(function(){return[(q(!0),C(R,null,B(Pe.value,function(e,t){return q(),d(f(J),{key:t},{default:s(function(){return[g(f(M),{class:"attendance-item",detail:!1},{default:s(function(){return[k("div",{slot:"start",class:"status-indicator",style:U({backgroundColor:Ee(e.student_attendance)})},null,4),g(f(K),{class:"attendance-content"},{default:s(function(){return[k("div",pe,[g(f(z),{class:"attendance-status",style:U({color:Ee(e.student_attendance)})},{default:s(function(){return[x(O(e.student_attendance),1)]}),_:2},1032,["style"]),g(f(z),{class:"attendance-date bal-text-color"},{default:s(function(){return[x(O((t=e.attendance_date||e.created_at,new Date(t).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))),1)];var t}),_:2},1024)]),k("div",ve,[k("div",ge,[g(f(A),{icon:f(V)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:s(function(){return[x(O(e.student_name),1)]}),_:2},1024)]),k("div",ye,[g(f(A),{icon:f(W)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:s(function(){return[x(O(e.teacher_name),1)]}),_:2},1024)]),e.attendance_code?(q(),C("div",he,[g(f(A),{icon:f(Y)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:s(function(){return[x("Code: "+O(e.attendance_code),1)]}),_:2},1024)])):j("",!0),e.remark?(q(),C("div",_e,[g(f(A),{icon:f($)},null,8,["icon"]),g(f(z),{class:"bal-text-color"},{default:s(function(){return[x(O(e.remark),1)]}),_:2},1024)])):j("",!0)])]}),_:2},1024),k("div",be,[g(f(A),{icon:Le(e.student_attendance),color:Fe(e.student_attendance)},null,8,["icon","color"])])]}),_:2},1024),g(f(H),{side:"end"},{default:s(function(){return[g(f(Q),{color:"danger",onClick:function(t){return function(e){console.log("Reporting issue for record:",e)}(e)}},{default:s(function(){return[g(f(A),{slot:"icon-only",icon:f(X)},null,8,["icon"])]}),_:2},1032,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])):(q(),C("div",se,[g(f(A),{icon:f(F),color:"medium"},null,8,["icon"]),g(f(z),null,{default:s(function(){return t[3]||(t[3]=[k("h3",null,"No Attendance Records",-1),k("p",null,"Your attendance will appear here when marked by your teacher",-1)])}),_:1,__:[3]})]))]}),_:1})]}),_:1})}}});t("default",re(xe,[["__scopeId","data-v-3ae54d6c"]]))}}})}();
