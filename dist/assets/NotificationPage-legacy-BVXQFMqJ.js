!function(){function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,o)}return e}function e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(n){o(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o(n,e,o){return(e=function(n){var e=function(n,e){if("object"!=t(n)||!n)return n;var o=n[Symbol.toPrimitive];if(void 0!==o){var r=o.call(n,e||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==t(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return a(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=Array(n);e<n;e++)o[e]=t[e];return o}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.toStringTag||"@@toStringTag";function a(e,o,r,a){var i=o&&o.prototype instanceof l?o:l,s=Object.create(i.prototype);return c(s,"_invoke",function(e,o,r){var a,i,c,l=0,s=r||[],d=!1,f={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return a=n,i=0,c=t,f.n=e,u}};function v(e,o){for(i=e,c=o,n=0;!d&&l&&!r&&n<s.length;n++){var r,a=s[n],v=f.p,p=a[2];e>3?(r=p===o)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=v&&((r=e<2&&v<a[1])?(i=0,f.v=o,f.n=a[1]):v<p&&(r=e<3||a[0]>o||o>p)&&(a[4]=e,a[5]=o,f.n=p,i=0))}if(r||e>1)return u;throw d=!0,o}return function(r,s,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&v(s,p),i=s,c=p;(n=i<2?t:c)||!d;){a||(i?i<3?(i>1&&(f.n=-1),v(i,c)):f.n=c:f.v=c);try{if(l=2,a){if(i||(r="next"),n=a[r]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=t}else if((n=(d=f.n<0)?c:e.call(o,f))!==u)break}catch(n){a=t,i=1,c=n}finally{l=1}}return{value:n,done:d}}}(e,r,a),!0),s}var u={};function l(){}function s(){}function d(){}n=Object.getPrototypeOf;var f=[][o]?n(n([][o]())):(c(n={},o,function(){return this}),n),v=d.prototype=l.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,r,"GeneratorFunction")),t.prototype=Object.create(v),t}return s.prototype=d,c(v,"constructor",d),c(d,"constructor",s),s.displayName="GeneratorFunction",c(d,r,"GeneratorFunction"),c(v),c(v,r,"Generator"),c(v,o,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),(i=function(){return{w:a,m:p}})()}function c(t,n,e,o){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}c=function(t,n,e,o){function a(n,e){c(t,n,function(t){return this._invoke(n,e,t)})}n?r?r(t,n,{value:e,enumerable:!o,configurable:!o,writable:!o}):t[n]=e:(a("next",0),a("throw",1),a("return",2))},c(t,n,e,o)}function u(t,n,e,o,r,a,i){try{var c=t[a](i),u=c.value}catch(t){return void e(t)}c.done?n(u):Promise.resolve(u).then(o,r)}function l(t){return function(){var n=this,e=arguments;return new Promise(function(o,r){var a=t.apply(n,e);function i(t){u(a,o,r,i,c,"next",t)}function c(t){u(a,o,r,i,c,"throw",t)}i(void 0)})}}System.register(["./index-legacy-UPaEcoFv.js","./index-legacy-ZvApCsva.js"],function(t,n){"use strict";var o,a,c,u,s,d,f,v,p,m,b,g,y,h,_,x,k,w,S,j,O,P,C,z,E,I,N,T,A,D,U,G,R,V,F,L,B,M,Y,q,J,W,Z,$,H,K,Q,X,tt,nt,et,ot,rt,at,it,ct,ut,lt,st;return{setters:[function(t){o=t.d,a=t.ar,c=t.r,u=t.c,s=t.S,d=t.a,f=t.o,v=t.b,p=t.w,m=t.u,b=t.I,g=t.e,y=t.f,h=t.g,_=t.h,x=t.R,k=t.P,w=t.l,S=t.A,j=t.q,O=t.s,P=t.a9,C=t.v,z=t.n,E=t.a2,I=t.a3,N=t.k,T=t.m,A=t.x,D=t.y,U=t.z,G=t.t,R=t.aQ,V=t.C,F=t.T,L=t.U,B=t.aR,M=t.a4,Y=t.ag,q=t.K,J=t.a5,W=t.a6,Z=t.a7,$=t.aS,H=t.aT,K=t.aU,Q=t.M,X=t.aV,tt=t.aW,nt=t.N,et=t.j,ot=t.ab,rt=t.aX,at=t.aY,it=t.aZ,ct=t.ac,ut=t.ad,lt=t._},function(t){st=t.T}],execute:function(){var n=document.createElement("style");n.textContent=".loading-container[data-v-34892f2b]{display:flex;justify-content:center;align-items:center;height:100px;margin:20px 0}.error-state[data-v-34892f2b]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.error-state ion-icon[data-v-34892f2b]{margin-bottom:16px;color:var(--ion-color-medium)}.error-state h3[data-v-34892f2b]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.error-state p[data-v-34892f2b]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.notification-card[data-v-34892f2b]{margin:0;border-radius:0;box-shadow:none;border-bottom:1px solid var(--ion-border-color);background:var(--ion-card-background)}.notification-title[data-v-34892f2b]{color:var(--ion-text-color);white-space:pre-line}.notification-body[data-v-34892f2b]{font-size:1rem;line-height:1.5;color:var(--ion-text-color);white-space:pre-line}.reactions-container[data-v-34892f2b]{display:flex;gap:8px;margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-border-color)}.reaction-button[data-v-34892f2b]{--color: var(--ion-color-medium);--background: var(--ion-item-background);--background-hover: var(--ion-color-light-shade);--background-activated: var(--ion-color-light-tint)}.comments-section[data-v-34892f2b]{margin-top:16px;background:var(--ion-background-color)}.comment-item[data-v-34892f2b]{--padding-start: 0;--inner-padding-end: 0;--background: var(--ion-item-background);border-bottom:1px solid var(--ion-border-color)}.comment-item[data-v-34892f2b]:last-child{border-bottom:none}.comment-item ion-avatar[data-v-34892f2b]{width:40px;height:40px;margin-right:12px}.comment-item h3[data-v-34892f2b]{font-size:.9rem;font-weight:500;color:var(--ion-text-color)}.comment-item p[data-v-34892f2b]{font-size:.9rem;color:var(--ion-text-color);margin:4px 0;opacity:.9}.comment-date[data-v-34892f2b]{font-size:.7rem;color:var(--ion-color-medium)}.comment-input-container[data-v-34892f2b]{position:sticky;bottom:0;background:var(--ion-background-color);padding:8px;border-top:1px solid var(--ion-border-color)}.comment-input-container ion-textarea[data-v-34892f2b]{background:var(--ion-color-step-100);border-radius:20px;--padding-start: 12px;--padding-end: 12px;font-size:.9rem;--color: var(--ion-text-color);--placeholder-color: var(--ion-color-medium);--placeholder-opacity: .6}ion-popover[data-v-34892f2b]{--background: var(--ion-card-background);--color: var(--ion-text-color)}ion-popover ion-content[data-v-34892f2b]{--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--background: var(--ion-card-background)}.reaction-picker-buttons[data-v-34892f2b]{display:flex;gap:4px;flex-wrap:wrap}.reaction-picker-button[data-v-34892f2b]{--padding-start: 8px;--padding-end: 8px;--background: var(--ion-item-background);--color: var(--ion-text-color);--border-radius: 16px;font-size:1.2rem}.vote-buttons[data-v-34892f2b]{display:flex;flex-direction:column;align-items:center;margin-right:8px;background:var(--ion-item-background);border-radius:20px;padding:4px}.vote-button[data-v-34892f2b]{--color: var(--ion-color-medium);--background: transparent;--background-hover: var(--ion-color-light-shade);--background-activated: var(--ion-color-light-tint)}.vote-button.active[data-v-34892f2b]{--color: var(--ion-color-primary)}.vote-count[data-v-34892f2b]{font-size:.8em;margin:4px 0;color:var(--ion-text-color);font-weight:500}ion-icon[data-v-34892f2b]{width:16px;height:16px;color:var(--ion-color-medium)}.status-indicator[data-v-34892f2b]{width:8px;height:8px;border-radius:50%;background:var(--ion-color-success);margin-right:8px}.status-indicator.offline[data-v-34892f2b]{background:var(--ion-color-medium)}.notification-badge[data-v-34892f2b]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast);font-size:.7rem;font-weight:600}.empty-state[data-v-34892f2b]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:40vh;padding:20px;color:var(--ion-color-medium)}.empty-state ion-icon[data-v-34892f2b]{font-size:3rem;margin-bottom:16px;opacity:.5}@media (max-width: 768px){.comment-item[data-v-34892f2b]{--padding-start: 8px;--padding-end: 8px}.vote-buttons[data-v-34892f2b]{margin-right:4px;padding:2px}}.comment-input-container ion-textarea[data-v-34892f2b]:focus-within{background:var(--ion-color-step-200);outline:2px solid var(--ion-color-primary-tint)}.reaction-button[data-v-34892f2b]:focus,.vote-button[data-v-34892f2b]:focus{outline:2px solid var(--ion-color-primary);outline-offset:2px}.notification-card.new-item[data-v-34892f2b]{animation:fadeInUp-34892f2b .3s ease-out}@keyframes fadeInUp-34892f2b{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}\n",document.head.appendChild(n);var dt={key:0,class:"loading-container"},ft={key:1,class:"error-state"},vt={key:2},pt={class:"notification-body"},mt={class:"reactions-container"},bt={class:"comments-section"},gt=["src"],yt={class:"comment-date"},ht={slot:"end",class:"vote-buttons"},_t={class:"vote-count"},xt={class:"vote-count"},kt={class:"comment-input-container"},wt=o({__name:"NotificationPage",setup:function(t){var n=localStorage.getItem("parisklegg_token")||"",o=localStorage.getItem("parisklegg_user");o&&JSON.parse(o);var lt=a(),wt=y(),St=Number(lt.params.id),jt=c(!0),Ot=c(!1),Pt=c(!1),Ct=c(!1),zt=c(!1),Et=c(null),It=c([]),Nt=c(1),Tt=c(!0),At=c(""),Dt=c(null),Ut=c(!1),Gt=c(null),Rt=c(0),Vt=["like","heart","thumbs-up"],Ft=u(function(){var t;return(null===(t=Et.value)||void 0===t||null===(t=t.user_reaction)||void 0===t?void 0:t.reaction_type)||null}),Lt=function(t){return{like:ut,heart:ct,"thumbs-up":ot}[t]||ut},Bt=function(t){if(!t)return"Just now";var n=t.replace(/\.\d{6}Z$/,""),e=new Date(n);if(isNaN(e.getTime()))return"Invalid date";var o=e.toLocaleString("en-US",{month:"short"}),r=e.getDate(),a=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0");return"".concat(o," ").concat(r,", ").concat(a,":").concat(i)},Mt=function(){var t=l(i().m(function t(){var n,e;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,jt.value=!0,Ot.value=!1,t.n=1,g.get("https://school.klgilc.com/api/notifications/".concat(St),{headers:Qt(),timeout:2e4});case 1:if(n=t.v,Et.value=n.data,console.log("Notification loaded:",n.data),0!==n.data.is_read){t.n=2;break}return t.n=2,g.post("https://school.klgilc.com/api/notifications/".concat(St,"/read"),{},{headers:Qt(),timeout:1e4});case 2:return t.n=3,Yt();case 3:t.n=5;break;case 4:t.p=4,e=t.v,console.error("Error loading notification:",e),Xt(e),Ot.value=!0;case 5:return t.p=5,jt.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[0,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),Yt=function(){var t=l(i().m(function t(){var n,e,o,a=arguments;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:1,t.p=1,t.n=2,g.get("https://school.klgilc.com/api/notifications/".concat(St,"/comments"),{params:{page:n},headers:Qt(),timeout:1e4});case 2:e=t.v,It.value=1===n?e.data.data:[].concat(r(It.value),r(e.data.data)),Nt.value=n,Tt.value=!!e.data.next_page_url,t.n=4;break;case 3:t.p=3,o=t.v,console.error("Error loading comments:",o);case 4:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),qt=function(){var t=l(i().m(function t(n){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Yt(Nt.value+1);case 1:n.target.complete();case 2:return t.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}(),Jt=function(){var t=l(i().m(function t(){var n,e,o;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(At.value.trim()){t.n=1;break}return t.a(2);case 1:return Pt.value=!0,t.p=2,t.n=3,g.post("https://school.klgilc.com/api/notifications/".concat(St,"/create_comment"),{comment_body:At.value},{headers:Qt(),timeout:1e4});case 3:n=t.v,e={id:n.data.comment.id,comment_body:n.data.comment.comment_body,created_at:n.data.comment.created_at,user_id:n.data.comment.user_id,user_name:n.data.comment.user_name,avatar:n.data.comment.avatar||null,upvotes_count:0,downvotes_count:0,user_vote:null},It.value.unshift(e),At.value="",Et.value&&(Et.value.comments_count+=1),t.n=5;break;case 4:t.p=4,o=t.v,console.error("Error adding comment:",o);case 5:return t.p=5,Pt.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[2,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),Wt=function(){var t=l(i().m(function t(n){var e;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return Dt.value=n,t.p=1,t.n=2,g.delete("https://school.klgilc.com/api/comments/".concat(n),{headers:Qt(),timeout:1e4});case 2:It.value=It.value.filter(function(t){return t.id!==n}),Et.value&&(Et.value.comments_count-=1),t.n=4;break;case 3:t.p=3,e=t.v,console.error("Error deleting comment:",e);case 4:return t.p=4,Dt.value=null,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(n){return t.apply(this,arguments)}}(),Zt=function(){var t=l(i().m(function t(n){return i().w(function(t){for(;;)switch(t.n){case 0:if(Ft.value!==n){t.n=2;break}return t.n=1,Kt();case 1:t.n=3;break;case 2:return t.n=3,Ht(n);case 3:return t.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}(),$t=function(){var t=l(i().m(function t(n,o){var r,a,c,u,l;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!zt.value){t.n=1;break}return t.a(2);case 1:if(zt.value=!0,t.p=2,-1!==(r=It.value.findIndex(function(t){return t.id===n}))){t.n=3;break}return t.a(2);case 3:return a=It.value[r],(c=a.user_vote)===o?(a.user_vote=null,"upvote"===o&&a.upvotes_count--,"downvote"===o&&a.downvotes_count--):("upvote"===c&&a.upvotes_count--,"downvote"===c&&a.downvotes_count--,a.user_vote=o,"upvote"===o&&a.upvotes_count++,"downvote"===o&&a.downvotes_count++),t.n=4,g.post("https://school.klgilc.com/api/comments/".concat(n,"/vote"),{vote_type:o},{headers:Qt(),timeout:1e4});case 4:u=t.v,It.value[r]=e(e({},It.value[r]),{},{upvotes_count:u.data.upvotes_count,downvotes_count:u.data.downvotes_count,user_vote:u.data.user_vote}),t.n=6;break;case 5:t.p=5,l=t.v,console.error("Error voting on comment:",l),Yt(Nt.value);case 6:return t.p=6,zt.value=!1,t.f(6);case 7:return t.a(2)}},t,null,[[2,5,6,7]])}));return function(n,e){return t.apply(this,arguments)}}(),Ht=function(){var t=l(i().m(function t(n){var e,o;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return Ct.value=!0,Ut.value=!1,t.p=1,t.n=2,g.post("https://school.klgilc.com/api/notifications/".concat(St,"/reactions"),{reaction_type:n},{headers:Qt(),timeout:1e4});case 2:e=t.v,Et.value&&(Et.value.reaction_counts=e.data.reaction_counts,Et.value.user_reaction={reaction_type:n},Gt.value=e.data.reaction_id,console.log("Reaction added:",Gt.value)),t.n=4;break;case 3:t.p=3,o=t.v,console.error("Error adding reaction:",o);case 4:return t.p=4,Ct.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(n){return t.apply(this,arguments)}}(),Kt=function(){var t=l(i().m(function t(){var n,e;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return Ct.value=!0,t.p=1,t.n=2,g.delete("https://school.klgilc.com/api/notifications/".concat(St,"/delete_reaction"),{headers:Qt(),timeout:1e4});case 2:n=t.v,Et.value&&(Et.value.reaction_counts=n.data.reaction_counts,Gt.value=0,Et.value.user_reaction=null),t.n=4;break;case 3:t.p=3,e=t.v,console.error("Error removing reaction:",e);case 4:return t.p=4,Ct.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),Qt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n)}},Xt=function(t){if(console.error("Error fetching data:",t),g.isAxiosError(t)){var n;if(401===(null===(n=t.response)||void 0===n?void 0:n.status))return wt.replace("/"),void st.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void st.show({text:"Request timeout. Please try again",position:"top"})}st.show({text:"Failed to load data. Please try again later",position:"top"})};return s.setOverlaysWebView({overlay:!1}),s.setBackgroundColor({color:"#ffffff"}),s.setStyle({style:d.Light}),f(function(){Mt(),Rt.value=localStorage.getItem("global_id")?Number(localStorage.getItem("global_id")):0}),function(t,n){var e=x("ion-buttons");return nt(),v(m(b),null,{default:p(function(){return[h(m(j),null,{default:p(function(){return[h(m(_),null,{default:p(function(){return[h(e,{slot:"start"},{default:p(function(){return[h(m(k))]}),_:1}),h(m(w),null,{default:p(function(){return n[3]||(n[3]=[S(" Notification ",-1)])}),_:1,__:[3]})]}),_:1})]}),_:1}),h(m(Q),{fullscreen:!0},{default:p(function(){return[jt.value?(nt(),O("div",dt,[h(m(C),{name:"crescent",color:"primary"})])):Ot.value?(nt(),O("div",ft,[h(m(z),{icon:m(E),color:"danger",size:"large"},null,8,["icon"]),h(m(I),null,{default:p(function(){return n[4]||(n[4]=[N("h3",null,"Error Loading Notification",-1),N("p",null,"Please try again later",-1)])}),_:1,__:[4]}),h(m(T),{fill:"clear",onClick:Mt},{default:p(function(){return n[5]||(n[5]=[S("Retry",-1)])}),_:1,__:[5]})])):Et.value?(nt(),O("div",vt,[h(m(A),{class:"notification-card"},{default:p(function(){return[h(m(D),null,{default:p(function(){return[h(m(U),{class:"notification-title"},{default:p(function(){return[S(G(Et.value.title),1)]}),_:1}),h(m(R),null,{default:p(function(){return[S(G(Bt(Et.value.created_at)),1)]}),_:1})]}),_:1}),h(m(V),null,{default:p(function(){return[N("p",pt,G(Et.value.body),1),N("div",mt,[(nt(!0),O(F,null,L(Et.value.reaction_counts,function(t,n){return nt(),v(m(T),{key:n,fill:"clear",size:"small",onClick:function(t){return Zt(n)},color:Ft.value===n?"primary":"medium",disabled:Ct.value},{default:p(function(){return[Ct.value&&Ft.value===n?(nt(),v(m(C),{key:0,name:"dots",slot:"start"})):(nt(),v(m(z),{key:1,icon:Lt(n),slot:"start"},null,8,["icon"])),S(" "+G(t),1)]}),_:2},1032,["onClick","color","disabled"])}),128)),h(m(T),{fill:"clear",size:"small",onClick:n[0]||(n[0]=function(t){return Ut.value=!0}),disabled:Ct.value},{default:p(function(){return[h(m(z),{icon:m(B),slot:"icon-only"},null,8,["icon"])]}),_:1},8,["disabled"])])]}),_:1})]}),_:1}),N("div",bt,[h(m(M),null,{default:p(function(){return[h(m(Y),null,{default:p(function(){return[h(m(q),null,{default:p(function(){return[S("Comments ("+G(Et.value.comments_count)+")",1)]}),_:1})]}),_:1}),(nt(!0),O(F,null,L(It.value,function(t){return nt(),v(m(Z),{key:t.id,class:"comment-item"},{default:p(function(){return[h(m(et),{slot:"start",style:{"margin-left":"20px"}},{default:p(function(){return[N("img",{src:t.avatar||"/assets/img/default-avatar.svg"},null,8,gt)]}),_:2},1024),h(m(q),null,{default:p(function(){return[N("h3",null,G(t.user_name),1),N("p",null,G(t.comment_body),1),N("p",yt,G(Bt(t.created_at)),1)]}),_:2},1024),N("div",ht,[h(m(T),{fill:"clear",size:"small",onClick:function(n){return $t(t.id,"upvote")},disabled:zt.value},{default:p(function(){return[h(m(z),{icon:m(ot),color:"upvote"===t.user_vote?"primary":"medium"},null,8,["icon","color"]),N("span",_t,G(t.upvotes_count),1)]}),_:2},1032,["onClick","disabled"]),h(m(T),{fill:"clear",size:"small",onClick:function(n){return $t(t.id,"downvote")},disabled:zt.value},{default:p(function(){return[h(m(z),{icon:m(rt),color:"downvote"===t.user_vote?"danger":"medium"},null,8,["icon","color"]),N("span",xt,G(t.downvotes_count),1)]}),_:2},1032,["onClick","disabled"])]),t.user_id===Rt.value?(nt(),v(m(T),{key:0,fill:"clear",color:"danger",onClick:function(n){return Wt(t.id)},disabled:Dt.value===t.id},{default:p(function(){return[Dt.value===t.id?(nt(),v(m(C),{key:0,name:"dots",slot:"icon-only"})):(nt(),v(m(z),{key:1,icon:m(at),slot:"icon-only"},null,8,["icon"]))]}),_:2},1032,["onClick","disabled"])):P("",!0)]}),_:2},1024)}),128)),h(m(J),{onIonInfinite:qt,threshold:"100px",disabled:!Tt.value},{default:p(function(){return[h(m(W),{"loading-spinner":"bubbles","loading-text":"Loading more comments..."})]}),_:1},8,["disabled"])]}),_:1})]),N("div",kt,[h(m(Z),null,{default:p(function(){return[h(m($),{modelValue:At.value,"onUpdate:modelValue":n[1]||(n[1]=function(t){return At.value=t}),placeholder:"Add a comment...","auto-grow":""},null,8,["modelValue"]),h(m(T),{slot:"end",fill:"clear",disabled:!At.value.trim(),onClick:Jt},{default:p(function(){return[Pt.value?(nt(),v(m(C),{key:0,slot:"start",name:"dots"})):P("",!0),h(m(z),{icon:m(H),color:"primary"},null,8,["icon"])]}),_:1},8,["disabled"])]}),_:1})])])):P("",!0),h(m(K),{"is-open":Ut.value,onDidDismiss:n[2]||(n[2]=function(t){return Ut.value=!1})},{default:p(function(){return[h(m(Q),null,{default:p(function(){return[h(m(X),null,{default:p(function(){return[h(m(tt),null,{default:p(function(){return[(nt(),O(F,null,L(Vt,function(t){return h(m(it),{key:t,size:"auto",onClick:function(n){return Ht(t)}},{default:p(function(){return[h(m(T),{fill:"clear"},{default:p(function(){return[h(m(z),{icon:Lt(t),size:"large"},null,8,["icon"])]}),_:2},1024)]}),_:2},1032,["onClick"])}),64))]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["is-open"])]}),_:1})]}),_:1})}}});t("default",lt(wt,[["__scopeId","data-v-34892f2b"]]))}}})}();
