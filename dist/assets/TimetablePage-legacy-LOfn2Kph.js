!function(){function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(a,o,n,i){var c=o&&o.prototype instanceof l?o:l,f=Object.create(c.prototype);return t(f,"_invoke",function(a,t,o){var n,i,c,l=0,f=o||[],s=!1,u={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(a,t){return n=a,i=0,c=e,u.n=t,d}};function p(a,t){for(i=a,c=t,r=0;!s&&l&&!o&&r<f.length;r++){var o,n=f[r],p=u.p,v=n[2];a>3?(o=v===t)&&(c=n[(i=n[4])?5:(i=3,3)],n[4]=n[5]=e):n[0]<=p&&((o=a<2&&p<n[1])?(i=0,u.v=t,u.n=n[1]):p<v&&(o=a<3||n[0]>t||t>v)&&(n[4]=a,n[5]=t,u.n=v,i=0))}if(o||a>1)return d;throw s=!0,t}return function(o,f,v){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&p(f,v),i=f,c=v;(r=i<2?e:c)||!s;){n||(i?i<3?(i>1&&(u.n=-1),p(i,c)):u.n=c:u.v=c);try{if(l=2,n){if(i||(o="next"),r=n[o]){if(!(r=r.call(n,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=n.return)&&r.call(n),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);n=e}else if((r=(s=u.n<0)?c:a.call(t,u))!==d)break}catch(r){n=e,i=1,c=r}finally{l=1}}return{value:r,done:s}}}(a,n,i),!0),f}var d={};function l(){}function f(){}function s(){}r=Object.getPrototypeOf;var u=[][n]?r(r([][n]())):(t(r={},n,function(){return this}),r),p=s.prototype=l.prototype=Object.create(u);function v(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,s):(a.__proto__=s,t(a,i,"GeneratorFunction")),a.prototype=Object.create(p),a}return f.prototype=s,t(p,"constructor",s),t(s,"constructor",f),f.displayName="GeneratorFunction",t(s,i,"GeneratorFunction"),t(p),t(p,i,"Generator"),t(p,n,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m:v}})()}function t(a,e,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(a){n=0}t=function(a,e,r,o){function i(e,r){t(a,e,function(a){return this._invoke(e,r,a)})}e?n?n(a,e,{value:r,enumerable:!o,configurable:!o,writable:!o}):a[e]=r:(i("next",0),i("throw",1),i("return",2))},t(a,e,r,o)}function e(a,t,e,r,o,n,i){try{var c=a[n](i),d=c.value}catch(a){return void e(a)}c.done?t(d):Promise.resolve(d).then(r,o)}System.register(["./index-legacy-UPaEcoFv.js","./index-legacy-ZvApCsva.js"],function(t,r){"use strict";var o,n,i,c,d,l,f,s,u,p,v,m,y,g,b,x,h,k,_,w,T,j,S,z,D,K,O,P,E,C,F,G,I,N,A,M,B,L,R,Y,q,J,W,U;return{setters:[function(a){o=a.d,n=a.ar,i=a.r,c=a.S,d=a.a,l=a.o,f=a.b,s=a.w,u=a.u,p=a.I,v=a.e,m=a.f,y=a.g,g=a.h,b=a.i,x=a.P,h=a.l,k=a.A,_=a.q,w=a.k,T=a.s,j=a.a9,S=a.a3,z=a.t,D=a.v,K=a.n,O=a.J,P=a.a2,E=a.m,C=a.T,F=a.U,G=a.M,I=a.N,N=a.x,A=a.X,M=a.y,B=a.z,L=a.as,R=a.C,Y=a.a7,q=a.G,J=a.K,W=a._},function(a){U=a.T}],execute:function(){var r=document.createElement("style");r.textContent=".header-section[data-v-a961ff5c]{margin-bottom:24px;text-align:center;background:var(--ion-background-color)}.title[data-v-a961ff5c]{display:block;font-size:1.5rem;font-weight:600;color:var(--ion-color-primary);margin-bottom:4px}.subtitle[data-v-a961ff5c]{font-size:.9rem;color:var(--ion-color-medium)}.loading-container[data-v-a961ff5c]{display:flex;justify-content:center;align-items:center;height:200px;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-a961ff5c]{color:var(--ion-color-primary)}.empty-state[data-v-a961ff5c],.error-state[data-v-a961ff5c]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px;background:var(--ion-background-color)}.empty-state ion-icon[data-v-a961ff5c]{color:var(--ion-color-medium);font-size:64px;margin-bottom:16px;opacity:.7}.error-state ion-icon[data-v-a961ff5c]{color:var(--ion-color-danger);font-size:64px;margin-bottom:16px;opacity:.8}.empty-state h3[data-v-a961ff5c],.error-state h3[data-v-a961ff5c]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.empty-state p[data-v-a961ff5c],.error-state p[data-v-a961ff5c]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px;line-height:1.4}.timetable-container[data-v-a961ff5c]{display:flex;flex-direction:column;gap:16px;padding:16px;background:var(--ion-background-color)}.day-card[data-v-a961ff5c]{background:var(--ion-card-background);border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);transition:transform .2s ease,box-shadow .2s ease;border-left:4px solid var(--ion-color-primary);border:1px solid var(--ion-border-color)}.today-card[data-v-a961ff5c]{border-left:4px solid var(--ion-color-success);background:rgba(var(--ion-color-success-rgb),.05);border-color:rgba(var(--ion-color-success-rgb),.2)}.day-card-header[data-v-a961ff5c]{padding:16px;border-bottom:1px solid var(--ion-border-color);background:var(--ion-item-background);border-radius:12px 12px 0 0}.day-title[data-v-a961ff5c]{display:flex;align-items:center;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--ion-text-color)}.day-date[data-v-a961ff5c]{font-size:.8rem;color:var(--ion-color-medium);font-weight:400}.time-content[data-v-a961ff5c]{padding:16px;background:var(--ion-card-background);border-radius:0 0 12px 12px}.time-content ion-item[data-v-a961ff5c]{--padding-start: 0;--inner-padding-end: 0;--background: transparent;--border-color: var(--ion-border-color);margin-bottom:12px}.time-content ion-item[data-v-a961ff5c]:last-child{margin-bottom:0}.time-content ion-icon[data-v-a961ff5c]{margin-right:8px;color:var(--ion-color-primary)}.time-slot[data-v-a961ff5c]{display:flex;align-items:flex-start;gap:12px;padding:12px;background:var(--ion-color-step-50);border-radius:8px;border-left:3px solid var(--ion-color-primary)}.time-slot.today[data-v-a961ff5c]{border-left-color:var(--ion-color-success);background:rgba(var(--ion-color-success-rgb),.08)}.time-info[data-v-a961ff5c]{flex:1}.time-range[data-v-a961ff5c]{font-size:.9rem;font-weight:600;color:var(--ion-text-color);margin-bottom:4px}.time-subject[data-v-a961ff5c]{font-size:.9rem;color:var(--ion-text-color);opacity:.9;margin-bottom:2px}.time-location[data-v-a961ff5c]{font-size:.8rem;color:var(--ion-color-medium)}.time-icon[data-v-a961ff5c]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:var(--ion-color-primary);color:#fff;border-radius:6px;font-size:14px}.day-card[data-v-a961ff5c]:active{transform:scale(.98)}.day-card[data-v-a961ff5c]:hover{box-shadow:0 6px 16px rgba(0,0,0,.12)}.dark .day-card[data-v-a961ff5c]{box-shadow:0 4px 12px rgba(0,0,0,.15)}.dark .today-card[data-v-a961ff5c]{background:rgba(var(--ion-color-success-rgb),.08);border-color:rgba(var(--ion-color-success-rgb),.3)}.dark .time-slot[data-v-a961ff5c]{background:var(--ion-color-step-100)}.dark .time-slot.today[data-v-a961ff5c]{background:rgba(var(--ion-color-success-rgb),.12)}@media (min-width: 768px){.timetable-container[data-v-a961ff5c]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;padding:20px;max-width:1200px;margin:0 auto}.day-card[data-v-a961ff5c]{margin:0}}@media (min-width: 1024px){.timetable-container[data-v-a961ff5c]{grid-template-columns:repeat(3,1fr)}}@media (prefers-contrast: high){.day-card[data-v-a961ff5c]{border:2px solid var(--ion-border-color)}.time-slot[data-v-a961ff5c]{border:1px solid var(--ion-border-color)}}@media (prefers-reduced-motion: reduce){.day-card[data-v-a961ff5c]{transition:none}.day-card[data-v-a961ff5c]:active{transform:none}}@supports (padding: max(0px)){.timetable-container[data-v-a961ff5c]{padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}}.day-card[data-v-a961ff5c]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.time-slot[data-v-a961ff5c]:focus-within{outline:2px solid var(--ion-color-primary);outline-offset:2px}.empty-state .action-button[data-v-a961ff5c],.error-state .retry-button[data-v-a961ff5c]{margin-top:16px}@keyframes fadeIn-a961ff5c{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.day-card[data-v-a961ff5c]{animation:fadeIn-a961ff5c .3s ease-out}.day-card[data-v-a961ff5c]:nth-child(odd){animation-delay:.1s}.day-card[data-v-a961ff5c]:nth-child(2n){animation-delay:.2s}\n",document.head.appendChild(r);var V={class:"header-section"},X={key:0,class:"loading-container"},H={key:1,class:"empty-state"},Q={key:2,class:"error-state"},Z={key:3,class:"timetable-container"},$=o({__name:"TimetablePage",setup:function(t){var r=localStorage.getItem("parisklegg_token")||"",o=localStorage.getItem("parisklegg_user");o&&JSON.parse(o);var W=n(),$=m(),aa=Number(W.params.id),ta=i(""),ea=i(""),ra=i(!0),oa=i(!1),na=i(!1),ia=i([]),ca=function(){var t,r=(t=a().m(function t(){var e,r;return a().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,ra.value=!0,oa.value=!1,a.n=1,v.post("https://school.klgilc.com/api/timetable",{tutorship_id:aa},{headers:la(),timeout:2e4});case 1:e=a.v,console.log("Timetable response:",e.data),da(e.data),a.n=3;break;case 2:a.p=2,r=a.v,fa(r),oa.value=!0;case 3:return a.p=3,ra.value=!1,a.f(3);case 4:return a.a(2)}},t,null,[[0,2,3,4]])}),function(){var a=this,r=arguments;return new Promise(function(o,n){var i=t.apply(a,r);function c(a){e(i,o,n,c,d,"next",a)}function d(a){e(i,o,n,c,d,"throw",a)}c(void 0)})});return function(){return r.apply(this,arguments)}}(),da=function(a){var t=[{name:"Monday",dayKey:"monday"},{name:"Tuesday",dayKey:"tuesday"},{name:"Wednesday",dayKey:"wednesday"},{name:"Thursday",dayKey:"thursday"},{name:"Friday",dayKey:"friday"},{name:"Saturday",dayKey:"saturday"},{name:"Sunday",dayKey:"sunday"}],e=(new Date).getDay(),r=t[0===e?6:e-1].dayKey;ia.value=[],na.value=!1,a.forEach(function(a){a.tutorship_id===aa&&(ta.value=a.tutorship_name||"My Timetable",t.forEach(function(t){var e=a["".concat(t.dayKey,"_start")],o=a["".concat(t.dayKey,"_end")];(function(a,t){return!!a&&""!==a.trim()&&!!t&&""!==t.trim()})(e,o)&&(na.value=!0,ia.value.push({name:t.name,dayKey:t.dayKey,startTime:e,endTime:o,isToday:t.dayKey===r}))}))})},la=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)}},fa=function(a){if(console.error("Error fetching data:",a),v.isAxiosError(a)){var t;if(401===(null===(t=a.response)||void 0===t?void 0:t.status))return $.replace("/"),void U.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===a.code)return void U.show({text:"Request timeout. Please try again",position:"top"})}U.show({text:"Failed to load data. Please try again later",position:"top"})};return c.setOverlaysWebView({overlay:!1}),c.setBackgroundColor({color:"#ffffff"}),c.setStyle({style:d.Light}),l(function(){ea.value=function(){var a=new Date,t=a.getDay()||7,e=new Date(a);e.setDate(a.getDate()-t+1);var r=new Date(e);r.setDate(e.getDate()+6);var o={month:"short",day:"numeric"};return"".concat(e.toLocaleDateString(void 0,o)," - ").concat(r.toLocaleDateString(void 0,o))}(),ca(),console.log("Mounted: Fetching timetable for tutorship ID:",aa)}),function(a,t){return I(),f(u(p),null,{default:s(function(){return[y(u(_),null,{default:s(function(){return[y(u(g),null,{default:s(function(){return[y(u(b),{slot:"start"},{default:s(function(){return[y(u(x),{"default-href":"/"})]}),_:1}),y(u(h),null,{default:s(function(){return t[0]||(t[0]=[k("Timetable",-1)])}),_:1,__:[0]})]}),_:1})]}),_:1}),y(u(G),{class:"ion-padding",fullscreen:!0},{default:s(function(){return[w("div",V,[ta.value?(I(),f(u(S),{key:0,class:"title"},{default:s(function(){return[k(z(ta.value),1)]}),_:1})):j("",!0),y(u(S),{class:"subtitle"},{default:s(function(){return[k(z(ea.value),1)]}),_:1})]),ra.value?(I(),T("div",X,[y(u(D),{name:"crescent",color:"primary"})])):na.value?oa.value?(I(),T("div",Q,[y(u(K),{icon:u(P),color:"danger",size:"large"},null,8,["icon"]),y(u(S),null,{default:s(function(){return t[2]||(t[2]=[w("h3",null,"Failed to load timetable",-1),w("p",null,"Please try again later",-1)])}),_:1,__:[2]}),y(u(E),{onClick:ca,fill:"clear"},{default:s(function(){return t[3]||(t[3]=[k("Retry",-1)])}),_:1,__:[3]})])):(I(),T("div",Z,[(I(!0),T(C,null,F(ia.value,function(a,e){return I(),f(u(N),{key:e,class:A(["day-card",{"today-card":a.isToday}])},{default:s(function(){return[y(u(M),null,{default:s(function(){return[y(u(B),{class:"day-title"},{default:s(function(){return[k(z(a.name)+" ",1),a.isToday?(I(),f(u(L),{key:0,color:"success"},{default:s(function(){return t[4]||(t[4]=[k("Today",-1)])}),_:1,__:[4]})):j("",!0)]}),_:2},1024)]}),_:2},1024),y(u(R),{class:"time-content"},{default:s(function(){return[y(u(Y),{lines:"none"},{default:s(function(){return[y(u(K),{slot:"start",icon:u(q),color:"primary"},null,8,["icon"]),y(u(J),null,{default:s(function(){return[k(z(a.startTime)+" - "+z(a.endTime),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["class"])}),128))])):(I(),T("div",H,[y(u(K),{icon:u(O),size:"large"},null,8,["icon"]),y(u(S),null,{default:s(function(){return t[1]||(t[1]=[w("h3",null,"No Classes Scheduled",-1),w("p",null,"Your timetable will appear here when classes are scheduled",-1)])}),_:1,__:[1]})]))]}),_:1})]}),_:1})}}});t("default",W($,[["__scopeId","data-v-a961ff5c"]]))}}})}();
