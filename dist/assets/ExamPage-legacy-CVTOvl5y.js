!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function c(r,a,o,i){var c=a&&a.prototype instanceof u?a:u,s=Object.create(c.prototype);return n(s,"_invoke",function(r,n,a){var o,i,c,u=0,s=a||[],d=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,r){return o=e,i=0,c=t,f.n=r,l}};function m(r,n){for(i=r,c=n,e=0;!d&&u&&!a&&e<s.length;e++){var a,o=s[e],m=f.p,v=o[2];r>3?(a=v===n)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=r<2&&m<o[1])?(i=0,f.v=n,f.n=o[1]):m<v&&(a=r<3||o[0]>n||n>v)&&(o[4]=r,o[5]=n,f.n=v,i=0))}if(a||r>1)return l;throw d=!0,n}return function(a,s,v){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,v),i=s,c=v;(e=i<2?t:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),m(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(d=f.n<0)?c:r.call(n,f))!==l)break}catch(e){o=t,i=1,c=e}finally{u=1}}return{value:e,done:d}}}(r,o,i),!0),s}var l={};function u(){}function s(){}function d(){}e=Object.getPrototypeOf;var f=[][o]?e(e([][o]())):(n(e={},o,function(){return this}),e),m=d.prototype=u.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,n(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=d,n(m,"constructor",d),n(d,"constructor",s),s.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(m),n(m,i,"Generator"),n(m,o,function(){return this}),n(m,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function n(t,e,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}n=function(t,e,r,a){function i(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},n(t,e,r,a)}function a(t,e,r,n,a,o,i){try{var c=t[o](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,a)}System.register(["./index-legacy-DGDcVX8Z.js","./index-legacy-DbX0QY3B.js"],function(e,n){"use strict";var o,i,c,l,u,s,d,f,m,v,p,y,g,h,x,b,_,w,k,S,j,z,E,O,P,A,T,C,I,N,R,G,D,F,B,L,M,$,q,Y;return{setters:[function(t){o=t.d,i=t.ar,c=t.r,l=t.c,u=t.S,s=t.a,d=t.o,f=t.b,m=t.w,v=t.u,p=t.I,y=t.e,g=t.f,h=t.g,x=t.h,b=t.i,_=t.P,w=t.l,k=t.A,S=t.q,j=t.s,z=t.x,E=t.y,O=t.z,P=t.n,A=t.aP,T=t.C,C=t.k,I=t.a3,N=t.t,R=t.X,G=t.v,D=t.az,F=t.a2,B=t.m,L=t.a9,M=t.M,$=t.N,q=t._},function(t){Y=t.T}],execute:function(){var n=document.createElement("style");n.textContent=".summary-card[data-v-90c9fc80]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}.summary-title[data-v-90c9fc80]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:600;color:var(--ion-text-color);white-space:pre-line}.summary-title ion-icon[data-v-90c9fc80]{font-size:24px}.summary-content[data-v-90c9fc80]{display:flex;justify-content:space-between;padding:16px}.summary-item[data-v-90c9fc80]{display:flex;flex-direction:column;align-items:center;flex:1}.divider[data-v-90c9fc80]{width:1px;background-color:var(--ion-color-light);margin:0 8px}.summary-label[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:4px}.summary-value[data-v-90c9fc80]{font-size:1.2rem;font-weight:600}.excellent[data-v-90c9fc80]{color:var(--ion-color-success)}.good[data-v-90c9fc80]{color:var(--ion-color-primary)}.average[data-v-90c9fc80]{color:var(--ion-color-warning)}.poor[data-v-90c9fc80]{color:var(--ion-color-danger)}.loading-container[data-v-90c9fc80]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-90c9fc80],.error-state[data-v-90c9fc80]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-90c9fc80],.error-state ion-icon[data-v-90c9fc80]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-90c9fc80],.error-state h3[data-v-90c9fc80]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-90c9fc80],.error-state p[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.details-card[data-v-90c9fc80]{margin:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.details-card ion-card-title[data-v-90c9fc80]{font-size:1.1rem;font-weight:600;color:var(--ion-text-color)}.detail-row[data-v-90c9fc80]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--ion-color-light)}.detail-row[data-v-90c9fc80]:last-child{border-bottom:none}.detail-label[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium)}.detail-value[data-v-90c9fc80]{font-size:.9rem;font-weight:500}.feedback-section[data-v-90c9fc80]{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-light)}.feedback-title[data-v-90c9fc80]{display:block;font-size:.9rem;font-weight:500;color:var(--ion-color-primary);margin-bottom:8px}.feedback-content[data-v-90c9fc80]{font-size:.9rem;color:var(--ion-color-medium);line-height:1.5}@media (min-width: 768px){.summary-card[data-v-90c9fc80],.details-card[data-v-90c9fc80]{margin:16px auto;max-width:800px}}\n/*$vite$:1*/",document.head.appendChild(n);var J={class:"summary-item"},U={class:"summary-item"},V={key:0,class:"loading-container"},W={key:1,class:"empty-state"},X={key:2,class:"error-state"},H={class:"detail-row"},K={class:"detail-row"},Q={key:0,class:"detail-row"},Z={key:1,class:"feedback-section"},tt=o({__name:"ExamPage",setup:function(e){var n=localStorage.getItem("parisklegg_token")||"",o=localStorage.getItem("parisklegg_user"),q=o?JSON.parse(o):null,tt=(null==q?void 0:q.user_id)||0,et=g(),rt=i(),nt=Number(rt.params.id),at=c(!0),ot=c(!1),it=c({student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0}),ct=l(function(){return null!==it.value}),lt=l(function(){var t;return(null===(t=it.value)||void 0===t?void 0:t.tutorship_name)||"Exam"}),ut=l(function(){return it.value?st(it.value.score_numerator,it.value.score_denominator):0}),st=function(t,e){return 0===e?0:Math.round(t/e*100)},dt=function(t){return t>=85?"excellent":t>=70?"good":t>=50?"average":"poor"},ft=function(){var t,e=(t=r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,at.value=!0,ot.value=!1,it.value={student_id:0,tutorship_id:0,score_numerator:0,score_denominator:0},t.n=1,y.post("https://klegg-app-whh7m.ondigitalocean.app/api/exams",{tutorship_id:nt,student_id:tt},{headers:mt(),timeout:2e4});case 1:(e=t.v).data.length>0&&(it.value=e.data[0]),t.n=3;break;case 2:t.p=2,n=t.v,console.error("Error fetching exam results:",n),vt(n),ot.value=!0;case 3:return t.p=3,at.value=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,l,"next",t)}function l(t){a(i,n,o,c,l,"throw",t)}c(void 0)})});return function(){return e.apply(this,arguments)}}(),mt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n)}},vt=function(t){if(console.error("Error fetching data:",t),y.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return et.replace("/"),void Y.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void Y.show({text:"Request timeout. Please try again",position:"top"})}Y.show({text:"Failed to load data. Please try again later",position:"top"})};return u.setOverlaysWebView({overlay:!1}),u.setBackgroundColor({color:"#ffffff"}),u.setStyle({style:s.Light}),d(function(){ft()}),function(e,r){return $(),f(v(p),null,{default:m(function(){return[h(v(S),null,{default:m(function(){return[h(v(x),null,{default:m(function(){return[h(v(b),{slot:"start"},{default:m(function(){return[h(v(_),{"default-href":"/"})]}),_:1}),h(v(w),null,{default:m(function(){return t(r[0]||(r[0]=[k("Exam Results",-1)]))}),_:1})]}),_:1})]}),_:1}),h(v(M),{fullscreen:!0},{default:m(function(){return[h(v(z),{class:"summary-card"},{default:m(function(){return[h(v(E),null,{default:m(function(){return[h(v(O),{class:"summary-title"},{default:m(function(){return[h(v(P),{icon:v(A),color:"primary"},null,8,["icon"]),r[1]||(r[1]=k(" Exam Overview ",-1))]}),_:1})]}),_:1}),h(v(T),{class:"summary-content"},{default:m(function(){return[C("div",J,[h(v(I),{class:"summary-label"},{default:m(function(){return t(r[2]||(r[2]=[k("Exam",-1)]))}),_:1}),h(v(I),{class:"summary-value"},{default:m(function(){return[k(N(lt.value),1)]}),_:1})]),r[4]||(r[4]=C("div",{class:"divider"},null,-1)),C("div",U,[h(v(I),{class:"summary-label"},{default:m(function(){return t(r[3]||(r[3]=[k("Your Score",-1)]))}),_:1}),h(v(I),{class:R(["summary-value",dt(ut.value)])},{default:m(function(){return[k(N(ut.value)+"% ",1)]}),_:1},8,["class"])])]}),_:1})]}),_:1}),at.value?($(),j("div",V,[h(v(G),{name:"crescent",color:"primary"})])):ct.value||ot.value?ot.value?($(),j("div",X,[h(v(P),{icon:v(F),size:"large",color:"danger"},null,8,["icon"]),h(v(I),null,{default:m(function(){return t(r[6]||(r[6]=[C("h3",null,"Error Loading Results",-1),C("p",null,"Please try again later",-1)]))}),_:1}),h(v(B),{fill:"clear",onClick:ft},{default:m(function(){return t(r[7]||(r[7]=[k("Retry",-1)]))}),_:1})])):($(),f(v(z),{key:3,class:"details-card"},{default:m(function(){return[h(v(E),null,{default:m(function(){return[h(v(O),null,{default:m(function(){return t(r[8]||(r[8]=[k("Detailed Results",-1)]))}),_:1})]}),_:1}),h(v(T),null,{default:m(function(){return[C("div",H,[h(v(I),{class:"detail-label"},{default:m(function(){return t(r[9]||(r[9]=[k("Score",-1)]))}),_:1}),h(v(I),{class:"detail-value"},{default:m(function(){return[k(N(it.value.score_numerator)+"/"+N(it.value.score_denominator),1)]}),_:1})]),C("div",K,[h(v(I),{class:"detail-label"},{default:m(function(){return t(r[10]||(r[10]=[k("Percentage",-1)]))}),_:1}),h(v(I),{class:R(["detail-value",dt(ut.value)])},{default:m(function(){return[k(N(ut.value)+"% ",1)]}),_:1},8,["class"])]),it.value.created_at?($(),j("div",Q,[h(v(I),{class:"detail-label"},{default:m(function(){return t(r[11]||(r[11]=[k("Date Taken",-1)]))}),_:1}),h(v(I),{class:"detail-value"},{default:m(function(){return[k(N((t=it.value.created_at,new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}))),1)];var t}),_:1})])):L("",!0),it.value.comments?($(),j("div",Z,[h(v(I),{class:"feedback-title"},{default:m(function(){return t(r[12]||(r[12]=[k("Instructor Feedback",-1)]))}),_:1}),h(v(I),{class:"feedback-content"},{default:m(function(){return[k(N(it.value.comments),1)]}),_:1})])):L("",!0)]}),_:1})]}),_:1})):($(),j("div",W,[h(v(P),{icon:v(D),size:"large",color:"medium"},null,8,["icon"]),h(v(I),null,{default:m(function(){return t(r[5]||(r[5]=[C("h3",null,"No Exam Results",-1),C("p",null,"Your exam results will appear here once available",-1)]))}),_:1})]))]}),_:1})]}),_:1})}}});e("default",q(tt,[["__scopeId","data-v-90c9fc80"]]))}}})}();
