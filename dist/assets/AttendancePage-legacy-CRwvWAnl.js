!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function i(n,r,o,c){var i=r&&r.prototype instanceof l?r:l,s=Object.create(i.prototype);return a(s,"_invoke",function(n,a,r){var o,c,i,l=0,s=r||[],d=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return o=e,c=0,i=t,f.n=n,u}};function m(n,a){for(c=n,i=a,e=0;!d&&l&&!r&&e<s.length;e++){var r,o=s[e],m=f.p,p=o[2];n>3?(r=p===a)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=m&&((r=n<2&&m<o[1])?(c=0,f.v=a,f.n=o[1]):m<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return u;throw d=!0,a}return function(r,s,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,p),c=s,i=p;(e=c<2?t:i)||!d;){o||(c?c<3?(c>1&&(f.n=-1),m(c,i)):f.n=i:f.v=i);try{if(l=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(d=f.n<0)?i:n.call(a,f))!==u)break}catch(e){o=t,c=1,i=e}finally{l=1}}return{value:e,done:d}}}(n,o,c),!0),s}var u={};function l(){}function s(){}function d(){}e=Object.getPrototypeOf;var f=[][o]?e(e([][o]())):(a(e={},o,function(){return this}),e),m=d.prototype=l.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=d,a(m,"constructor",d),a(d,"constructor",s),s.displayName="GeneratorFunction",a(d,c,"GeneratorFunction"),a(m),a(m,c,"Generator"),a(m,o,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:p}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){function c(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},a(t,e,n,r)}function r(t,e,n,a,r,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,r)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var c=t.apply(e,n);function i(t){r(c,a,o,i,u,"next",t)}function u(t){r(c,a,o,i,u,"throw",t)}i(void 0)})}}System.register(["./index-legacy-bhlrdrvL.js","./index-legacy-Btp0TFe9.js"],function(e,a){"use strict";var r,c,i,u,l,s,d,f,m,p,v,b,y,g,h,x,_,w,k,A,j,S,C,O,z,E,P,T,L,F,I,N,D,G,R,M,$,B,q,J,U,K,Y,H,Q,V,W,X,Z,tt,et,nt,at,rt,ot,ct;return{setters:[function(t){r=t.d,c=t.ao,i=t.r,u=t.o,l=t.O,s=t.a,d=t.w,f=t.u,m=t.I,p=t.b,v=t.e,b=t.f,y=t.g,g=t.h,h=t.i,x=t.P,_=t.l,w=t.A,k=t.q,A=t.k,j=t.s,S=t.a9,C=t.a3,O=t.t,z=t.x,E=t.C,P=t.n,T=t.as,L=t.at,F=t.v,I=t.J,N=t.a2,D=t.m,G=t.a4,R=t.S,M=t.T,$=t.M,B=t.N,q=t.au,J=t.a7,U=t.$,K=t.K,Y=t.av,H=t.aw,Q=t.ax,V=t.ay,W=t.az,X=t.aA,Z=t.aB,tt=t.aC,et=t.aD,nt=t.aE,at=t.aF,rt=t.F,ot=t._},function(t){ct=t.T}],execute:function(){var a=document.createElement("style");a.textContent=".header-section[data-v-cf16e0cb]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);color:#fff;padding-bottom:16px}.header-section .title[data-v-cf16e0cb]{display:block;font-size:1.5rem;font-weight:600;color:#fff;margin-bottom:16px}.summary-cards[data-v-cf16e0cb]{display:flex;gap:16px;margin-top:8px}.summary-card[data-v-cf16e0cb]{flex:1;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1);margin:0}.summary-card.present[data-v-cf16e0cb]{--background: rgba(var(--ion-color-success-rgb), .1)}.summary-card.absent[data-v-cf16e0cb]{--background: rgba(var(--ion-color-danger-rgb), .1)}.summary-content[data-v-cf16e0cb]{display:flex;align-items:center;gap:12px}.summary-icon[data-v-cf16e0cb]{font-size:32px}.summary-card.present .summary-icon[data-v-cf16e0cb]{color:var(--ion-color-success)}.summary-card.absent .summary-icon[data-v-cf16e0cb]{color:var(--ion-color-danger)}.summary-count[data-v-cf16e0cb]{font-size:1.5rem;font-weight:700;display:block;line-height:1.2;color:var(--ion-color-light)}.summary-label[data-v-cf16e0cb]{font-size:.875rem;opacity:.8;display:block;color:var(--ion-color-light)}.bal-text-color[data-v-cf16e0cb]{color:var(--ion-text-color);white-space:pre-line}.loading-container[data-v-cf16e0cb]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-cf16e0cb],.error-state[data-v-cf16e0cb]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-cf16e0cb],.error-state ion-icon[data-v-cf16e0cb]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-cf16e0cb],.error-state h3[data-v-cf16e0cb]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-cf16e0cb],.error-state p[data-v-cf16e0cb]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.status-indicator[data-v-cf16e0cb]{width:4px;height:100%;border-radius:4px;position:absolute;left:0}.attendance-item[data-v-cf16e0cb]{--padding-start: 12px;--inner-padding-end: 12px;--background: var(--ion-item-background, var(--ion-background-color, #fff));margin-bottom:8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.attendance-content[data-v-cf16e0cb]{margin-left:12px}.attendance-header[data-v-cf16e0cb]{display:flex;justify-content:space-between;margin-bottom:8px}.attendance-status[data-v-cf16e0cb]{font-weight:600;font-size:.9rem}.attendance-date[data-v-cf16e0cb]{font-size:.8rem;color:var(--ion-color-medium)}.attendance-details[data-v-cf16e0cb]{font-size:.875rem;color:var(--ion-color-medium)}.detail-row[data-v-cf16e0cb]{display:flex;align-items:center;margin-bottom:4px}.detail-row ion-icon[data-v-cf16e0cb]{margin-right:8px;font-size:16px;min-width:20px}.attendance-icon[data-v-cf16e0cb]{font-size:24px}@media (min-width: 768px){.summary-cards[data-v-cf16e0cb]{gap:24px}.attendance-item[data-v-cf16e0cb]{margin:0 auto 12px;max-width:800px}}\n/*$vite$:1*/",document.head.appendChild(a);var it={class:"header-section ion-padding"},ut={class:"summary-cards"},lt={class:"summary-content"},st={class:"summary-content"},dt={key:0,class:"loading-container"},ft={key:1,class:"empty-state"},mt={key:2,class:"error-state"},pt={key:3},vt={class:"attendance-header"},bt={class:"attendance-details"},yt={class:"detail-row"},gt={class:"detail-row"},ht={key:0,class:"detail-row"},xt={key:1,class:"detail-row"},_t={slot:"end",class:"attendance-icon"},wt=r({__name:"AttendancePage",setup:function(e){var a=localStorage.getItem("parisklegg_token")||"",r=localStorage.getItem("parisklegg_user"),ot=r?JSON.parse(r):null,wt=(null==ot?void 0:ot.user_id)||0,kt=c(),At=v(),jt=Number(kt.params.id),St=i(""),Ct=i(!0),Ot=i(!1),zt=i(!1),Et=i([]),Pt=i(0),Tt=i(0),Lt=function(t){switch(null==t?void 0:t.toLowerCase()){case"present":return"var(--ion-color-success)";case"absent":return"var(--ion-color-danger)";case"late":return"var(--ion-color-warning)";case"sick":return"var(--ion-color-primary)";default:return"var(--ion-color-medium)"}},Ft=function(t){switch(null==t?void 0:t.toLowerCase()){case"present":return rt;case"absent":return at;case"late":return nt;case"sick":return et;default:return tt}},It=function(t){switch(null==t?void 0:t.toLowerCase()){case"present":return"success";case"absent":return"danger";case"late":return"warning";case"sick":return"primary";default:return"medium"}},Nt=function(){var t=o(n().m(function t(){var e,a,r;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,Ct.value=!0,Ot.value=!1,Et.value=[],Pt.value=0,Tt.value=0,t.n=1,p.get("https://klegg-app-whh7m.ondigitalocean.app/api/attendances",{headers:Dt(),timeout:2e4});case 1:e=t.v,a=e.data.filter(function(t){return t.tutorship_id===jt&&t.user_id===wt}),console.log("Filtered user attendance records:",a),a.length>0&&(zt.value=!0,St.value=a[0].tutorship_name||"My Attendance",a.forEach(function(t){"present"===t.student_attendance.toLowerCase()?Pt.value++:"absent"===t.student_attendance.toLowerCase()&&Tt.value++}),Et.value=a.sort(function(t,e){return new Date(e.attendance_date||e.created_at).getTime()-new Date(t.attendance_date||t.created_at).getTime()})),t.n=3;break;case 2:t.p=2,r=t.v,Gt(r),Ot.value=!0;case 3:return t.p=3,Ct.value=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),Dt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},Gt=function(t){if(console.error("Error fetching data:",t),p.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return At.replace("/"),void ct.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void ct.show({text:"Request timeout. Please try again",position:"top"})}ct.show({text:"Failed to load data. Please try again later",position:"top"})},Rt=function(t){var e=t.matches;b(e)},Mt=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return Rt(t),t.addEventListener("change",Rt),t};return u(function(){Mt(),Nt()}),l(o(n().m(function t(){return n().w(function(t){for(;;)switch(t.n){case 0:Mt();case 1:return t.a(2)}},t)}))),function(e,n){return B(),s(f(m),null,{default:d(function(){return[y(f(k),null,{default:d(function(){return[y(f(g),null,{default:d(function(){return[y(f(h),{slot:"start"},{default:d(function(){return[y(f(x),{"default-href":"/"})]}),_:1}),y(f(_),null,{default:d(function(){return t(n[0]||(n[0]=[w("Attendance",-1)]))}),_:1})]}),_:1})]}),_:1}),y(f($),{fullscreen:!0},{default:d(function(){return[A("div",it,[St.value?(B(),s(f(C),{key:0,class:"title"},{default:d(function(){return[w(O(St.value),1)]}),_:1})):S("",!0),A("div",ut,[y(f(z),{class:"summary-card present"},{default:d(function(){return[y(f(E),null,{default:d(function(){return[A("div",lt,[y(f(P),{icon:f(T),class:"summary-icon"},null,8,["icon"]),A("div",null,[y(f(C),{class:"summary-count"},{default:d(function(){return[w(O(Pt.value),1)]}),_:1}),y(f(C),{class:"summary-label"},{default:d(function(){return t(n[1]||(n[1]=[w("Present",-1)]))}),_:1})])])]}),_:1})]}),_:1}),y(f(z),{class:"summary-card absent"},{default:d(function(){return[y(f(E),null,{default:d(function(){return[A("div",st,[y(f(P),{icon:f(L),class:"summary-icon"},null,8,["icon"]),A("div",null,[y(f(C),{class:"summary-count"},{default:d(function(){return[w(O(Tt.value),1)]}),_:1}),y(f(C),{class:"summary-label"},{default:d(function(){return t(n[2]||(n[2]=[w("Absent",-1)]))}),_:1})])])]}),_:1})]}),_:1})])]),Ct.value?(B(),j("div",dt,[y(f(F),{name:"crescent",color:"primary"})])):zt.value||Ot.value?Ot.value?(B(),j("div",mt,[y(f(P),{icon:f(N),color:"danger"},null,8,["icon"]),y(f(C),null,{default:d(function(){return t(n[4]||(n[4]=[A("h3",null,"Error Loading Attendance",-1),A("p",null,"Please try again later",-1)]))}),_:1}),y(f(D),{fill:"clear",onClick:Nt},{default:d(function(){return t(n[5]||(n[5]=[w("Retry",-1)]))}),_:1})])):(B(),j("div",pt,[y(f(G),{lines:"none"},{default:d(function(){return[(B(!0),j(R,null,M(Et.value,function(t,e){return B(),s(f(q),{key:e},{default:d(function(){return[y(f(J),{class:"attendance-item",detail:!1},{default:d(function(){return[A("div",{slot:"start",class:"status-indicator",style:U({backgroundColor:Lt(t.student_attendance)})},null,4),y(f(K),{class:"attendance-content"},{default:d(function(){return[A("div",vt,[y(f(C),{class:"attendance-status",style:U({color:Lt(t.student_attendance)})},{default:d(function(){return[w(O(t.student_attendance),1)]}),_:2},1032,["style"]),y(f(C),{class:"attendance-date bal-text-color"},{default:d(function(){return[w(O((e=t.attendance_date||t.created_at,new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))),1)];var e}),_:2},1024)]),A("div",bt,[A("div",yt,[y(f(P),{icon:f(Y)},null,8,["icon"]),y(f(C),{class:"bal-text-color"},{default:d(function(){return[w(O(t.student_name),1)]}),_:2},1024)]),A("div",gt,[y(f(P),{icon:f(H)},null,8,["icon"]),y(f(C),{class:"bal-text-color"},{default:d(function(){return[w(O(t.teacher_name),1)]}),_:2},1024)]),t.attendance_code?(B(),j("div",ht,[y(f(P),{icon:f(Q)},null,8,["icon"]),y(f(C),{class:"bal-text-color"},{default:d(function(){return[w("Code: "+O(t.attendance_code),1)]}),_:2},1024)])):S("",!0),t.remark?(B(),j("div",xt,[y(f(P),{icon:f(V)},null,8,["icon"]),y(f(C),{class:"bal-text-color"},{default:d(function(){return[w(O(t.remark),1)]}),_:2},1024)])):S("",!0)])]}),_:2},1024),A("div",_t,[y(f(P),{icon:Ft(t.student_attendance),color:It(t.student_attendance)},null,8,["icon","color"])])]}),_:2},1024),y(f(W),{side:"end"},{default:d(function(){return[y(f(X),{color:"danger",onClick:function(e){return function(t){console.log("Reporting issue for record:",t)}(t)}},{default:d(function(){return[y(f(P),{slot:"icon-only",icon:f(Z)},null,8,["icon"])]}),_:1},8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])):(B(),j("div",ft,[y(f(P),{icon:f(I),color:"medium"},null,8,["icon"]),y(f(C),null,{default:d(function(){return t(n[3]||(n[3]=[A("h3",null,"No Attendance Records",-1),A("p",null,"Your attendance will appear here when marked by your teacher",-1)]))}),_:1})]))]}),_:1})]}),_:1})}}});e("default",ot(wt,[["__scopeId","data-v-cf16e0cb"]]))}}})}();
