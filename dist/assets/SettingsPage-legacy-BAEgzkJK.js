!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function l(n,r,a,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return o(s,"_invoke",function(n,o,r){var a,i,l,c=0,s=r||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,l=t,d.n=n,u}};function p(n,o){for(i=n,l=o,e=0;!f&&c&&!r&&e<s.length;e++){var r,a=s[e],p=d.p,g=a[2];n>3?(r=g===o)&&(l=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((r=n<2&&p<a[1])?(i=0,d.v=o,d.n=a[1]):p<g&&(r=n<3||a[0]>o||o>g)&&(a[4]=n,a[5]=o,d.n=g,i=0))}if(r||n>1)return u;throw f=!0,o}return function(r,s,g){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,g),i=s,l=g;(e=i<2?t:l)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,l)):d.n=l:d.v=l);try{if(c=2,a){if(i||(r="next"),e=a[r]){if(!(e=e.call(a,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=t}else if((e=(f=d.n<0)?l:n.call(o,d))!==u)break}catch(e){a=t,i=1,l=e}finally{c=1}}return{value:e,done:f}}}(n,a,i),!0),s}var u={};function c(){}function s(){}function f(){}e=Object.getPrototypeOf;var d=[][a]?e(e([][a]())):(o(e={},a,function(){return this}),e),p=f.prototype=c.prototype=Object.create(d);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return s.prototype=f,o(p,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,a,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:l,m:g}})()}function o(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}o=function(t,e,n,r){function i(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},o(t,e,n,r)}function r(t,e,n,o,r,a,i){try{var l=t[a](i),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(o,r)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function l(t){r(i,o,a,l,u,"next",t)}function u(t){r(i,o,a,l,u,"throw",t)}l(void 0)})}}System.register(["./index-legacy-DGDcVX8Z.js","./index-legacy-DbX0QY3B.js"],function(e,o){"use strict";var r,i,l,u,c,s,f,d,p,g,m,v,h,b,y,_,w,k,x,S,j,C,P,A,O,I,T,E,G,L,K,M,N,U,V,D,F,q,z,B,$,R,W;return{setters:[function(t){r=t.ae,i=t.af,l=t.d,u=t.r,c=t.o,s=t.S,f=t.a,d=t.b,p=t.w,g=t.u,m=t.I,v=t.g,h=t.h,b=t.l,y=t.A,_=t.q,w=t.k,k=t.s,x=t.a9,S=t.t,j=t.a4,C=t.ag,P=t.K,A=t.a7,O=t.n,I=t.ah,T=t.ai,E=t.aj,G=t.ak,L=t.aa,K=t.al,M=t.am,N=t.an,U=t.ao,V=t.m,D=t.ap,F=t.aq,q=t.M,z=t.e,B=t.f,$=t.N,R=t._},function(t){W=t.T}],execute:function(){var J=document.createElement("style");J.textContent=".profile-section[data-v-3f9bb384]{display:flex;align-items:center;padding:20px;background:#fff;border-radius:10px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,.05)}.profile-img[data-v-3f9bb384]{width:72px;height:72px;border-radius:50%;margin-right:16px;object-fit:cover;border:2px solid #f4f4f4}.profile-info h2[data-v-3f9bb384]{font-size:1.1rem;margin:0 0 4px;font-weight:600;color:#333}.profile-info p[data-v-3f9bb384]{color:#666;margin:0 0 4px;font-size:.9rem}.settings-list[data-v-3f9bb384]{background:transparent;margin-bottom:24px}.settings-list ion-item[data-v-3f9bb384]{--padding-start: 12px;--padding-end: 12px;--min-height: 56px;--border-color: rgba(0, 0, 0, .08)}.logout-section[data-v-3f9bb384]{display:flex;justify-content:center;margin-top:8px}.logout-button[data-v-3f9bb384]{--padding-start: 12px;--padding-end: 12px;--background-activated: rgba(244, 67, 54, .1);font-weight:500}.logout-button[data-v-3f9bb384]:hover{color:var(--ion-color-danger)}\n/*$vite$:1*/",document.head.appendChild(J);var H=r("Share",{web:function(){return i(function(){return o.import("./web-legacy-DGc10JH8.js")},void 0).then(function(t){return new t.ShareWeb})}}),Q={class:"profile-section"},X=["src"],Y={class:"profile-info"},Z={key:0},tt={class:"logout-section"},et="https://www.gravatar.com/avatar/?d=mp",nt=l({__name:"SettingsPage",setup:function(e){var o=B(),r=u({name:"",id:0,otp:0,phone:""}),i=["Close"],l=u(!1),R=localStorage.getItem("parisklegg_token")||"",J=null,nt=u(!1);c(a(n().m(function t(){var e,o,a,i;return n().w(function(t){for(;;)switch(t.n){case 0:e=localStorage.getItem("darkMode"),(o=localStorage.getItem("parisklegg_user"))&&((a=JSON.parse(o))&&(r.value.name=a.fullname,r.value.id=a.user_id,r.value.email=a.username,r.value.image=a.profile_photo_path||et,J=a.user_id),console.log("User data:",a.user_id)),null!==e?(nt.value="true"===e,document.body.classList.toggle("dark",nt.value)):(i=window.matchMedia("(prefers-color-scheme: dark)"),nt.value=i.matches,document.body.classList.toggle("dark",nt.value),i.addEventListener("change",function(t){nt.value=t.matches,document.body.classList.toggle("dark",nt.value)}));case 1:return t.a(2)}},t)}))),s.setOverlaysWebView({overlay:!1}),s.setBackgroundColor({color:"#ffffff"}),s.setStyle({style:f.Light});var ot=function(){var t=a(n().m(function t(){return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,H.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),rt=function(t){window.location.href=t},at=function(){var t=a(n().m(function t(){var e,r,a;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return l.value=!0,t.p=1,t.n=2,z.post("https://klegg-app-whh7m.ondigitalocean.app/api/logout",{user_id:J,bearer_token:R},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(R)}});case 2:e=t.v,r=e.data,console.log(r.data),!0===r.success&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),o.replace("/")),t.n=4;break;case 3:t.p=3,a=t.v,it(a);case 4:return t.p=4,l.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),it=function(t){if(console.error("Error fetching data:",t),z.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return o.replace("/"),void W.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void W.show({text:"Request timeout. Please try again",position:"top"})}W.show({text:"Failed to load data. Please try again later",position:"top"})};return function(e,n){return $(),d(g(m),null,{default:p(function(){return[v(g(_),null,{default:p(function(){return[v(g(h),null,{default:p(function(){return[v(g(b),null,{default:p(function(){return t(n[6]||(n[6]=[y("Settings",-1)]))}),_:1})]}),_:1})]}),_:1}),v(g(q),{class:"ion-padding"},{default:p(function(){return[w("div",Q,[w("img",{src:r.value.image||et,class:"profile-img",alt:"Profile Picture"},null,8,X),w("div",Y,[w("h2",null,S(r.value.name||"User Name"),1),r.value.phone?($(),k("p",Z,S(r.value.phone||"Phone"),1)):x("",!0),w("p",null,S(r.value.email||"Email"),1)])]),v(g(j),{lines:"full",class:"settings-list"},{default:p(function(){return[v(g(C),null,{default:p(function(){return[v(g(P),null,{default:p(function(){return t(n[7]||(n[7]=[y("Appearance",-1)]))}),_:1})]}),_:1}),v(g(A),{lines:"none"},{default:p(function(){return[v(g(O),{slot:"start",icon:g(I),color:"medium"},null,8,["icon"]),v(g(P),null,{default:p(function(){return t(n[8]||(n[8]=[y("Dark Mode",-1)]))}),_:1}),v(g(T),{slot:"end",modelValue:nt.value,"onUpdate:modelValue":n[0]||(n[0]=function(t){return nt.value=t}),onIonChange:n[1]||(n[1]=function(t){return e=t.detail.checked,document.body.classList.toggle("dark",e),void localStorage.setItem("darkMode",e);var e})},null,8,["modelValue"])]}),_:1})]}),_:1}),v(g(j),{lines:"full",class:"settings-list"},{default:p(function(){return[v(g(C),null,{default:p(function(){return[v(g(P),null,{default:p(function(){return t(n[9]||(n[9]=[y("General",-1)]))}),_:1})]}),_:1}),v(g(A),{button:"",detail:!0,onClick:n[2]||(n[2]=function(t){return rt("https://legal.klgilc.com/privacy-policy.html")})},{default:p(function(){return[v(g(O),{slot:"start",icon:g(E),color:"medium"},null,8,["icon"]),v(g(P),null,{default:p(function(){return t(n[10]||(n[10]=[y("Privacy Policy",-1)]))}),_:1})]}),_:1}),v(g(A),{button:"",detail:!0,onClick:n[3]||(n[3]=function(t){return rt("https://legal.klgilc.com/terms-of-service.html")})},{default:p(function(){return[v(g(O),{slot:"start",icon:g(G),color:"medium"},null,8,["icon"]),v(g(P),null,{default:p(function(){return t(n[11]||(n[11]=[y("Terms of Service",-1)]))}),_:1})]}),_:1}),v(g(A),{button:"",detail:!0,onClick:n[4]||(n[4]=function(t){return rt("https://wa.me/+233208345390")})},{default:p(function(){return[v(g(O),{slot:"start",icon:g(L),color:"medium"},null,8,["icon"]),v(g(P),null,{default:p(function(){return t(n[12]||(n[12]=[y("Contact Support",-1)]))}),_:1})]}),_:1}),v(g(A),{button:"",detail:!0,onClick:n[5]||(n[5]=function(t){return rt("https://legal.klgilc.com/account-deletion.html")})},{default:p(function(){return[v(g(O),{slot:"start",icon:g(K),color:"medium"},null,8,["icon"]),v(g(P),null,{default:p(function(){return t(n[13]||(n[13]=[y("Delete Account",-1)]))}),_:1})]}),_:1}),v(g(A),{button:"",detail:!0,onClick:ot},{default:p(function(){return[v(g(O),{slot:"start",icon:g(M),color:"medium"},null,8,["icon"]),v(g(P),null,{default:p(function(){return t(n[14]||(n[14]=[y("Share App",-1)]))}),_:1})]}),_:1}),v(g(A),{button:"",id:"about-alert",detail:!0},{default:p(function(){return[v(g(O),{slot:"start",icon:g(N),color:"medium"},null,8,["icon"]),v(g(P),null,{default:p(function(){return t(n[15]||(n[15]=[y("About",-1)]))}),_:1})]}),_:1}),v(g(U),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.1",message:"Ⓒ 2025 - Klegg Institute of Language and Communication.",buttons:i})]}),_:1}),w("div",tt,[v(g(V),{fill:"clear",color:"medium",onClick:at,class:"logout-button"},{default:p(function(){return[v(g(O),{slot:"start",icon:g(D)},null,8,["icon"]),n[16]||(n[16]=y(" Sign Out ",-1))]}),_:1})]),v(g(F),{"is-open":l.value,message:"Please wait..."},null,8,["is-open"])]}),_:1})]}),_:1})}}});e("default",R(nt,[["__scopeId","data-v-3f9bb384"]]))}}})}();
