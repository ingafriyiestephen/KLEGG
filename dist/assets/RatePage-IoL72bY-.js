import{d as w,ao as S,r,c as D,o as R,a as v,w as t,u as e,I as V,f as A,g as a,h as P,j as E,aq as F,m as H,B as g,s as M,y as N,z as $,A as j,aQ as z,D as G,l as _,v as p,S as L,R as O,a2 as U,t as Y,a6 as q,aT as J,n as Q,x as W,N as K,b0 as X,b as Z,O as u,p as ee,U as ae,_ as te}from"./index-D6yZBIDx.js";const oe={class:"stars-container"},se={class:"stars"},ne={key:0,class:"rating-hint"},le={key:1,class:"rating-hint"},re={key:1},ue=w({__name:"RatePage",setup(ie){const h=localStorage.getItem("parisklegg_token")||"",k=S().params.id||1;r("Advanced Mathematics"),r("Dr. Sarah Johnson");const n=r(0),d=r(""),i=r(!1),m=r(""),c=r(!1),I=["Poor","Fair","Good","Very Good","Excellent"],b=D(()=>I[n.value-1]),y=s=>{n.value=s},T=async()=>{try{i.value=!0,await Z.post("https://klegg-app-whh7m.ondigitalocean.app/api/courses/".concat(k,"/ratings"),{rating:n.value,comment:d.value},{headers:x(),timeout:2e4}),m.value="Thank you for your feedback!",c.value=!0,C()}catch(s){m.value="Failed to submit rating. Please try again.",c.value=!0,console.error(s)}finally{i.value=!1}},C=()=>{n.value=0,d.value=""},x=()=>({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(h)}),f=s=>{const o=s.matches;A(o)},B=()=>{const s=window.matchMedia("(prefers-color-scheme: dark)");return f(s),s.addEventListener("change",f),s};return R(()=>{B()}),(s,o)=>(u(),v(e(V),null,{default:t(()=>[a(e(M),null,{default:t(()=>[a(e(P),{color:"primary"},{default:t(()=>[a(e(E),{slot:"start"},{default:t(()=>[a(e(F),{"default-href":"/courses"})]),_:1}),a(e(H),null,{default:t(()=>[...o[2]||(o[2]=[g("Course Rating",-1)])]),_:1})]),_:1})]),_:1}),a(e(K),{class:"ion-padding",fullscreen:!0},{default:t(()=>[a(e(N),{class:"rating-card"},{default:t(()=>[a(e($),null,{default:t(()=>[a(e(j),null,{default:t(()=>[...o[3]||(o[3]=[g("Share Your Experience",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[4]||(o[4]=[g("How would you rate this course?",-1)])]),_:1})]),_:1}),a(e(G),null,{default:t(()=>[_("div",oe,[_("div",se,[(u(),p(O,null,L(5,l=>a(e(ee),{key:l,icon:l<=n.value?l:e(ae),color:l<=n.value?"warning":"medium",size:"large",onClick:ce=>y(l),class:"star-icon"},null,8,["icon","color","onClick"])),64))]),a(e(U),{color:"medium"},{default:t(()=>[n.value===0?(u(),p("p",ne,"Tap to rate")):(u(),p("p",le,Y(b.value),1))]),_:1})]),a(e(q),{class:"feedback-item",lines:"none"},{default:t(()=>[a(e(J),{label:"Your feedback (optional)","label-placement":"floating",placeholder:"What did you like or think could be improved?",modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=l=>d.value=l),counter:!0,disabled:i.value},null,8,["modelValue","disabled"])]),_:1}),a(e(Q),{expand:"block",shape:"round",disabled:n.value===0||i.value,onClick:T,class:"submit-button"},{default:t(()=>[i.value?(u(),v(e(W),{key:0,name:"crescent"})):(u(),p("span",re,"Submit Rating"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(e(X),{"is-open":c.value,message:m.value,duration:2e3,onDidDismiss:o[1]||(o[1]=l=>c.value=!1),position:"top"},null,8,["is-open","message"])]),_:1}))}}),me=te(ue,[["__scopeId","data-v-a8cc4dcd"]]);export{me as default};
