!function(){function t(t,a){return function(t){if(Array.isArray(t))return t}(t)||function(t,a){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,e,r,i,c=[],d=!0,l=!1;try{if(r=(n=n.call(t)).next,0===a){if(Object(n)!==n)return;d=!1}else for(;!(d=(o=r.call(n)).done)&&(c.push(o.value),c.length!==a);d=!0);}catch(t){l=!0,e=t}finally{try{if(!d&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw e}}return c}}(t,a)||i(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,o,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",i=e.toStringTag||"@@toStringTag";function c(a,e,r,i){var c=e&&e.prototype instanceof l?e:l,u=Object.create(c.prototype);return n(u,"_invoke",function(a,n,e){var r,i,c,l=0,u=e||[],s=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(a,n){return r=a,i=0,c=t,p.n=n,d}};function f(a,n){for(i=a,c=n,o=0;!s&&l&&!e&&o<u.length;o++){var e,r=u[o],f=p.p,v=r[2];a>3?(e=v===n)&&(c=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=t):r[0]<=f&&((e=a<2&&f<r[1])?(i=0,p.v=n,p.n=r[1]):f<v&&(e=a<3||r[0]>n||n>v)&&(r[4]=a,r[5]=n,p.n=v,i=0))}if(e||a>1)return d;throw s=!0,n}return function(e,u,v){if(l>1)throw TypeError("Generator is already running");for(s&&1===u&&f(u,v),i=u,c=v;(o=i<2?t:c)||!s;){r||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(l=2,r){if(i||(e="next"),o=r[e]){if(!(o=o.call(r,c)))throw TypeError("iterator result is not an object");if(!o.done)return o;c=o.value,i<2&&(i=0)}else 1===i&&(o=r.return)&&o.call(r),i<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),i=1);r=t}else if((o=(s=p.n<0)?c:a.call(n,p))!==d)break}catch(o){r=t,i=1,c=o}finally{l=1}}return{value:o,done:s}}}(a,r,i),!0),u}var d={};function l(){}function u(){}function s(){}o=Object.getPrototypeOf;var p=[][r]?o(o([][r]())):(n(o={},r,function(){return this}),o),f=s.prototype=l.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,n(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,n(f,"constructor",s),n(s,"constructor",u),u.displayName="GeneratorFunction",n(s,i,"GeneratorFunction"),n(f),n(f,i,"Generator"),n(f,r,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m:v}})()}function n(t,a,o,e){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}n=function(t,a,o,e){function i(a,o){n(t,a,function(t){return this._invoke(a,o,t)})}a?r?r(t,a,{value:o,enumerable:!e,configurable:!e,writable:!e}):t[a]=o:(i("next",0),i("throw",1),i("return",2))},n(t,a,o,e)}function o(t,a,n,o,e,r,i){try{var c=t[r](i),d=c.value}catch(t){return void n(t)}c.done?a(d):Promise.resolve(d).then(o,e)}function e(t){return function(){var a=this,n=arguments;return new Promise(function(e,r){var i=t.apply(a,n);function c(t){o(i,e,r,c,d,"next",t)}function d(t){o(i,e,r,c,d,"throw",t)}c(void 0)})}}function r(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,a){if(t){if("string"==typeof t)return c(t,a);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,a):void 0}}function c(t,a){(null==a||a>t.length)&&(a=t.length);for(var n=0,o=Array(a);n<a;n++)o[n]=t[n];return o}System.register(["./index-legacy-DacpHz19.js","./index-legacy-Dgim11H5.js"],function(n,o){"use strict";var i,c,d,l,u,s,p,f,v,b,g,m,x,h,y,k,w,_,j,q,S,z,A,T,O,E,C,D,N,P,G,I,L,R,M,F,B,H,U,Y,$,J,K;return{setters:[function(t){i=t.d,c=t.r,d=t.c,l=t.o,u=t.a,s=t.w,p=t.u,f=t.I,v=t.i,b=t.b,g=t.e,m=t.f,x=t.g,h=t.h,y=t.j,k=t.k,w=t.l,_=t.m,j=t.t,q=t.n,S=t.p,z=t.q,A=t.s,T=t.v,O=t.x,E=t.y,C=t.z,D=t.A,N=t.B,P=t.C,G=t.D,I=t.E,L=t.F,R=t.G,M=t.H,F=t.J,B=t.K,H=t.L,U=t.M,Y=t.N,$=t.O,J=t._},function(t){K=t.T}],execute:function(){var o=document.createElement("style");o.textContent="ion-toolbar[data-v-cba0468d]{--background: linear-gradient( 135deg, var(--ion-color-primary), var(--ion-color-secondary) );--color: white;--min-height: 80px;--border-color: transparent}.toolbar-avatar[data-v-cba0468d]{width:40px;height:40px;margin-right:12px;border:2px solid rgba(255,255,255,.3)}.toolbar-title[data-v-cba0468d]{padding-left:8px}.greeting[data-v-cba0468d]{font-size:14px;font-weight:400;opacity:.9}.student-name[data-v-cba0468d]{font-size:18px;font-weight:600}.loading-container[data-v-cba0468d]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;text-align:center;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-cba0468d]{width:48px;height:48px;margin-bottom:16px;color:var(--ion-color-primary)}.loading-container p[data-v-cba0468d]{color:var(--ion-color-medium);margin-top:8px}.content-card[data-v-cba0468d]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);background:var(--ion-card-background);border:1px solid var(--ion-border-color)}ion-card-header[data-v-cba0468d]{padding-bottom:8px;border-bottom:1px solid var(--ion-border-color)}ion-card-title[data-v-cba0468d]{display:flex;align-items:center;font-size:18px;font-weight:600;color:var(--ion-text-color)}ion-card-title ion-icon[data-v-cba0468d]{margin-right:8px;color:var(--ion-color-primary)}ion-card-content[data-v-cba0468d]{padding-top:0;color:var(--ion-text-color)}.notification-content[data-v-cba0468d],.attendance-content[data-v-cba0468d]{margin-bottom:16px}.notification-content p[data-v-cba0468d],.attendance-content p[data-v-cba0468d]{margin-bottom:4px;color:var(--ion-text-color);opacity:.9}ion-note[data-v-cba0468d]{font-size:14px;color:var(--ion-color-medium)}.empty-state[data-v-cba0468d]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px 0;text-align:center;color:var(--ion-color-medium);background:var(--ion-background-color)}.empty-state ion-icon[data-v-cba0468d]{font-size:48px;margin-bottom:8px;opacity:.5;color:var(--ion-color-medium)}.empty-state p[data-v-cba0468d]{margin:0;font-size:14px}.view-all-button[data-v-cba0468d]{--color: var(--ion-color-primary);--background: transparent;margin-top:8px}.view-all-button[data-v-cba0468d]:hover{--background: var(--ion-color-light-shade)}.quick-actions-container[data-v-cba0468d]{padding:8px 4px!important}.quick-actions-grid[data-v-cba0468d]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;width:100%}.action-item[data-v-cba0468d]{display:flex;flex-direction:column;align-items:center;padding:16px 8px;border-radius:16px;background:var(--ion-item-background);border:1px solid var(--ion-border-color);cursor:pointer;transition:all .2s ease;min-height:90px;justify-content:center;position:relative}.action-item[data-v-cba0468d]:active{background:var(--ion-color-light-shade);transform:scale(.98)}.action-icon-wrapper[data-v-cba0468d]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:50%;margin-bottom:8px;transition:all .2s ease;background:var(--ion-color-primary)}.action-icon[data-v-cba0468d]{font-size:20px;color:#fff!important}.action-label[data-v-cba0468d]{font-size:12px;font-weight:500;text-align:center;color:var(--ion-text-color);line-height:1.3;padding:0 2px}@media (prefers-color-scheme: dark){.action-item[data-v-cba0468d]{background:var(--ion-color-step-150);border-color:var(--ion-border-color)}.action-icon-wrapper[data-v-cba0468d]{background:var(--ion-color-primary)}.action-item[data-v-cba0468d]:active{background:var(--ion-color-step-200)}}.ios .action-item[data-v-cba0468d]{border-radius:18px;min-height:92px}.android .action-item[data-v-cba0468d]{border-radius:12px;min-height:88px}.ios .action-label[data-v-cba0468d]{font-weight:600}.android .action-label[data-v-cba0468d]{font-weight:500}@media (max-width: 360px){.quick-actions-grid[data-v-cba0468d]{gap:8px}.action-item[data-v-cba0468d]{padding:12px 6px;min-height:80px}.action-icon-wrapper[data-v-cba0468d]{width:42px;height:42px}.action-icon[data-v-cba0468d]{font-size:18px}.action-label[data-v-cba0468d]{font-size:11px}}@media (min-width: 410px){.quick-actions-grid[data-v-cba0468d]{gap:16px}.action-item[data-v-cba0468d]{padding:20px 12px;min-height:100px}}@media (min-width: 768px){.quick-actions-container[data-v-cba0468d]{padding:16px 8px!important}.quick-actions-grid[data-v-cba0468d]{gap:24px;max-width:400px;margin:0 auto}.action-item[data-v-cba0468d]{padding:24px 16px;min-height:110px}.action-icon-wrapper[data-v-cba0468d]{width:56px;height:56px}.action-icon[data-v-cba0468d]{font-size:24px}.action-label[data-v-cba0468d]{font-size:13px}}.action-item[data-v-cba0468d]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}@supports (padding: max(0px)){.quick-actions-container[data-v-cba0468d]{padding-left:max(8px,env(safe-area-inset-left))!important;padding-right:max(8px,env(safe-area-inset-right))!important}}@media (prefers-reduced-motion: reduce){.action-item[data-v-cba0468d],.action-icon-wrapper[data-v-cba0468d]{transition:none}.action-item[data-v-cba0468d]:active{transform:none}}ion-tab-bar[data-v-cba0468d]{--background: var(--ion-card-background);--border: 1px solid var(--ion-border-color);box-shadow:0 -2px 10px rgba(0,0,0,.08);padding-top:8px;padding-bottom:calc(8px + env(safe-area-inset-bottom));height:auto;min-height:60px}ion-tab-button[data-v-cba0468d]{--color: var(--ion-color-medium);--color-selected: var(--ion-color-primary);--background: transparent;--background-focused: var(--ion-color-step-100)}ion-tab-button ion-icon[data-v-cba0468d]{font-size:24px;margin-bottom:4px}ion-tab-button ion-label[data-v-cba0468d]{font-size:12px;margin-top:0;font-weight:500}.dark .content-card[data-v-cba0468d]{box-shadow:0 4px 12px rgba(0,0,0,.3)}.dark .quick-action-button[data-v-cba0468d]{--background: var(--ion-color-step-150);border-color:var(--ion-border-color)}.dark .quick-action-button .action-icon[data-v-cba0468d]{background:var(--ion-color-step-200)}.dark ion-tab-bar[data-v-cba0468d]{box-shadow:0 -2px 10px rgba(0,0,0,.3)}.quick-action-button[data-v-cba0468d]:focus-visible,ion-tab-button[data-v-cba0468d]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.quick-action-button[data-v-cba0468d]:active{transform:translateY(1px)}@media (max-width: 400px){.quick-actions-grid[data-v-cba0468d]{grid-template-columns:repeat(2,1fr);gap:8px}.quick-action-button[data-v-cba0468d]{--padding-top: 8px;--padding-bottom: 8px}.quick-action-button .action-icon[data-v-cba0468d]{width:40px;height:40px}.quick-action-button ion-icon[data-v-cba0468d]{font-size:20px}ion-tab-button ion-icon[data-v-cba0468d]{font-size:22px}ion-tab-button ion-label[data-v-cba0468d]{font-size:11px}}@media (min-width: 768px){.content-card[data-v-cba0468d]{margin:16px auto;max-width:600px}.quick-actions-grid[data-v-cba0468d]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (prefers-contrast: high){.content-card[data-v-cba0468d],.quick-action-button[data-v-cba0468d]{border:2px solid var(--ion-border-color)}ion-tab-bar[data-v-cba0468d]{--border: 2px solid var(--ion-border-color)}}@media (prefers-reduced-motion: reduce){.quick-action-button[data-v-cba0468d]{transition:none}.quick-action-button[data-v-cba0468d]:active{transform:none}}@supports (padding: max(0px)){.content-card[data-v-cba0468d]{margin-left:max(16px,env(safe-area-inset-left));margin-right:max(16px,env(safe-area-inset-right))}ion-tab-bar[data-v-cba0468d]{padding-left:max(0px,env(safe-area-inset-left));padding-right:max(0px,env(safe-area-inset-right))}}\n/*$vite$:1*/",document.head.appendChild(o);var Q=["src"],V={class:"greeting"},W={class:"student-name"},X={key:0,class:"loading-container"},Z={key:1},tt={key:0,class:"notification-content"},at={key:1,class:"empty-state"},nt={key:0,class:"attendance-content"},ot={key:1,class:"empty-state"},et={class:"quick-actions-grid"},rt={class:"action-icon-wrapper"},it={class:"action-icon-wrapper"},ct={class:"action-icon-wrapper"},dt=i({__name:"HomePage",setup:function(n){var o=localStorage.getItem("parisklegg_token")||"",i=localStorage.getItem("parisklegg_user"),J=i?JSON.parse(i):null,dt=(null==J?void 0:J.fullname)||"",lt=g(),ut=c(!0),st=c([]),pt=c([]),ft=d(function(){var t=(new Date).getHours();return t<12?"Good Morning":t<18?"Good Afternoon":"Good Evening"}),vt=d(function(){return st.value.length>0?st.value[0]:null}),bt=d(function(){if(pt.value.length>0){var t=r(pt.value).sort(function(t,a){return new Date(a.created_at).getTime()-new Date(t.created_at).getTime()})[0];return console.log("Latest attendance:",t),t}return console.log("No attendances available"),null});d(function(){try{return pt.value&&pt.value.length>0?r(pt.value).sort(function(t,a){return new Date(a.created_at).getTime()-new Date(t.created_at).getTime()})[0]:null}catch(t){return console.error("Error processing attendance data:",t),null}});var gt=d(function(){return"/assets/img/login-logo.png"}),mt=function(){var t=document.body;t.classList.remove("ios","android"),v("ios")?t.classList.add("ios"):v("android")&&t.classList.add("android")},xt=function(t){if(!t)return"Recently";var a=new Date(t),n=new Date,o=Math.abs(n.getTime()-a.getTime()),e=Math.floor(o/864e5);return 0===e?"Today":1===e?"Yesterday":e<7?"".concat(e," days ago"):a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},ht=function(){return lt.push("/tutorships")},yt=function(){return lt.push("/notifications")},kt=function(){return lt.push("/settings")},wt=function(){var t=e(a().m(function t(){var n;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return ut.value=!0,t.p=1,t.n=2,_t();case 2:return t.n=3,K.show({text:"Data refreshed",position:"top"});case 3:t.n=5;break;case 4:return t.p=4,n=t.v,console.error("Refresh error:",n),t.n=5,K.show({text:"Refresh failed",position:"top"});case 5:return t.p=5,ut.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[1,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),_t=function(){var n=e(a().m(function n(){var o,e,r,i,c;return a().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,a.n=1,Promise.all([b.get("https://klegg-app-whh7m.ondigitalocean.app/api/notifications",{headers:jt()}),b.get("https://klegg-app-whh7m.ondigitalocean.app/api/attendances",{headers:jt()})]);case 1:o=a.v,e=t(o,2),r=e[0],i=e[1],st.value=r.data.data||[],pt.value=i.data||[],console.log("Notifications loaded:",st.value),console.log("Attendances loaded:",pt.value),a.n=3;break;case 2:a.p=2,c=a.v,qt(c);case 3:return a.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),jt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(o)}},qt=function(t){if(console.error("Error fetching data:",t),b.isAxiosError(t)){var a;if(401===(null===(a=t.response)||void 0===a?void 0:a.status))return lt.replace("/"),void K.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void K.show({text:"Request timeout. Please try again",position:"top"})}K.show({text:"Failed to load data. Please try again later",position:"top"})},St=function(t){var a=t.matches;m(a)},zt=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return St(t),t.addEventListener("change",St),t};return l(e(a().m(function t(){var n;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,mt(),zt(),t.n=1,_t();case 1:t.n=3;break;case 2:t.p=2,n=t.v,console.error("Initialization error:",n);case 3:return t.p=3,ut.value=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}))),function(t,a){var n=H("ion-text");return $(),u(p(f),null,{default:s(function(){return[x(p(A),{class:"ion-no-border"},{default:s(function(){return[x(p(h),null,{default:s(function(){return[x(p(y),{slot:"start"},{default:s(function(){return[x(p(k),{class:"toolbar-avatar"},{default:s(function(){return[w("img",{src:gt.value,alt:"Student"},null,8,Q)]}),_:1})]}),_:1}),x(p(_),{class:"toolbar-title"},{default:s(function(){return[w("div",V,j(ft.value),1),w("div",W,j(p(dt)),1)]}),_:1}),x(p(y),{slot:"end"},{default:s(function(){return[x(p(q),{onClick:wt,fill:"clear"},{default:s(function(){return[x(p(S),{icon:p(z),slot:"icon-only"},null,8,["icon"])]}),_:1})]}),_:1})]}),_:1})]}),_:1}),x(p(Y),{fullscreen:!0},{default:s(function(){return[ut.value?($(),T("div",X,[x(p(O),{name:"crescent"}),a[0]||(a[0]=w("p",null,"Loading your data...",-1))])):($(),T("div",Z,[x(p(E),{class:"content-card"},{default:s(function(){return[x(p(C),null,{default:s(function(){return[x(p(D),null,{default:s(function(){return[x(p(S),{icon:p(P)},null,8,["icon"]),a[1]||(a[1]=N(" Recent Updates ",-1))]}),_:1})]}),_:1}),x(p(G),null,{default:s(function(){return[vt.value?($(),T("div",tt,[w("p",null,j((t=vt.value.body,n=100,t?t.length>n?t.substring(0,n)+"...":t:"")),1),x(p(I),null,{default:s(function(){return[N(j(xt(vt.value.created_at)),1)]}),_:1})])):($(),T("div",at,[x(p(S),{icon:p(L)},null,8,["icon"]),a[2]||(a[2]=w("p",null,"No recent updates",-1))])),x(p(q),{expand:"block",fill:"clear",size:"small",onClick:yt,class:"view-all-button"},{default:s(function(){return[N(" View All Notifications ("+j(st.value.length)+") ",1)]}),_:1})];var t,n}),_:1})]}),_:1}),x(p(E),{class:"content-card"},{default:s(function(){return[x(p(C),null,{default:s(function(){return[x(p(D),null,{default:s(function(){return[x(p(S),{icon:p(R)},null,8,["icon"]),a[3]||(a[3]=N(" Recent Attendance ",-1))]}),_:1})]}),_:1}),x(p(G),null,{default:s(function(){return[bt.value?($(),T("div",nt,[w("p",null,[a[4]||(a[4]=N(" You were marked ",-1)),w("strong",null,j(bt.value.student_attendance),1),a[5]||(a[5]=N(" in ",-1)),w("strong",null,j(bt.value.tutorship_name),1)]),x(p(I),null,{default:s(function(){return[N(j(xt(bt.value.attendance_date)||xt(bt.value.created_at)),1)]}),_:1})])):($(),T("div",ot,[x(p(S),{icon:p(M)},null,8,["icon"]),a[6]||(a[6]=w("p",null,"No attendance records yet",-1))]))]}),_:1})]}),_:1}),x(p(E),{class:"content-card"},{default:s(function(){return[x(p(C),null,{default:s(function(){return[x(p(D),null,{default:s(function(){return[x(p(S),{icon:p(F)},null,8,["icon"]),a[7]||(a[7]=N(" Quick Actions ",-1))]}),_:1})]}),_:1}),x(p(G),{class:"quick-actions-container"},{default:s(function(){return[w("div",et,[w("div",{class:"action-item",onClick:ht},[w("div",rt,[x(p(S),{icon:p(B),class:"action-icon"},null,8,["icon"])]),x(n,{class:"action-label"},{default:s(function(){return r(a[8]||(a[8]=[N("Classes",-1)]))}),_:1})]),w("div",{class:"action-item",onClick:yt},[w("div",it,[x(p(S),{icon:p(P),class:"action-icon"},null,8,["icon"])]),x(n,{class:"action-label"},{default:s(function(){return r(a[9]||(a[9]=[N("Notifications",-1)]))}),_:1})]),w("div",{class:"action-item",onClick:kt},[w("div",ct,[x(p(S),{icon:p(U),class:"action-icon"},null,8,["icon"])]),x(n,{class:"action-label"},{default:s(function(){return r(a[10]||(a[10]=[N("Settings",-1)]))}),_:1})])])]}),_:1})]}),_:1})]))]}),_:1})]}),_:1})}}});n("default",J(dt,[["__scopeId","data-v-cba0468d"]]))}}})}();
