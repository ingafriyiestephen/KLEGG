!function(){function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",i=e.toStringTag||"@@toStringTag";function c(t,e,n,i){var c=e&&e.prototype instanceof s?e:s,d=Object.create(c.prototype);return o(d,"_invoke",function(t,o,e){var n,i,c,s=0,d=e||[],u=!1,p={p:0,n:0,v:a,a:v,f:v.bind(a,4),d:function(t,o){return n=t,i=0,c=a,p.n=o,l}};function v(t,o){for(i=t,c=o,r=0;!u&&s&&!e&&r<d.length;r++){var e,n=d[r],v=p.p,b=n[2];t>3?(e=b===o)&&(c=n[(i=n[4])?5:(i=3,3)],n[4]=n[5]=a):n[0]<=v&&((e=t<2&&v<n[1])?(i=0,p.v=o,p.n=n[1]):v<b&&(e=t<3||n[0]>o||o>b)&&(n[4]=t,n[5]=o,p.n=b,i=0))}if(e||t>1)return l;throw u=!0,o}return function(e,d,b){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&v(d,b),i=d,c=b;(r=i<2?a:c)||!u;){n||(i?i<3?(i>1&&(p.n=-1),v(i,c)):p.n=c:p.v=c);try{if(s=2,n){if(i||(e="next"),r=n[e]){if(!(r=r.call(n,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=n.return)&&r.call(n),i<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),i=1);n=a}else if((r=(u=p.n<0)?c:t.call(o,p))!==l)break}catch(r){n=a,i=1,c=r}finally{s=1}}return{value:r,done:u}}}(t,n,i),!0),d}var l={};function s(){}function d(){}function u(){}r=Object.getPrototypeOf;var p=[][n]?r(r([][n]())):(o(r={},n,function(){return this}),r),v=u.prototype=s.prototype=Object.create(p);function b(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,u):(a.__proto__=u,o(a,i,"GeneratorFunction")),a.prototype=Object.create(v),a}return d.prototype=u,o(v,"constructor",u),o(u,"constructor",d),d.displayName="GeneratorFunction",o(u,i,"GeneratorFunction"),o(v),o(v,i,"Generator"),o(v,n,function(){return this}),o(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:b}})()}function o(a,t,r,e){var n=Object.defineProperty;try{n({},"",{})}catch(a){n=0}o=function(a,t,r,e){function i(t,r){o(a,t,function(a){return this._invoke(t,r,a)})}t?n?n(a,t,{value:r,enumerable:!e,configurable:!e,writable:!e}):a[t]=r:(i("next",0),i("throw",1),i("return",2))},o(a,t,r,e)}function r(a,t){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),o.push.apply(o,r)}return o}function e(a){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach(function(t){n(a,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(o,t))})}return a}function n(t,o,r){return(o=function(t){var o=function(t,o){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,o||"default");if("object"!=a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"==a(o)?o:o+""}(o))in t?Object.defineProperty(t,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[o]=r,t}function i(a,t,o,r,e,n,i){try{var c=a[n](i),l=c.value}catch(a){return void o(a)}c.done?t(l):Promise.resolve(l).then(r,e)}function c(a){return function(){var t=this,o=arguments;return new Promise(function(r,e){var n=a.apply(t,o);function c(a){i(n,r,e,c,l,"next",a)}function l(a){i(n,r,e,c,l,"throw",a)}c(void 0)})}}System.register(["./index-legacy-DZ_oEP4m.js","./index-legacy-D37Tvi_R.js"],function(a,o){"use strict";var r,n,i,l,s,d,u,p,v,b,f,g,m,x,h,y,w,k,j,_,O,P,S,C,z,E,T,N,Y,A,I,F,D,G,q,R,U,B,W,J,L;return{setters:[function(a){r=a.d,n=a.r,i=a.S,l=a.a,s=a.O,d=a.o,u=a.b,p=a.w,v=a.u,b=a.I,f=a.e,g=a.f,m=a.g,x=a.h,h=a.i,y=a.P,w=a.l,k=a.A,j=a.m,_=a.n,O=a.Q,P=a.q,S=a.s,C=a.k,z=a.R,E=a.T,T=a.U,N=a.M,Y=a.N,A=a.t,I=a.V,F=a.W,D=a.X,G=a.J,q=a.Y,R=a.Z,U=a.$,B=a.a0,W=a.a1,J=a._},function(a){L=a.T}],execute:function(){var o=document.createElement("style");o.textContent='.modern-school-theme[data-v-a8977815]{--ion-font-family: "Segoe UI", system-ui, -apple-system, sans-serif;--math-color: #ff6b6b;--science-color: #4ecdc4;--english-color: #ff9ff3;--history-color: #feca57;--default-color: #8395a7}.floating-header[data-v-a8977815]{position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;padding:12px 20px;background:var(--ion-card-background);box-shadow:0 2px 15px rgba(0,0,0,.08);z-index:10;border-bottom:1px solid var(--ion-border-color)}.header-title[data-v-a8977815]{font-size:1.4rem;font-weight:700;color:var(--ion-text-color);margin:0}.back-btn[data-v-a8977815]{--color: var(--ion-text-color);--icon-font-size: 1.4rem}.refresh-btn[data-v-a8977815]{--color: var(--ion-text-color)}.loading-container[data-v-a8977815]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;text-align:center;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-a8977815]{width:48px;height:48px;margin-bottom:16px;color:var(--ion-color-primary)}.loading-container p[data-v-a8977815]{color:var(--ion-color-medium);margin-top:8px}@keyframes pageFlip-a8977815{0%,to{transform:rotateY(0)}50%{transform:rotateY(-20deg)}}.creative-empty-state[data-v-a8977815]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:70vh;padding:20px;text-align:center;background:var(--ion-background-color)}.desk-illustration[data-v-a8977815]{width:200px;height:150px;position:relative;margin-bottom:30px}.desk[data-v-a8977815]{position:absolute;bottom:0;width:180px;height:10px;background:#a55c40;border-radius:4px}.lamp[data-v-a8977815]{position:absolute;top:0;left:50%;transform:translate(-50%);width:60px;height:80px;background:var(--ion-color-step-200);border-radius:30px 30px 0 0}.lamp[data-v-a8977815]:after{content:"";position:absolute;bottom:-10px;left:0;width:100%;height:20px;background:var(--ion-color-primary);border-radius:0 0 10px 10px}.book-stack[data-v-a8977815]{position:absolute;bottom:15px;left:50%;transform:translate(-50%);width:120px}.book-stack .book[data-v-a8977815]{position:absolute;height:8px;background:var(--ion-color-step-100);border-radius:2px;box-shadow:0 1px 3px rgba(0,0,0,.1)}.book-stack .book[data-v-a8977815]:nth-child(1){width:100px;bottom:0;left:0;background:var(--english-color)}.book-stack .book[data-v-a8977815]:nth-child(2){width:110px;bottom:10px;left:5px;background:var(--history-color)}.book-stack .book[data-v-a8977815]:nth-child(3){width:90px;bottom:20px;left:15px;background:var(--science-color)}.creative-empty-state h3[data-v-a8977815]{font-size:1.3rem;color:var(--ion-text-color);margin-bottom:8px}.creative-empty-state p[data-v-a8977815]{color:var(--ion-color-medium);margin-bottom:25px}.cta-button[data-v-a8977815]{--background: var(--ion-color-primary);--background-activated: var(--ion-color-primary-shade);--color: var(--ion-color-primary-contrast);font-weight:500;padding:0 25px}.class-grid[data-v-a8977815]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;padding:20px;background:var(--ion-background-color)}.class-card[data-v-a8977815]{background:var(--ion-card-background);border-radius:12px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.05);transition:transform .2s ease,box-shadow .2s ease;cursor:pointer;border:1px solid var(--ion-border-color)}.class-card[data-v-a8977815]:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,.1)}.math-card[data-v-a8977815]{border-top:4px solid var(--math-color)}.science-card[data-v-a8977815]{border-top:4px solid var(--science-color)}.english-card[data-v-a8977815]{border-top:4px solid var(--english-color)}.history-card[data-v-a8977815]{border-top:4px solid var(--history-color)}.default-card[data-v-a8977815]{border-top:4px solid var(--default-color)}.card-header[data-v-a8977815]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px}.subject-badge[data-v-a8977815]{width:40px;height:40px;background:var(--ion-color-step-100);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.class-meta[data-v-a8977815]{display:flex;gap:12px}.student-count[data-v-a8977815],.rating[data-v-a8977815]{display:flex;align-items:center;gap:4px;font-size:.85rem;color:var(--ion-color-medium)}ion-icon[data-v-a8977815]{font-size:16px;color:var(--ion-color-medium)}.class-title[data-v-a8977815]{font-size:1.2rem;font-weight:700;color:var(--ion-text-color);margin:0 0 5px}.subject-name[data-v-a8977815]{font-size:.9rem;color:var(--ion-color-medium);margin:0 0 20px}.progress-bar[data-v-a8977815]{height:6px;background:var(--ion-color-step-100);border-radius:3px;margin-bottom:15px;overflow:hidden}.card-footer[data-v-a8977815]{display:flex;justify-content:space-between;align-items:center}.completion-text[data-v-a8977815]{font-size:.8rem;color:var(--ion-color-medium);font-weight:500}.arrow-icon[data-v-a8977815]{color:var(--ion-color-medium);font-size:1.2rem}.class-card[data-v-a8977815]{position:relative;background:var(--ion-card-background);border-radius:16px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.08);overflow:hidden;transition:all .3s ease;cursor:pointer;border:1px solid var(--ion-border-color)}.class-card[data-v-a8977815]:hover{transform:translateY(-5px);box-shadow:0 8px 24px rgba(0,0,0,.12)}.action-ribbon.two-row[data-v-a8977815]{height:0;overflow:hidden;transition:height .3s ease;background:var(--ion-color-step-50);border-radius:8px;display:flex;flex-direction:column;gap:8px}.action-ribbon.two-row.active[data-v-a8977815]{height:120px;padding:8px 0;opacity:1}.ribbon-row[data-v-a8977815]{display:flex;justify-content:space-around;width:100%;flex:1}.ribbon-button[data-v-a8977815]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:6px 4px;margin:0 4px;min-width:0;background:transparent;border:none;color:var(--ion-color-medium);opacity:0;transform:translateY(10px);transition:all .3s calc(var(--delay) * .1s)}.action-ribbon.two-row.active .ribbon-button[data-v-a8977815]{opacity:1;transform:translateY(0)}.quick-action[data-v-a8977815]{position:absolute;top:15px;right:15px;background:rgba(var(--ion-color-warning-rgb),.1);color:var(--ion-color-warning);padding:6px 10px;border-radius:16px;font-size:.8rem;display:flex;align-items:center;gap:4px;z-index:2}.progress-container[data-v-a8977815]{display:flex;align-items:center;gap:10px;margin-top:15px}.progress-bar[data-v-a8977815]{flex-grow:1;height:6px;background:rgba(var(--ion-color-primary-rgb),.1);border-radius:3px;overflow:hidden}.progress-fill[data-v-a8977815]{height:100%;background:var(--ion-color-primary);border-radius:3px;transition:width .5s ease}.subject-badge[data-v-a8977815]{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff}.math-badge[data-v-a8977815]{background:linear-gradient(135deg,var(--math-color),#ff8e8e)}.science-badge[data-v-a8977815]{background:linear-gradient(135deg,var(--science-color),#88f3ed)}.english-badge[data-v-a8977815]{background:linear-gradient(135deg,var(--english-color),#fd79a8)}.history-badge[data-v-a8977815]{background:linear-gradient(135deg,var(--history-color),#ff9f43)}.action-ribbon.two-row[data-v-a8977815]{height:0;overflow:hidden;transition:height .3s ease;background:var(--ion-color-step-50);border-radius:8px}.action-ribbon.two-row.active[data-v-a8977815]{height:120px;padding:8px 0}.ribbon-row[data-v-a8977815]{display:flex;justify-content:space-around;width:100%}.ribbon-button[data-v-a8977815]{flex:1;display:flex;flex-direction:column;align-items:center;padding:6px 4px;margin:0 4px;min-width:0}.ribbon-button ion-icon[data-v-a8977815]{font-size:1.2rem;margin-bottom:4px;color:var(--ion-color-medium)}.ribbon-button span[data-v-a8977815]{font-size:.7rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;color:var(--ion-color-medium)}.dark .class-card[data-v-a8977815]{box-shadow:0 4px 12px rgba(0,0,0,.15)}.dark .class-card[data-v-a8977815]:hover{box-shadow:0 8px 24px rgba(0,0,0,.2)}.dark .floating-header[data-v-a8977815]{box-shadow:0 2px 15px rgba(0,0,0,.15)}.dark .action-ribbon[data-v-a8977815],.dark .action-ribbon.two-row[data-v-a8977815]{background:var(--ion-color-step-150)}@media (max-width: 600px){.class-grid[data-v-a8977815]{grid-template-columns:1fr;padding:16px;gap:16px}.floating-header[data-v-a8977815]{padding:12px 15px}.class-card[data-v-a8977815]{padding:16px}}@media (prefers-contrast: high){.class-card[data-v-a8977815]{border:2px solid var(--ion-border-color)}.action-ribbon[data-v-a8977815]{border:1px solid var(--ion-border-color)}}@media (prefers-reduced-motion: reduce){.class-card[data-v-a8977815]{transition:none}.class-card[data-v-a8977815]:hover{transform:none}.action-ribbon[data-v-a8977815]{transition:none}}@supports (padding: max(0px)){.class-grid[data-v-a8977815],.floating-header[data-v-a8977815]{padding-left:max(20px,env(safe-area-inset-left));padding-right:max(20px,env(safe-area-inset-right))}}.class-card[data-v-a8977815]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.ribbon-button[data-v-a8977815]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}@media (hover: hover){.class-card[data-v-a8977815]:hover{transform:translateY(-5px);box-shadow:0 8px 24px rgba(0,0,0,.12)}.ribbon-button[data-v-a8977815]:hover{color:var(--ion-color-primary)}.ribbon-button:hover ion-icon[data-v-a8977815]{color:var(--ion-color-primary)}}@keyframes slideInUp-a8977815{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.class-card[data-v-a8977815]{animation:slideInUp-a8977815 .4s ease-out}.class-card[data-v-a8977815]:nth-child(odd){animation-delay:.1s}.class-card[data-v-a8977815]:nth-child(2n){animation-delay:.2s}\n',document.head.appendChild(o);var M={key:0,class:"loading-container"},V={key:1,class:"creative-empty-state"},Q={key:2,class:"class-grid"},X=["onClick"],Z={class:"card-content"},$={class:"card-header"},H={class:"subject-badge"},K=["onClick"],aa={class:"subject-name"},ta={class:"ribbon-row top-row"},oa=["onClick"],ra={class:"ribbon-row bottom-row"},ea=["onClick"],na=r({__name:"TutorshipPage",setup:function(a){var o=localStorage.getItem("parisklegg_token")||"",r=localStorage.getItem("parisklegg_user"),J=r?JSON.parse(r):null,na=(null==J?void 0:J.user_id)||0;console.log(na);var ia=g(),ca=n(null),la=n(!0),sa=n([]),da=function(){var a=c(t().m(function a(){var o,r;return t().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,la.value=!0,a.n=1,f.get("https://klegg-app-whh7m.ondigitalocean.app/api/tutorships",{headers:fa(),timeout:2e4});case 1:if(o=a.v,!isNaN(na)){a.n=2;break}throw new Error("Invalid student ID");case 2:sa.value=o.data.filter(function(a){try{var t;return((null===(t=a.students_list)||void 0===t?void 0:t.split(",").map(Number).filter(function(a){return!isNaN(a)}))||[]).includes(na)}catch(o){return console.warn("Error parsing students_list",a),!1}}).map(function(a){return e(e({},a),{},{rating_score:void 0!==a.average_rating?parseFloat(a.average_rating.toFixed(1)):void 0})}),a.n=4;break;case 3:a.p=3,r=a.v,ga(r);case 4:return a.p=4,la.value=!1,a.f(4);case 5:return a.a(2)}},a,null,[[0,3,4,5]])}));return function(){return a.apply(this,arguments)}}(),ua=function(){la.value=!0,da()},pa=[{id:1,icon:G,label:"Timetable",url:"timetable"},{id:2,icon:q,label:"Attendance",url:"attendance"},{id:3,icon:R,label:"Assignment",url:"assignment"}],va=[{id:4,icon:B,label:"Assessment",url:"assessment"},{id:5,icon:W,label:"Exam",url:"exam"}],ba=function(a,t){ia.push("/".concat(t,"/").concat(a,"/"))},fa=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(o)}},ga=function(a){if(console.error("Error fetching data:",a),f.isAxiosError(a)){var t;if(401===(null===(t=a.response)||void 0===t?void 0:t.status))return ia.replace("/"),void L.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===a.code)return void L.show({text:"Request timeout. Please try again",position:"top"})}L.show({text:"Failed to load data. Please try again later",position:"top"})};return i.setOverlaysWebView({overlay:!1}),i.setBackgroundColor({color:"#ffffff"}),i.setStyle({style:l.Light}),s(c(t().m(function a(){return t().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,da();case 1:return a.a(2)}},a)}))),d(da),function(a,t){var o=z("ion-spinner");return Y(),u(v(b),{class:"modern-school-theme"},{default:p(function(){return[m(v(P),{class:"header-gradient"},{default:p(function(){return[m(v(x),null,{default:p(function(){return[m(v(h),{slot:"start"},{default:p(function(){return[m(v(y),{"default-href":"/home",class:"back-button"})]}),_:1}),m(v(w),{class:"page-title"},{default:p(function(){return t[0]||(t[0]=[k("My Classes",-1)])}),_:1,__:[0]}),m(v(h),{slot:"end"},{default:p(function(){return[m(v(j),{onClick:ua,fill:"clear",class:"refresh-btn"},{default:p(function(){return[m(v(_),{icon:v(O),slot:"icon-only"},null,8,["icon"])]}),_:1})]}),_:1})]}),_:1})]}),_:1}),m(v(N),{fullscreen:!0,class:"content-bg"},{default:p(function(){return[la.value?(Y(),S("div",M,[m(o,{name:"crescent",color:"primary"}),t[1]||(t[1]=C("p",null,"Loading your classes...",-1))])):0===sa.value.length?(Y(),S("div",V,[t[3]||(t[3]=C("div",{class:"desk-illustration"},[C("div",{class:"desk"}),C("div",{class:"lamp"}),C("div",{class:"book-stack"},[C("div",{class:"book"}),C("div",{class:"book"}),C("div",{class:"book"})])],-1)),t[4]||(t[4]=C("h3",null,"No Classes Yet",-1)),t[5]||(t[5]=C("p",null,"When you enroll in a class, it'll appear here",-1)),m(v(j),{onClick:ua,fill:"solid",class:"cta-button"},{default:p(function(){return t[2]||(t[2]=[k(" Check Again ",-1)])}),_:1,__:[2]})])):(Y(),S("div",Q,[(Y(!0),S(E,null,T(sa.value,function(a){var t;return Y(),S("div",{key:a.tutorship_id,class:"class-card",onClick:function(t){return o=a.tutorship_id,void(ca.value=ca.value===o?null:o);var o}},[C("div",Z,[C("div",$,[C("div",H,A((a.subject_name,"📖")),1),C("div",{class:"quick-action",onClick:I(function(t){return o=a.tutorship_id,void ia.push("/rate/".concat(o));var o},["stop"])},[m(v(_),{icon:v(F)},null,8,["icon"]),k(" "+A((null===(t=a.average_rating)||void 0===t?void 0:t.toFixed(1))||"Rate"),1)],8,K)]),C("h3",null,A(a.tutorship_name),1),C("p",aa,A(a.subject_name),1)]),C("div",{class:D(["action-ribbon two-row",{active:ca.value===a.tutorship_id}])},[C("div",ta,[(Y(),S(E,null,T(pa,function(t){return C("button",{key:"first-"+t.id,onClick:I(function(o){return ba(a.tutorship_id,t.label)},["stop"]),class:"ribbon-button",style:U({"--delay":t.id})},[m(v(_),{icon:t.icon},null,8,["icon"]),C("span",null,A(t.label),1)],12,oa)}),64))]),C("div",ra,[(Y(),S(E,null,T(va,function(t){return C("button",{key:"second-"+t.id,onClick:I(function(o){return ba(a.tutorship_id,t.url)},["stop"]),class:"ribbon-button",style:U({"--delay":t.id+pa.length})},[m(v(_),{icon:t.icon},null,8,["icon"]),C("span",null,A(t.label),1)],12,ea)}),64))])],2)],8,X)}),128))]))]}),_:1})]}),_:1})}}});a("default",J(na,[["__scopeId","data-v-a8977815"]]))}}})}();
