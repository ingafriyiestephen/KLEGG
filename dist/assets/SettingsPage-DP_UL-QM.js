const __vite__fileDeps=["assets/web-BZceAgoZ.js","assets/index-6dl2zJ1O.js","assets/index-DEItU8W2.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{ae as A,af as T,d as E,r as I,o as B,S as m,a as N,b as D,w as a,u as t,I as L,g as o,h as V,l as K,A as n,q as R,k as r,s as $,a9 as U,t as f,a4 as j,a7 as u,n as i,ag as q,K as d,ah as F,aa as G,ai as M,aj as W,ak as z,al as H,m as J,am as Q,an as X,M as Y,e as S,f as Z,N as y,_ as ee}from"./index-6dl2zJ1O.js";import{T as _}from"./index-fbeSVdeg.js";const te=A("Share",{web:()=>T(()=>import("./web-BZceAgoZ.js"),__vite__mapDeps([0,1,2])).then(v=>new v.ShareWeb)}),oe={class:"profile-section"},ae=["src"],le={class:"profile-info"},se={key:0},ne={class:"logout-section"},w="https://www.gravatar.com/avatar/?d=mp",ie=E({__name:"SettingsPage",setup(v){const h=Z(),s=I({name:"",id:0,otp:0,phone:""}),C=["Close"],c=I(!1),k=localStorage.getItem("parisklegg_token")||"";let b=null;B(async()=>{const l=localStorage.getItem("parisklegg_user");if(l){const e=JSON.parse(l);e&&(s.value.name=e.fullname,s.value.id=e.user_id,s.value.email=e.username,s.value.image=e.profile_photo_path||w,b=e.user_id),console.log("User data:",e.user_id)}}),m.setOverlaysWebView({overlay:!1}),m.setBackgroundColor({color:"#ffffff"}),m.setStyle({style:N.Light});const P=async()=>{await te.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"})},g=l=>{window.location.href=l},O=async()=>{c.value=!0;try{const e=(await S.post("https://school.klgilc.com/api/logout",{user_id:b,bearer_token:k},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k)}})).data;console.log(e.data),e.success===!0&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),h.replace("/"))}catch(l){x(l)}finally{c.value=!1}},x=l=>{var e;if(console.error("Error fetching data:",l),S.isAxiosError(l)){if(((e=l.response)==null?void 0:e.status)===401){h.replace("/"),_.show({text:"Session expired. Please login again",position:"top",duration:"long"});return}if(l.code==="ECONNABORTED"){_.show({text:"Request timeout. Please try again",position:"top"});return}}_.show({text:"Failed to load data. Please try again later",position:"top"})};return(l,e)=>(y(),D(t(L),null,{default:a(()=>[o(t(R),null,{default:a(()=>[o(t(V),null,{default:a(()=>[o(t(K),null,{default:a(()=>e[4]||(e[4]=[n("Settings",-1)])),_:1,__:[4]})]),_:1})]),_:1}),o(t(Y),{class:"ion-padding"},{default:a(()=>[r("div",oe,[r("img",{src:s.value.image||w,class:"profile-img",alt:"Profile Picture"},null,8,ae),r("div",le,[r("h2",null,f(s.value.name||"User Name"),1),s.value.phone?(y(),$("p",se,f(s.value.phone||"Phone"),1)):U("",!0),r("p",null,f(s.value.email||"Email"),1)])]),o(t(j),{lines:"full",class:"settings-list"},{default:a(()=>[o(t(u),{button:"",detail:!0,onClick:e[0]||(e[0]=p=>g("https://legal.klgilc.com/privacy-policy.html"))},{default:a(()=>[o(t(i),{slot:"start",icon:t(q),color:"medium"},null,8,["icon"]),o(t(d),null,{default:a(()=>e[5]||(e[5]=[n("Privacy Policy",-1)])),_:1,__:[5]})]),_:1}),o(t(u),{button:"",detail:!0,onClick:e[1]||(e[1]=p=>g("https://legal.klgilc.com/terms-of-service.html"))},{default:a(()=>[o(t(i),{slot:"start",icon:t(F),color:"medium"},null,8,["icon"]),o(t(d),null,{default:a(()=>e[6]||(e[6]=[n("Terms of Service",-1)])),_:1,__:[6]})]),_:1}),o(t(u),{button:"",detail:!0,onClick:e[2]||(e[2]=p=>g("https://wa.me/+233208345390"))},{default:a(()=>[o(t(i),{slot:"start",icon:t(G),color:"medium"},null,8,["icon"]),o(t(d),null,{default:a(()=>e[7]||(e[7]=[n("Contact Support",-1)])),_:1,__:[7]})]),_:1}),o(t(u),{button:"",detail:!0,onClick:e[3]||(e[3]=p=>g("https://legal.klgilc.com/account-deletion.html"))},{default:a(()=>[o(t(i),{slot:"start",icon:t(M),color:"medium"},null,8,["icon"]),o(t(d),null,{default:a(()=>e[8]||(e[8]=[n("Delete Account",-1)])),_:1,__:[8]})]),_:1}),o(t(u),{button:"",detail:!0,onClick:P},{default:a(()=>[o(t(i),{slot:"start",icon:t(W),color:"medium"},null,8,["icon"]),o(t(d),null,{default:a(()=>e[9]||(e[9]=[n("Share App",-1)])),_:1,__:[9]})]),_:1}),o(t(u),{button:"",id:"about-alert",detail:!0},{default:a(()=>[o(t(i),{slot:"start",icon:t(z),color:"medium"},null,8,["icon"]),o(t(d),null,{default:a(()=>e[10]||(e[10]=[n("About",-1)])),_:1,__:[10]})]),_:1}),o(t(H),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.4",message:"â’¸ 2025 - Klegg Institute of Language and Communication.",buttons:C})]),_:1}),r("div",ne,[o(t(J),{fill:"clear",color:"medium",onClick:O,class:"logout-button"},{default:a(()=>[o(t(i),{slot:"start",icon:t(Q)},null,8,["icon"]),e[11]||(e[11]=n(" Sign Out ",-1))]),_:1,__:[11]})]),o(t(X),{"is-open":c.value,message:"Please wait..."},null,8,["is-open"])]),_:1})]),_:1}))}}),de=ee(ie,[["__scopeId","data-v-0ecf1106"]]);export{de as default};
