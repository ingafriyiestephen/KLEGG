!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(t,o,n,i){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return a(s,"_invoke",function(t,a,o){var n,i,c,l=0,s=o||[],u=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return n=t,i=0,c=e,p.n=a,d}};function f(t,a){for(i=t,c=a,r=0;!u&&l&&!o&&r<s.length;r++){var o,n=s[r],f=p.p,b=n[2];t>3?(o=b===a)&&(c=n[(i=n[4])?5:(i=3,3)],n[4]=n[5]=e):n[0]<=f&&((o=t<2&&f<n[1])?(i=0,p.v=a,p.n=n[1]):f<b&&(o=t<3||n[0]>a||a>b)&&(n[4]=t,n[5]=a,p.n=b,i=0))}if(o||t>1)return d;throw u=!0,a}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(u&&1===s&&f(s,b),i=s,c=b;(r=i<2?e:c)||!u;){n||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(l=2,n){if(i||(o="next"),r=n[o]){if(!(r=r.call(n,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=n.return)&&r.call(n),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);n=e}else if((r=(u=p.n<0)?c:t.call(a,p))!==d)break}catch(r){n=e,i=1,c=r}finally{l=1}}return{value:r,done:u}}}(t,n,i),!0),s}var d={};function l(){}function s(){}function u(){}r=Object.getPrototypeOf;var p=[][n]?r(r([][n]())):(a(r={},n,function(){return this}),r),f=u.prototype=l.prototype=Object.create(p);function b(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,a(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,a(f,"constructor",u),a(u,"constructor",s),s.displayName="GeneratorFunction",a(u,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,n,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:b}})()}function a(t,e,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}a=function(t,e,r,o){function i(e,r){a(t,e,function(t){return this._invoke(e,r,t)})}e?n?n(t,e,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},a(t,e,r,o)}function e(t,a,e,r,o,n,i){try{var c=t[n](i),d=c.value}catch(t){return void e(t)}c.done?a(d):Promise.resolve(d).then(r,o)}System.register(["./index-legacy-DZ_oEP4m.js","./index-legacy-D37Tvi_R.js"],function(a,r){"use strict";var o,n,i,c,d,l,s,u,p,f,b,v,m,y,g,x,h,k,_,w,T,j,S,z,D,K,O,P,E,C,F,G,I,N,A,M,B,L,R,Y,q,J,W,U;return{setters:[function(t){o=t.d,n=t.ar,i=t.r,c=t.S,d=t.a,l=t.o,s=t.b,u=t.w,p=t.u,f=t.I,b=t.e,v=t.f,m=t.g,y=t.h,g=t.i,x=t.P,h=t.l,k=t.A,_=t.q,w=t.k,T=t.s,j=t.a9,S=t.a3,z=t.t,D=t.v,K=t.n,O=t.J,P=t.a2,E=t.m,C=t.T,F=t.U,G=t.M,I=t.N,N=t.x,A=t.X,M=t.y,B=t.z,L=t.as,R=t.C,Y=t.a7,q=t.G,J=t.K,W=t._},function(t){U=t.T}],execute:function(){var r=document.createElement("style");r.textContent=".header-section[data-v-0cb64339]{margin-bottom:24px;text-align:center;background:var(--ion-background-color)}.title[data-v-0cb64339]{display:block;font-size:1.5rem;font-weight:600;color:var(--ion-color-primary);margin-bottom:4px}.subtitle[data-v-0cb64339]{font-size:.9rem;color:var(--ion-color-medium)}.loading-container[data-v-0cb64339]{display:flex;justify-content:center;align-items:center;height:200px;background:var(--ion-background-color)}.loading-container ion-spinner[data-v-0cb64339]{color:var(--ion-color-primary)}.empty-state[data-v-0cb64339],.error-state[data-v-0cb64339]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px;background:var(--ion-background-color)}.empty-state ion-icon[data-v-0cb64339]{color:var(--ion-color-medium);font-size:64px;margin-bottom:16px;opacity:.7}.error-state ion-icon[data-v-0cb64339]{color:var(--ion-color-danger);font-size:64px;margin-bottom:16px;opacity:.8}.empty-state h3[data-v-0cb64339],.error-state h3[data-v-0cb64339]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.empty-state p[data-v-0cb64339],.error-state p[data-v-0cb64339]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px;line-height:1.4}.timetable-container[data-v-0cb64339]{display:flex;flex-direction:column;gap:16px;padding:16px;background:var(--ion-background-color)}.day-card[data-v-0cb64339]{background:var(--ion-card-background);border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);transition:transform .2s ease,box-shadow .2s ease;border-left:4px solid var(--ion-color-primary);border:1px solid var(--ion-border-color)}.today-card[data-v-0cb64339]{border-left:4px solid var(--ion-color-success);background:rgba(var(--ion-color-success-rgb),.05);border-color:rgba(var(--ion-color-success-rgb),.2)}.day-card-header[data-v-0cb64339]{padding:16px;border-bottom:1px solid var(--ion-border-color);background:var(--ion-item-background);border-radius:12px 12px 0 0}.day-title[data-v-0cb64339]{display:flex;align-items:center;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--ion-text-color)}.day-date[data-v-0cb64339]{font-size:.8rem;color:var(--ion-color-medium);font-weight:400}.time-content[data-v-0cb64339]{padding:16px;background:var(--ion-card-background);border-radius:0 0 12px 12px}.time-content ion-item[data-v-0cb64339]{--padding-start: 0;--inner-padding-end: 0;--background: transparent;--border-color: var(--ion-border-color);margin-bottom:12px}.time-content ion-item[data-v-0cb64339]:last-child{margin-bottom:0}.time-content ion-icon[data-v-0cb64339]{margin-right:8px;color:var(--ion-color-primary)}.time-slot[data-v-0cb64339]{display:flex;align-items:flex-start;gap:12px;padding:12px;background:var(--ion-color-step-50);border-radius:8px;border-left:3px solid var(--ion-color-primary)}.time-slot.today[data-v-0cb64339]{border-left-color:var(--ion-color-success);background:rgba(var(--ion-color-success-rgb),.08)}.time-info[data-v-0cb64339]{flex:1}.time-range[data-v-0cb64339]{font-size:.9rem;font-weight:600;color:var(--ion-text-color);margin-bottom:4px}.time-subject[data-v-0cb64339]{font-size:.9rem;color:var(--ion-text-color);opacity:.9;margin-bottom:2px}.time-location[data-v-0cb64339]{font-size:.8rem;color:var(--ion-color-medium)}.time-icon[data-v-0cb64339]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:var(--ion-color-primary);color:#fff;border-radius:6px;font-size:14px}.day-card[data-v-0cb64339]:active{transform:scale(.98)}.day-card[data-v-0cb64339]:hover{box-shadow:0 6px 16px rgba(0,0,0,.12)}.dark .day-card[data-v-0cb64339]{box-shadow:0 4px 12px rgba(0,0,0,.15)}.dark .today-card[data-v-0cb64339]{background:rgba(var(--ion-color-success-rgb),.08);border-color:rgba(var(--ion-color-success-rgb),.3)}.dark .time-slot[data-v-0cb64339]{background:var(--ion-color-step-100)}.dark .time-slot.today[data-v-0cb64339]{background:rgba(var(--ion-color-success-rgb),.12)}@media (min-width: 768px){.timetable-container[data-v-0cb64339]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;padding:20px;max-width:1200px;margin:0 auto}.day-card[data-v-0cb64339]{margin:0}}@media (min-width: 1024px){.timetable-container[data-v-0cb64339]{grid-template-columns:repeat(3,1fr)}}@media (prefers-contrast: high){.day-card[data-v-0cb64339]{border:2px solid var(--ion-border-color)}.time-slot[data-v-0cb64339]{border:1px solid var(--ion-border-color)}}@media (prefers-reduced-motion: reduce){.day-card[data-v-0cb64339]{transition:none}.day-card[data-v-0cb64339]:active{transform:none}}@supports (padding: max(0px)){.timetable-container[data-v-0cb64339]{padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}}.day-card[data-v-0cb64339]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.time-slot[data-v-0cb64339]:focus-within{outline:2px solid var(--ion-color-primary);outline-offset:2px}.empty-state .action-button[data-v-0cb64339],.error-state .retry-button[data-v-0cb64339]{margin-top:16px}@keyframes fadeIn-0cb64339{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.day-card[data-v-0cb64339]{animation:fadeIn-0cb64339 .3s ease-out}.day-card[data-v-0cb64339]:nth-child(odd){animation-delay:.1s}.day-card[data-v-0cb64339]:nth-child(2n){animation-delay:.2s}\n",document.head.appendChild(r);var V={class:"header-section"},X={key:0,class:"loading-container"},H={key:1,class:"empty-state"},Q={key:2,class:"error-state"},Z={key:3,class:"timetable-container"},$=o({__name:"TimetablePage",setup:function(a){var r=localStorage.getItem("parisklegg_token")||"",o=localStorage.getItem("parisklegg_user");o&&JSON.parse(o);var W=n(),$=v(),tt=Number(W.params.id),at=i(""),et=i(""),rt=i(!0),ot=i(!1),nt=i(!1),it=i([]),ct=function(){var a,r=(a=t().m(function a(){var e,r;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,rt.value=!0,ot.value=!1,t.n=1,b.post("https://klegg-app-whh7m.ondigitalocean.app/api/timetable",{tutorship_id:tt},{headers:lt(),timeout:2e4});case 1:e=t.v,console.log("Timetable response:",e.data),dt(e.data),t.n=3;break;case 2:t.p=2,r=t.v,st(r),ot.value=!0;case 3:return t.p=3,rt.value=!1,t.f(3);case 4:return t.a(2)}},a,null,[[0,2,3,4]])}),function(){var t=this,r=arguments;return new Promise(function(o,n){var i=a.apply(t,r);function c(t){e(i,o,n,c,d,"next",t)}function d(t){e(i,o,n,c,d,"throw",t)}c(void 0)})});return function(){return r.apply(this,arguments)}}(),dt=function(t){var a=[{name:"Monday",dayKey:"monday"},{name:"Tuesday",dayKey:"tuesday"},{name:"Wednesday",dayKey:"wednesday"},{name:"Thursday",dayKey:"thursday"},{name:"Friday",dayKey:"friday"},{name:"Saturday",dayKey:"saturday"},{name:"Sunday",dayKey:"sunday"}],e=(new Date).getDay(),r=a[0===e?6:e-1].dayKey;it.value=[],nt.value=!1,t.forEach(function(t){t.tutorship_id===tt&&(at.value=t.tutorship_name||"My Timetable",a.forEach(function(a){var e=t["".concat(a.dayKey,"_start")],o=t["".concat(a.dayKey,"_end")];(function(t,a){return!!t&&""!==t.trim()&&!!a&&""!==a.trim()})(e,o)&&(nt.value=!0,it.value.push({name:a.name,dayKey:a.dayKey,startTime:e,endTime:o,isToday:a.dayKey===r}))}))})},lt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)}},st=function(t){if(console.error("Error fetching data:",t),b.isAxiosError(t)){var a;if(401===(null===(a=t.response)||void 0===a?void 0:a.status))return $.replace("/"),void U.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void U.show({text:"Request timeout. Please try again",position:"top"})}U.show({text:"Failed to load data. Please try again later",position:"top"})};return c.setOverlaysWebView({overlay:!1}),c.setBackgroundColor({color:"#ffffff"}),c.setStyle({style:d.Light}),l(function(){et.value=function(){var t=new Date,a=t.getDay()||7,e=new Date(t);e.setDate(t.getDate()-a+1);var r=new Date(e);r.setDate(e.getDate()+6);var o={month:"short",day:"numeric"};return"".concat(e.toLocaleDateString(void 0,o)," - ").concat(r.toLocaleDateString(void 0,o))}(),ct(),console.log("Mounted: Fetching timetable for tutorship ID:",tt)}),function(t,a){return I(),s(p(f),null,{default:u(function(){return[m(p(_),null,{default:u(function(){return[m(p(y),null,{default:u(function(){return[m(p(g),{slot:"start"},{default:u(function(){return[m(p(x),{"default-href":"/"})]}),_:1}),m(p(h),null,{default:u(function(){return a[0]||(a[0]=[k("Timetable",-1)])}),_:1,__:[0]})]}),_:1})]}),_:1}),m(p(G),{class:"ion-padding",fullscreen:!0},{default:u(function(){return[w("div",V,[at.value?(I(),s(p(S),{key:0,class:"title"},{default:u(function(){return[k(z(at.value),1)]}),_:1})):j("",!0),m(p(S),{class:"subtitle"},{default:u(function(){return[k(z(et.value),1)]}),_:1})]),rt.value?(I(),T("div",X,[m(p(D),{name:"crescent",color:"primary"})])):nt.value?ot.value?(I(),T("div",Q,[m(p(K),{icon:p(P),color:"danger",size:"large"},null,8,["icon"]),m(p(S),null,{default:u(function(){return a[2]||(a[2]=[w("h3",null,"Failed to load timetable",-1),w("p",null,"Please try again later",-1)])}),_:1,__:[2]}),m(p(E),{onClick:ct,fill:"clear"},{default:u(function(){return a[3]||(a[3]=[k("Retry",-1)])}),_:1,__:[3]})])):(I(),T("div",Z,[(I(!0),T(C,null,F(it.value,function(t,e){return I(),s(p(N),{key:e,class:A(["day-card",{"today-card":t.isToday}])},{default:u(function(){return[m(p(M),null,{default:u(function(){return[m(p(B),{class:"day-title"},{default:u(function(){return[k(z(t.name)+" ",1),t.isToday?(I(),s(p(L),{key:0,color:"success"},{default:u(function(){return a[4]||(a[4]=[k("Today",-1)])}),_:1,__:[4]})):j("",!0)]}),_:2},1024)]}),_:2},1024),m(p(R),{class:"time-content"},{default:u(function(){return[m(p(Y),{lines:"none"},{default:u(function(){return[m(p(K),{slot:"start",icon:p(q),color:"primary"},null,8,["icon"]),m(p(J),null,{default:u(function(){return[k(z(t.startTime)+" - "+z(t.endTime),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["class"])}),128))])):(I(),T("div",H,[m(p(K),{icon:p(O),size:"large"},null,8,["icon"]),m(p(S),null,{default:u(function(){return a[1]||(a[1]=[w("h3",null,"No Classes Scheduled",-1),w("p",null,"Your timetable will appear here when classes are scheduled",-1)])}),_:1,__:[1]})]))]}),_:1})]}),_:1})}}});a("default",W($,[["__scopeId","data-v-0cb64339"]]))}}})}();
