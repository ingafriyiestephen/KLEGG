!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function u(n,a,o,i){var u=a&&a.prototype instanceof l?a:l,c=Object.create(u.prototype);return r(c,"_invoke",function(n,r,a){var o,i,u,l=0,c=a||[],d=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,s}};function m(n,r){for(i=n,u=r,e=0;!d&&l&&!a&&e<c.length;e++){var a,o=c[e],m=f.p,p=o[2];n>3?(a=p===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,f.v=r,f.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,c,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===c&&m(c,p),i=c,u=p;(e=i<2?t:u)||!d;){o||(i?i<3?(i>1&&(f.n=-1),m(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(d=f.n<0)?u:n.call(r,f))!==s)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:d}}}(n,o,i),!0),c}var s={};function l(){}function c(){}function d(){}e=Object.getPrototypeOf;var f=[][o]?e(e([][o]())):(r(e={},o,function(){return this}),e),m=d.prototype=l.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,r(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t}return c.prototype=d,r(m,"constructor",d),r(d,"constructor",c),c.displayName="GeneratorFunction",r(d,i,"GeneratorFunction"),r(m),r(m,i,"Generator"),r(m,o,function(){return this}),r(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:u,m:p}})()}function r(t,e,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}r=function(t,e,n,a){function i(e,n){r(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},r(t,e,n,a)}function a(t,e,n,r,a,o,i){try{var u=t[o](i),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function u(t){a(i,r,o,u,s,"next",t)}function s(t){a(i,r,o,u,s,"throw",t)}u(void 0)})}}System.register(["./index-legacy-bhlrdrvL.js","./index-legacy-Btp0TFe9.js"],function(e,r){"use strict";var a,i,u,s,l,c,d,f,m,p,v,g,y,b,h,x,_,w,k,S,j,A,O,z,P,E,T,C,G,N,I,M,F,q,D,L,R,$,B,U,H,J,K,V,W,Y,Q,X,Z,tt;return{setters:[function(t){a=t.d,i=t.ao,u=t.r,s=t.c,l=t.o,c=t.O,d=t.a,f=t.w,m=t.u,p=t.I,v=t.b,g=t.e,y=t.f,b=t.g,h=t.h,x=t.i,_=t.P,w=t.l,k=t.A,S=t.q,j=t.s,A=t.x,O=t.y,z=t.z,P=t.n,E=t.aM,T=t.C,C=t.k,G=t.a3,N=t.t,I=t.W,M=t.v,F=t.ay,q=t.a2,D=t.m,L=t.a4,R=t.T,$=t.S,B=t.M,U=t.N,H=t.au,J=t.a7,K=t.aN,V=t.K,W=t.aq,Y=t.az,Q=t.aA,X=t.ak,Z=t._},function(t){tt=t.T}],execute:function(){var r=document.createElement("style");r.textContent=".summary-card[data-v-b4da8244]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}.summary-title[data-v-b4da8244]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:600;color:var(--ion-text-color);white-space:pre-line}.summary-title ion-icon[data-v-b4da8244]{font-size:24px}.summary-content[data-v-b4da8244]{display:flex;justify-content:space-between;padding:16px}.summary-item[data-v-b4da8244]{display:flex;flex-direction:column;align-items:center;flex:1}.divider[data-v-b4da8244]{width:1px;background-color:var(--ion-color-light);margin:0 8px}.summary-label[data-v-b4da8244]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:4px}.summary-value[data-v-b4da8244]{font-size:1.5rem;font-weight:600}.summary-value.excellent[data-v-b4da8244]{color:var(--ion-color-success)}.summary-value.good[data-v-b4da8244]{color:var(--ion-color-primary)}.summary-value.average[data-v-b4da8244]{color:var(--ion-color-warning)}.summary-value.poor[data-v-b4da8244]{color:var(--ion-color-danger)}.loading-container[data-v-b4da8244]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-b4da8244],.error-state[data-v-b4da8244]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-b4da8244],.error-state ion-icon[data-v-b4da8244]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-b4da8244],.error-state h3[data-v-b4da8244]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-b4da8244],.error-state p[data-v-b4da8244]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.assessment-item[data-v-b4da8244]{--padding-start: 12px;--inner-padding-end: 12px;--background: var(--ion-item-background, var(--ion-background-color, #fff));margin:8px 16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.assessment-item ion-icon[data-v-b4da8244]{font-size:24px}.assessment-content[data-v-b4da8244]{margin-left:12px}.assessment-header[data-v-b4da8244]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.assessment-title[data-v-b4da8244]{font-weight:600;font-size:1rem;flex:1;margin-right:8px}.assessment-meta[data-v-b4da8244]{display:flex;justify-content:space-between;font-size:.8rem;color:var(--ion-color-medium)}.assessment-score[data-v-b4da8244]{font-weight:500}.assessment-date[data-v-b4da8244]{color:var(--ion-color-medium)}@media (min-width: 768px){.summary-card[data-v-b4da8244]{margin:16px auto;max-width:800px}.assessment-item[data-v-b4da8244]{margin:8px auto;max-width:800px}}\n/*$vite$:1*/",document.head.appendChild(r);var et={class:"summary-item"},nt={class:"summary-item"},rt={key:0,class:"loading-container"},at={key:1,class:"empty-state"},ot={key:2,class:"error-state"},it={class:"assessment-header"},ut={class:"assessment-meta"},st=a({__name:"AssessmentPage",setup:function(e){var r=localStorage.getItem("parisklegg_token")||"",a=localStorage.getItem("parisklegg_user"),Z=a?JSON.parse(a):null,st=(null==Z?void 0:Z.user_id)||0,lt=i(),ct=g(),dt=Number(lt.params.id),ft=u(!0),mt=u(!1),pt=u([]),vt=s(function(){return pt.value.length>0}),gt=s(function(){return pt.value.length}),yt=s(function(){if(0===pt.value.length)return 0;var t=pt.value.reduce(function(t,e){return t+bt(e)},0);return Math.round(t/pt.value.length)}),bt=function(t){return 0===t.score_denominator?0:Math.round(t.score_numerator/t.score_denominator*100)},ht=function(){var t=o(n().m(function t(){var e,r;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,ft.value=!0,mt.value=!1,pt.value=[],t.n=1,v.post("https://klegg-app-whh7m.ondigitalocean.app/api/marks",{tutorship_id:dt,student_id:st},{headers:xt(),timeout:2e4});case 1:e=t.v,pt.value=e.data,t.n=3;break;case 2:t.p=2,r=t.v,console.error("Error fetching assessments:",r),_t(r),mt.value=!0;case 3:return t.p=3,ft.value=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),xt=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)}},_t=function(t){if(console.error("Error fetching data:",t),v.isAxiosError(t)){var e;if(401===(null===(e=t.response)||void 0===e?void 0:e.status))return ct.replace("/"),void tt.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void tt.show({text:"Request timeout. Please try again",position:"top"})}tt.show({text:"Failed to load data. Please try again later",position:"top"})},wt=function(t){var e=t.matches;y(e)},kt=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return wt(t),t.addEventListener("change",wt),t};return l(function(){kt(),ht()}),c(o(n().m(function t(){return n().w(function(t){for(;;)switch(t.n){case 0:kt();case 1:return t.a(2)}},t)}))),function(e,n){return U(),d(m(p),null,{default:f(function(){return[b(m(S),null,{default:f(function(){return[b(m(h),null,{default:f(function(){return[b(m(x),{slot:"start"},{default:f(function(){return[b(m(_),{"default-href":"/"})]}),_:1}),b(m(w),null,{default:f(function(){return t(n[0]||(n[0]=[k("Assessment",-1)]))}),_:1})]}),_:1})]}),_:1}),b(m(B),{fullscreen:!0},{default:f(function(){return[b(m(A),{class:"summary-card"},{default:f(function(){return[b(m(O),null,{default:f(function(){return[b(m(z),{class:"summary-title"},{default:f(function(){return[b(m(P),{icon:m(E),color:"primary"},null,8,["icon"]),n[1]||(n[1]=k(" Overall Performance ",-1))]}),_:1})]}),_:1}),b(m(T),{class:"summary-content"},{default:f(function(){return[C("div",et,[b(m(G),{class:"summary-label"},{default:f(function(){return t(n[2]||(n[2]=[k("Assignments Graded",-1)]))}),_:1}),b(m(G),{class:"summary-value"},{default:f(function(){return[k(N(gt.value),1)]}),_:1})]),n[4]||(n[4]=C("div",{class:"divider"},null,-1)),C("div",nt,[b(m(G),{class:"summary-label"},{default:f(function(){return t(n[3]||(n[3]=[k("Average Score",-1)]))}),_:1}),b(m(G),{class:I(["summary-value",(e=yt.value,e>=85?"excellent":e>=70?"good":e>=50?"average":"poor")])},{default:f(function(){return[k(N(yt.value)+"% ",1)]}),_:1},8,["class"])])];var e}),_:1})]}),_:1}),ft.value?(U(),j("div",rt,[b(m(M),{name:"crescent",color:"primary"})])):vt.value||mt.value?mt.value?(U(),j("div",ot,[b(m(P),{icon:m(q),size:"large",color:"danger"},null,8,["icon"]),b(m(G),null,{default:f(function(){return t(n[6]||(n[6]=[C("h3",null,"Error Loading Grades",-1),C("p",null,"Please try again later",-1)]))}),_:1}),b(m(D),{fill:"clear",onClick:ht},{default:f(function(){return t(n[7]||(n[7]=[k("Retry",-1)]))}),_:1})])):(U(),d(m(L),{key:3,lines:"none"},{default:f(function(){return[(U(!0),j($,null,R(pt.value,function(t,e){return U(),d(m(H),{key:e},{default:f(function(){return[b(m(J),{class:"assessment-item"},{default:f(function(){return[b(m(P),{slot:"start",icon:m(K),color:"primary"},null,8,["icon"]),b(m(V),{class:"assessment-content"},{default:f(function(){return[C("div",it,[b(m(G),{class:"assessment-title"},{default:f(function(){return[k(N(t.assignment_name||"Assignment"),1)]}),_:2},1024),b(m(W),{color:(e=bt(t),e>=85?"success":e>=70?"primary":e>=50?"warning":"danger")},{default:f(function(){return[k(N(bt(t))+"% ",1)]}),_:2},1032,["color"])]),C("div",ut,[b(m(G),{class:"assessment-score"},{default:f(function(){return[k(N(t.score_numerator)+"/"+N(t.score_denominator),1)]}),_:2},1024),b(m(G),{class:"assessment-date"},{default:f(function(){return[k(N((e=t.created_at,n=new Date(e),r=n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),a=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),"".concat(r,", ").concat(a,":").concat(o))),1)];var e,n,r,a,o}),_:2},1024)])];var e}),_:2},1024)]}),_:2},1024),b(m(Y),{side:"end"},{default:f(function(){return[b(m(Q),{color:"tertiary",onClick:function(e){return function(t){console.log("Viewing details for:",t)}(t)}},{default:f(function(){return[b(m(P),{slot:"icon-only",icon:m(X)},null,8,["icon"])]}),_:1},8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})):(U(),j("div",at,[b(m(P),{icon:m(F),size:"large",color:"medium"},null,8,["icon"]),b(m(G),null,{default:f(function(){return t(n[5]||(n[5]=[C("h3",null,"No Grades Available",-1),C("p",null,"Your grades will appear here once they're posted",-1)]))}),_:1})]))]}),_:1})]}),_:1})}}});e("default",Z(st,[["__scopeId","data-v-b4da8244"]]))}}})}();
