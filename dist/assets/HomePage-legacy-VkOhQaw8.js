System.register(["./index-legacy-LZepmReL.js","./index-legacy-DduMCVS-.js"],function(t,a){"use strict";var e,n,o,i,l,r,c,d,s,u,p,g,v,f,m,x,h,b,_,y,k,w,z,q,C,S,A,j,N,D,E,R,T,I,P,B,G,L,M,O,H,F,J;return{setters:[t=>{e=t.d,n=t.r,o=t.c,i=t.S,l=t.a,r=t.o,c=t.b,d=t.w,s=t.u,u=t.I,p=t.e,g=t.f,v=t.g,f=t.h,m=t.i,x=t.j,h=t.k,b=t.l,_=t.t,y=t.m,k=t.n,w=t.p,z=t.q,q=t.s,C=t.v,S=t.x,A=t.y,j=t.z,N=t.A,D=t.B,E=t.C,R=t.D,T=t.E,I=t.F,P=t.G,B=t.H,G=t.J,L=t.K,M=t.L,O=t.M,H=t.N,F=t._},t=>{J=t.T}],execute:function(){var a=document.createElement("style");a.textContent="ion-toolbar[data-v-42e82624]{--background: linear-gradient( 135deg, var(--ion-color-primary), var(--ion-color-secondary) );--color: white;--min-height: 80px}.toolbar-avatar[data-v-42e82624]{width:40px;height:40px;margin-right:12px;border:2px solid rgba(255,255,255,.3)}.toolbar-title[data-v-42e82624]{padding-left:8px}.greeting[data-v-42e82624]{font-size:14px;font-weight:400;opacity:.9}.student-name[data-v-42e82624]{font-size:18px;font-weight:600}.loading-container[data-v-42e82624]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;text-align:center}.loading-container ion-spinner[data-v-42e82624]{width:48px;height:48px;margin-bottom:16px}.loading-container p[data-v-42e82624]{color:var(--ion-color-medium);margin-top:8px}.content-card[data-v-42e82624]{margin:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08)}ion-card-header[data-v-42e82624]{padding-bottom:8px}ion-card-title[data-v-42e82624]{display:flex;align-items:center;font-size:18px;font-weight:600}ion-card-title ion-icon[data-v-42e82624]{margin-right:8px;color:var(--ion-color-primary)}ion-card-content[data-v-42e82624]{padding-top:0}.notification-content[data-v-42e82624],.attendance-content[data-v-42e82624]{margin-bottom:16px}.notification-content p[data-v-42e82624],.attendance-content p[data-v-42e82624]{margin-bottom:4px;color:var(--ion-color-dark)}ion-note[data-v-42e82624]{font-size:14px;color:var(--ion-color-medium)}.empty-state[data-v-42e82624]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px 0;text-align:center;color:var(--ion-color-medium)}.empty-state ion-icon[data-v-42e82624]{font-size:48px;margin-bottom:8px;opacity:.5}.empty-state p[data-v-42e82624]{margin:0;font-size:14px}.view-all-button[data-v-42e82624]{--color: var(--ion-color-primary);margin-top:8px}.quick-actions-grid[data-v-42e82624]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.quick-action-button[data-v-42e82624]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;height:100%;margin:0}.quick-action-button .action-icon[data-v-42e82624]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:var(--ion-color-light);border-radius:50%;margin:0 auto 8px}.quick-action-button ion-icon[data-v-42e82624]{font-size:24px;color:var(--ion-color-primary)}.quick-action-button ion-label[data-v-42e82624]{font-size:12px;font-weight:500;color:var(--ion-color-dark);white-space:normal;margin-top:4px}ion-tab-bar[data-v-42e82624]{--background: white;--border: none;box-shadow:0 -2px 10px rgba(0,0,0,.08);padding-top:8px;padding-bottom:8px;height:60px}ion-tab-button[data-v-42e82624]{--color: var(--ion-color-medium);--color-selected: var(--ion-color-primary)}ion-tab-button ion-icon[data-v-42e82624]{font-size:24px}ion-tab-button ion-label[data-v-42e82624]{font-size:12px;margin-top:4px}@media (max-width: 400px){.quick-actions-grid[data-v-42e82624]{grid-template-columns:repeat(2,1fr)}ion-tab-button ion-icon[data-v-42e82624]{font-size:22px}ion-tab-button ion-label[data-v-42e82624]{font-size:11px}}@media (min-width: 768px){.content-card[data-v-42e82624]{margin:16px auto;max-width:600px}}\n",document.head.appendChild(a);const V=["src"],Y={class:"greeting"},$={class:"student-name"},K={key:0,class:"loading-container"},Q={key:1},U={key:0,class:"notification-content"},W={key:1,class:"empty-state"},X={key:0,class:"attendance-content"},Z={key:1,class:"empty-state"},tt={class:"quick-actions-grid"},at={class:"action-icon"},et={class:"action-icon"},nt={class:"action-icon"};t("default",F(e({__name:"HomePage",setup(t){const a=localStorage.getItem("parisklegg_token")||"",e=localStorage.getItem("parisklegg_user"),F=e?JSON.parse(e):null,ot=(null==F?void 0:F.fullname)||"",it=g(),lt=n(!0),rt=n([]),ct=n([]),dt=o(()=>{const t=(new Date).getHours();return t<12?"Good Morning":t<18?"Good Afternoon":"Good Evening"}),st=o(()=>rt.value.length>0?rt.value[0]:null),ut=o(()=>ct.value.length>0?ct.value[0]:null),pt=o(()=>"/assets/img/login-logo.png"),gt=t=>{const a=new Date(t),e=new Date,n=Math.abs(e.getTime()-a.getTime()),o=Math.floor(n/864e5);return 0===o?"Today":1===o?"Yesterday":o<7?`${o} days ago`:a.toLocaleDateString()},vt=()=>it.push("/tutorships"),ft=()=>it.push("/notifications"),mt=()=>it.push("/settings"),xt=async()=>{lt.value=!0;try{await ht(),await J.show({text:"Data refreshed",position:"top"})}catch(t){console.error("Refresh error:",t),await J.show({text:"Refresh failed",position:"top"})}finally{lt.value=!1}},ht=async()=>{try{const[t,a]=await Promise.all([p.get("https://school.klgilc.com/api/notifications",{headers:bt()}),p.get("https://school.klgilc.com/api/attendances",{headers:bt()})]);rt.value=t.data,ct.value=a.data}catch(t){_t(t)}},bt=()=>({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a}`}),_t=t=>{if(console.error("Error fetching data:",t),p.isAxiosError(t)){var a;if(401===(null===(a=t.response)||void 0===a?void 0:a.status))return it.replace("/"),void J.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void J.show({text:"Request timeout. Please try again",position:"top"})}J.show({text:"Failed to load data. Please try again later",position:"top"})};return i.setOverlaysWebView({overlay:!1}),i.setBackgroundColor({color:"#ffffff"}),i.setStyle({style:l.Light}),r(async()=>{try{await ht()}catch(t){console.error("Initialization error:",t)}finally{lt.value=!1}}),(t,a)=>(H(),c(s(u),null,{default:d(()=>[v(s(z),{class:"ion-no-border"},{default:d(()=>[v(s(f),null,{default:d(()=>[v(s(m),{slot:"start"},{default:d(()=>[v(s(x),{class:"toolbar-avatar"},{default:d(()=>[h("img",{src:pt.value,alt:"Student"},null,8,V)]),_:1})]),_:1}),v(s(b),{class:"toolbar-title"},{default:d(()=>[h("div",Y,_(dt.value),1),h("div",$,_(s(ot)),1)]),_:1}),v(s(m),{slot:"end"},{default:d(()=>[v(s(y),{onClick:xt,fill:"clear"},{default:d(()=>[v(s(k),{icon:s(w),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),v(s(O),{fullscreen:!0},{default:d(()=>[lt.value?(H(),q("div",K,[v(s(C),{name:"crescent"}),a[0]||(a[0]=h("p",null,"Loading your data...",-1))])):(H(),q("div",Q,[v(s(S),{class:"content-card"},{default:d(()=>[v(s(A),null,{default:d(()=>[v(s(j),null,{default:d(()=>[v(s(k),{icon:s(D)},null,8,["icon"]),a[1]||(a[1]=N(" Recent Updates ",-1))]),_:1,__:[1]})]),_:1}),v(s(E),null,{default:d(()=>{return[st.value?(H(),q("div",U,[h("p",null,_((t=st.value.notification_body,e=100,t?t.length>e?t.substring(0,e)+"...":t:"")),1),v(s(R),null,{default:d(()=>[N(_(gt(st.value.created_at)),1)]),_:1})])):(H(),q("div",W,[v(s(k),{icon:s(T)},null,8,["icon"]),a[2]||(a[2]=h("p",null,"No recent updates",-1))])),v(s(y),{expand:"block",fill:"clear",size:"small",onClick:ft,class:"view-all-button"},{default:d(()=>a[3]||(a[3]=[N(" View All Notifications ",-1)])),_:1,__:[3]})];var t,e}),_:1})]),_:1}),v(s(S),{class:"content-card"},{default:d(()=>[v(s(A),null,{default:d(()=>[v(s(j),null,{default:d(()=>[v(s(k),{icon:s(I)},null,8,["icon"]),a[4]||(a[4]=N(" Recent Attendance ",-1))]),_:1,__:[4]})]),_:1}),v(s(E),null,{default:d(()=>[ut.value?(H(),q("div",X,[h("p",null,[a[5]||(a[5]=N(" You were marked ",-1)),h("strong",null,_(ut.value.student_attendance),1)]),v(s(R),null,{default:d(()=>[N(_(gt(ut.value.created_at)),1)]),_:1})])):(H(),q("div",Z,[v(s(k),{icon:s(P)},null,8,["icon"]),a[6]||(a[6]=h("p",null,"No attendance records yet",-1))]))]),_:1})]),_:1}),v(s(S),{class:"content-card"},{default:d(()=>[v(s(A),null,{default:d(()=>[v(s(j),null,{default:d(()=>[v(s(k),{icon:s(B)},null,8,["icon"]),a[7]||(a[7]=N(" Quick Actions ",-1))]),_:1,__:[7]})]),_:1}),v(s(E),null,{default:d(()=>[h("div",tt,[v(s(y),{fill:"clear",class:"quick-action-button",onClick:vt},{default:d(()=>[h("div",at,[v(s(k),{icon:s(G)},null,8,["icon"])]),v(s(L),null,{default:d(()=>a[8]||(a[8]=[N("Classes",-1)])),_:1,__:[8]})]),_:1}),v(s(y),{fill:"clear",class:"quick-action-button",onClick:ft},{default:d(()=>[h("div",et,[v(s(k),{icon:s(D)},null,8,["icon"])]),v(s(L),null,{default:d(()=>a[9]||(a[9]=[N("Notifications",-1)])),_:1,__:[9]})]),_:1}),v(s(y),{fill:"clear",class:"quick-action-button",onClick:mt},{default:d(()=>[h("div",nt,[v(s(k),{icon:s(M)},null,8,["icon"])]),v(s(L),null,{default:d(()=>a[10]||(a[10]=[N("Settings",-1)])),_:1,__:[10]})]),_:1})])]),_:1})]),_:1})]))]),_:1})]),_:1}))}}),[["__scopeId","data-v-42e82624"]]))}}});
