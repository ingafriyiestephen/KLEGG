const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-B3G-ZPr1.js","assets/index-BmZ7d-Na.js","assets/index-B2feEV0F.css"])))=>i.map(i=>d[i]);
import{ae as V,af as B,d as N,r as f,o as M,S as v,a as K,b as R,w as o,u as e,I as U,g as l,h as $,l as q,A as n,q as G,k as c,s as j,a9 as F,t as k,a4 as S,ag as w,K as r,a7 as g,n as d,ah as H,ai as W,aj as z,ak as J,aa as Q,al as X,am as Y,an as Z,ao as ee,m as te,ap as le,aq as oe,M as ae,e as C,f as se,N as O,_ as ne}from"./index-BmZ7d-Na.js";import{T as _}from"./index-BNufPZAv.js";const ie=V("Share",{web:()=>B(()=>import("./web-B3G-ZPr1.js"),__vite__mapDeps([0,1,2])).then(b=>new b.ShareWeb)}),re={class:"profile-section"},ue=["src"],de={class:"profile-info"},ge={key:0},ce={class:"logout-section"},P="https://www.gravatar.com/avatar/?d=mp",me=N({__name:"SettingsPage",setup(b){const I=se(),i=f({name:"",id:0,otp:0,phone:""}),A=["Close"],p=f(!1),h=localStorage.getItem("parisklegg_token")||"";let y=null;const u=f(!1),x=s=>{document.body.classList.toggle("dark",s),localStorage.setItem("darkMode",s)};M(async()=>{const s=localStorage.getItem("darkMode"),t=localStorage.getItem("parisklegg_user");if(t){const a=JSON.parse(t);a&&(i.value.name=a.fullname,i.value.id=a.user_id,i.value.email=a.username,i.value.image=a.profile_photo_path||P,y=a.user_id),console.log("User data:",a.user_id)}if(s!==null)u.value=s==="true",document.body.classList.toggle("dark",u.value);else{const a=window.matchMedia("(prefers-color-scheme: dark)");u.value=a.matches,document.body.classList.toggle("dark",u.value),a.addEventListener("change",E=>{u.value=E.matches,document.body.classList.toggle("dark",u.value)})}}),v.setOverlaysWebView({overlay:!1}),v.setBackgroundColor({color:"#ffffff"}),v.setStyle({style:K.Light});const L=async()=>{await ie.share({title:"Download Klegg.",text:"Get the Klegg app on the Google Play Store.",url:"https://play.google.com/store/apps/details?id=com.webmucho.klegg",dialogTitle:"Available to learners at the Klegg Institute of Language and Communication"})},m=s=>{window.location.href=s},T=async()=>{p.value=!0;try{const t=(await C.post("https://klegg-app-whh7m.ondigitalocean.app/api/logout",{user_id:y,bearer_token:h},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}})).data;console.log(t.data),t.success===!0&&(console.log("User logged out"),localStorage.removeItem("parisklegg_user"),localStorage.removeItem("parisklegg_token"),I.replace("/"))}catch(s){D(s)}finally{p.value=!1}},D=s=>{var t;if(console.error("Error fetching data:",s),C.isAxiosError(s)){if(((t=s.response)==null?void 0:t.status)===401){I.replace("/"),_.show({text:"Session expired. Please login again",position:"top",duration:"long"});return}if(s.code==="ECONNABORTED"){_.show({text:"Request timeout. Please try again",position:"top"});return}}_.show({text:"Failed to load data. Please try again later",position:"top"})};return(s,t)=>(O(),R(e(U),null,{default:o(()=>[l(e(G),null,{default:o(()=>[l(e($),null,{default:o(()=>[l(e(q),null,{default:o(()=>[...t[6]||(t[6]=[n("Settings",-1)])]),_:1})]),_:1})]),_:1}),l(e(ae),{class:"ion-padding"},{default:o(()=>[c("div",re,[c("img",{src:i.value.image||P,class:"profile-img",alt:"Profile Picture"},null,8,ue),c("div",de,[c("h2",null,k(i.value.name||"User Name"),1),i.value.phone?(O(),j("p",ge,k(i.value.phone||"Phone"),1)):F("",!0),c("p",null,k(i.value.email||"Email"),1)])]),l(e(S),{lines:"full",class:"settings-list"},{default:o(()=>[l(e(w),null,{default:o(()=>[l(e(r),null,{default:o(()=>[...t[7]||(t[7]=[n("Appearance",-1)])]),_:1})]),_:1}),l(e(g),{lines:"none"},{default:o(()=>[l(e(d),{slot:"start",icon:e(H),color:"medium"},null,8,["icon"]),l(e(r),null,{default:o(()=>[...t[8]||(t[8]=[n("Dark Mode",-1)])]),_:1}),l(e(W),{slot:"end",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),onIonChange:t[1]||(t[1]=a=>x(a.detail.checked))},null,8,["modelValue"])]),_:1})]),_:1}),l(e(S),{lines:"full",class:"settings-list"},{default:o(()=>[l(e(w),null,{default:o(()=>[l(e(r),null,{default:o(()=>[...t[9]||(t[9]=[n("General",-1)])]),_:1})]),_:1}),l(e(g),{button:"",detail:!0,onClick:t[2]||(t[2]=a=>m("https://legal.klgilc.com/privacy-policy.html"))},{default:o(()=>[l(e(d),{slot:"start",icon:e(z),color:"medium"},null,8,["icon"]),l(e(r),null,{default:o(()=>[...t[10]||(t[10]=[n("Privacy Policy",-1)])]),_:1})]),_:1}),l(e(g),{button:"",detail:!0,onClick:t[3]||(t[3]=a=>m("https://legal.klgilc.com/terms-of-service.html"))},{default:o(()=>[l(e(d),{slot:"start",icon:e(J),color:"medium"},null,8,["icon"]),l(e(r),null,{default:o(()=>[...t[11]||(t[11]=[n("Terms of Service",-1)])]),_:1})]),_:1}),l(e(g),{button:"",detail:!0,onClick:t[4]||(t[4]=a=>m("https://wa.me/+233208345390"))},{default:o(()=>[l(e(d),{slot:"start",icon:e(Q),color:"medium"},null,8,["icon"]),l(e(r),null,{default:o(()=>[...t[12]||(t[12]=[n("Contact Support",-1)])]),_:1})]),_:1}),l(e(g),{button:"",detail:!0,onClick:t[5]||(t[5]=a=>m("https://legal.klgilc.com/account-deletion.html"))},{default:o(()=>[l(e(d),{slot:"start",icon:e(X),color:"medium"},null,8,["icon"]),l(e(r),null,{default:o(()=>[...t[13]||(t[13]=[n("Delete Account",-1)])]),_:1})]),_:1}),l(e(g),{button:"",detail:!0,onClick:L},{default:o(()=>[l(e(d),{slot:"start",icon:e(Y),color:"medium"},null,8,["icon"]),l(e(r),null,{default:o(()=>[...t[14]||(t[14]=[n("Share App",-1)])]),_:1})]),_:1}),l(e(g),{button:"",id:"about-alert",detail:!0},{default:o(()=>[l(e(d),{slot:"start",icon:e(Z),color:"medium"},null,8,["icon"]),l(e(r),null,{default:o(()=>[...t[15]||(t[15]=[n("About",-1)])]),_:1})]),_:1}),l(e(ee),{trigger:"about-alert",header:"Klegg","sub-header":"Version 1.0.7",message:"â’¸ 2025 - Klegg Institute of Language and Communication.",buttons:A})]),_:1}),c("div",ce,[l(e(te),{fill:"clear",color:"medium",onClick:T,class:"logout-button"},{default:o(()=>[l(e(d),{slot:"start",icon:e(le)},null,8,["icon"]),t[16]||(t[16]=n(" Sign Out ",-1))]),_:1})]),l(e(oe),{"is-open":p.value,message:"Please wait..."},null,8,["is-open"])]),_:1})]),_:1}))}}),ve=ne(me,[["__scopeId","data-v-d7b002f8"]]);export{ve as default};
