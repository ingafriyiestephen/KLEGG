!function(){function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,o)}return e}function e(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach(function(n){o(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function o(n,e,o){return(e=function(n){var e=function(n,e){if("object"!=t(n)||!n)return n;var o=n[Symbol.toPrimitive];if(void 0!==o){var a=o.call(n,e||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==t(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return r(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=Array(n);e<n;e++)o[e]=t[e];return o}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",a=e.toStringTag||"@@toStringTag";function r(e,o,a,r){var i=o&&o.prototype instanceof l?o:l,s=Object.create(i.prototype);return c(s,"_invoke",function(e,o,a){var r,i,c,l=0,s=a||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(n,e){return r=n,i=0,c=t,p.n=e,u}};function f(e,o){for(i=e,c=o,n=0;!d&&l&&!a&&n<s.length;n++){var a,r=s[n],f=p.p,v=r[2];e>3?(a=v===o)&&(c=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=t):r[0]<=f&&((a=e<2&&f<r[1])?(i=0,p.v=o,p.n=r[1]):f<v&&(a=e<3||r[0]>o||o>v)&&(r[4]=e,r[5]=o,p.n=v,i=0))}if(a||e>1)return u;throw d=!0,o}return function(a,s,v){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&f(s,v),i=s,c=v;(n=i<2?t:c)||!d;){r||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(l=2,r){if(i||(a="next"),n=r[a]){if(!(n=n.call(r,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,i<2&&(i=0)}else 1===i&&(n=r.return)&&n.call(r),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);r=t}else if((n=(d=p.n<0)?c:e.call(o,p))!==u)break}catch(n){r=t,i=1,c=n}finally{l=1}}return{value:n,done:d}}}(e,a,r),!0),s}var u={};function l(){}function s(){}function d(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(c(n={},o,function(){return this}),n),f=d.prototype=l.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=d,c(f,"constructor",d),c(d,"constructor",s),s.displayName="GeneratorFunction",c(d,a,"GeneratorFunction"),c(f),c(f,a,"Generator"),c(f,o,function(){return this}),c(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:r,m:v}})()}function c(t,n,e,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}c=function(t,n,e,o){function r(n,e){c(t,n,function(t){return this._invoke(n,e,t)})}n?a?a(t,n,{value:e,enumerable:!o,configurable:!o,writable:!o}):t[n]=e:(r("next",0),r("throw",1),r("return",2))},c(t,n,e,o)}function u(t,n,e,o,a,r,i){try{var c=t[r](i),u=c.value}catch(t){return void e(t)}c.done?n(u):Promise.resolve(u).then(o,a)}function l(t){return function(){var n=this,e=arguments;return new Promise(function(o,a){var r=t.apply(n,e);function i(t){u(r,o,a,i,c,"next",t)}function c(t){u(r,o,a,i,c,"throw",t)}i(void 0)})}}System.register(["./index-legacy-DacpHz19.js","./index-legacy-Dgim11H5.js"],function(t,n){"use strict";var o,r,c,u,s,d,p,f,v,m,g,h,b,y,_,k,w,x,j,O,S,C,P,E,z,D,N,T,A,I,L,R,U,G,F,$,B,V,J,M,Y,q,H,W,Z,Q,X,K,tt,nt,et,ot,at,rt,it,ct,ut,lt,st,dt,pt,ft,vt,mt;return{setters:[function(t){o=t.d,r=t.r,c=t.ao,u=t.c,s=t.o,d=t.P,p=t.a,f=t.w,v=t.u,m=t.I,g=t.b,h=t.e,b=t.f,y=t.g,_=t.h,k=t.L,w=t.aq,x=t.m,j=t.B,O=t.s,S=t.v,C=t.a9,P=t.x,E=t.p,z=t.a1,D=t.a2,N=t.l,T=t.n,A=t.y,I=t.z,L=t.A,R=t.t,U=t.aQ,G=t.D,F=t.a6,$=t.a0,B=t.a8,V=t.T,J=t.aH,M=t.R,Y=t.S,q=t.aR,H=t.a3,W=t.aS,Z=t.a4,Q=t.a5,X=t.aT,K=t.aU,tt=t.aV,nt=t.N,et=t.aW,ot=t.aX,at=t.aY,rt=t.aG,it=t.O,ct=t.k,ut=t.ab,lt=t.aZ,st=t.a_,dt=t.a$,pt=t.ac,ft=t.ad,vt=t._},function(t){mt=t.T}],execute:function(){var n=document.createElement("style");n.textContent=".loading-container[data-v-076423c1]{display:flex;justify-content:center;align-items:center;height:100px;margin:20px 0}.error-state[data-v-076423c1]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.error-state ion-icon[data-v-076423c1]{margin-bottom:16px;color:var(--ion-color-medium)}.error-state h3[data-v-076423c1]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-text-color)}.error-state p[data-v-076423c1]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.notification-card[data-v-076423c1]{margin:0;border-radius:0;box-shadow:none;border-bottom:1px solid var(--ion-border-color);background:var(--ion-card-background)}.notification-title[data-v-076423c1]{color:var(--ion-text-color);white-space:pre-line}.notification-body[data-v-076423c1]{font-size:1rem;line-height:1.5;color:var(--ion-text-color);white-space:pre-line}.attachment-container[data-v-076423c1]{margin:16px 0}.image-attachment[data-v-076423c1]{border-radius:12px;overflow:hidden;background:var(--ion-color-light);cursor:pointer;transition:transform .2s ease}.image-attachment[data-v-076423c1]:hover{transform:scale(1.02)}.attachment-image[data-v-076423c1]{width:100%;max-height:400px;object-fit:contain;display:block}.file-attachment[data-v-076423c1]{margin:16px 0}.file-attachment ion-item[data-v-076423c1]{--background: var(--ion-color-light);--border-radius: 12px;--padding-start: 16px;--padding-end: 16px;margin:8px 0}.reactions-container[data-v-076423c1]{display:flex;gap:8px;margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-border-color)}.reaction-button[data-v-076423c1]{--color: var(--ion-color-medium);--background: var(--ion-item-background);--background-hover: var(--ion-color-light-shade);--background-activated: var(--ion-color-light-tint)}.comments-section[data-v-076423c1]{margin-top:16px;background:var(--ion-background-color)}.comment-item[data-v-076423c1]{--padding-start: 0;--inner-padding-end: 0;--background: var(--ion-item-background);border-bottom:1px solid var(--ion-border-color)}.comment-item[data-v-076423c1]:last-child{border-bottom:none}.comment-item ion-avatar[data-v-076423c1]{width:40px;height:40px;margin-right:12px}.comment-item h3[data-v-076423c1]{font-size:.9rem;font-weight:500;color:var(--ion-text-color)}.comment-item p[data-v-076423c1]{font-size:.9rem;color:var(--ion-text-color);margin:4px 0;opacity:.9}.comment-date[data-v-076423c1]{font-size:.7rem;color:var(--ion-color-medium)}.comment-input-container[data-v-076423c1]{position:sticky;bottom:0;background:var(--ion-background-color);padding:8px;border-top:1px solid var(--ion-border-color)}.comment-input-container ion-textarea[data-v-076423c1]{background:var(--ion-color-step-100);border-radius:20px;--padding-start: 12px;--padding-end: 12px;font-size:.9rem;--color: var(--ion-text-color);--placeholder-color: var(--ion-color-medium);--placeholder-opacity: .6}ion-popover[data-v-076423c1]{--background: var(--ion-card-background);--color: var(--ion-text-color)}ion-popover ion-content[data-v-076423c1]{--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--background: var(--ion-card-background)}.reaction-picker-buttons[data-v-076423c1]{display:flex;gap:4px;flex-wrap:wrap}.reaction-picker-button[data-v-076423c1]{--padding-start: 8px;--padding-end: 8px;--background: var(--ion-item-background);--color: var(--ion-text-color);--border-radius: 16px;font-size:1.2rem}.vote-buttons[data-v-076423c1]{display:flex;flex-direction:column;align-items:center;margin-right:8px;background:var(--ion-item-background);border-radius:20px;padding:4px}.vote-button[data-v-076423c1]{--color: var(--ion-color-medium);--background: transparent;--background-hover: var(--ion-color-light-shade);--background-activated: var(--ion-color-light-tint)}.vote-button.active[data-v-076423c1]{--color: var(--ion-color-primary)}.vote-count[data-v-076423c1]{font-size:.8em;margin:4px 0;color:var(--ion-text-color);font-weight:500}.image-modal[data-v-076423c1]{--width: 100%;--height: 100%}.modal-content[data-v-076423c1]{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#000}.modal-image[data-v-076423c1]{max-width:100%;max-height:100%;object-fit:contain}.close-btn[data-v-076423c1]{position:absolute;top:16px;right:16px;--background: rgba(255, 255, 255, .2)}ion-icon[data-v-076423c1]{width:16px;height:16px;color:var(--ion-color-medium)}@media (max-width: 480px){.comment-item[data-v-076423c1]{--padding-start: 8px;--padding-end: 8px}.vote-buttons[data-v-076423c1]{margin-right:4px;padding:2px}.attachment-image[data-v-076423c1]{max-height:300px}}.comment-input-container ion-textarea[data-v-076423c1]:focus-within{background:var(--ion-color-step-200);outline:2px solid var(--ion-color-primary-tint)}.reaction-button[data-v-076423c1]:focus,.vote-button[data-v-076423c1]:focus{outline:2px solid var(--ion-color-primary);outline-offset:2px}.notification-card.new-item[data-v-076423c1]{animation:fadeInUp-076423c1 .3s ease-out}@keyframes fadeInUp-076423c1{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}\n/*$vite$:1*/",document.head.appendChild(n);var gt={key:0,class:"loading-container"},ht={key:1,class:"error-state"},bt={key:2},yt={class:"notification-body"},_t={key:0,class:"attachment-container"},kt={class:"image-attachment"},wt=["src","alt"],xt={key:1,class:"file-attachment"},jt={class:"reactions-container"},Ot={class:"comments-section"},St=["src"],Ct={class:"comment-date"},Pt={slot:"end",class:"vote-buttons"},Et={class:"vote-count"},zt={class:"vote-count"},Dt={class:"comment-input-container"},Nt={key:0,class:"modal-content"},Tt=["src","alt"],At=o({__name:"NotificationPage",setup:function(t){var n=localStorage.getItem("parisklegg_token")||"",o=localStorage.getItem("parisklegg_user");o&&JSON.parse(o);var vt=null,At=r({name:"",id:0,otp:0,phone:""}),It=c(),Lt=h(),Rt=Number(It.params.id),Ut=r(!0),Gt=r(!1),Ft=r(!1),$t=r(!1),Bt=r(!1),Vt=r(null),Jt=r([]),Mt=r(1),Yt=r(!0),qt=r(""),Ht=r(null),Wt=r(!1),Zt=r(null),Qt=r(0),Xt=r(null),Kt=["like","heart","thumbs-up"],tn=u(function(){var t;return(null===(t=Vt.value)||void 0===t||null===(t=t.user_reaction)||void 0===t?void 0:t.reaction_type)||null}),nn=function(t){return{like:ft,heart:pt,"thumbs-up":ut}[t]||ft},en=function(t){if(!t)return"Just now";var n=t.replace(/\.\d{6}Z$/,""),e=new Date(n);if(isNaN(e.getTime()))return"Invalid date";var o=e.toLocaleString("en-US",{month:"short"}),a=e.getDate(),r=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0");return"".concat(o," ").concat(a,", ").concat(r,":").concat(i)},on=function(t){return"https://school.klgilc.com/api/files/".concat(t,"/view")},an=function(t){return[".png",".jpg",".jpeg",".gif",".webp",".bmp",".svg"].some(function(n){return t.toLowerCase().endsWith(n)})},rn=function(t){var n=t.target;n.style.opacity="0.5",n.alt="Failed to load image"},cn=function(){var t=l(i().m(function t(n){var e,o,a,r,c,u,l,s;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,mt.show({text:"Preparing download...",position:"top"});case 1:return t.v,t.n=2,g.get("https://school.klgilc.com/api/files/".concat(n,"/download"),{headers:hn(),responseType:"blob",timeout:3e4});case 2:return e=t.v,o=new Blob([e.data]),a=window.URL.createObjectURL(o),(r=document.createElement("a")).href=a,c=e.headers["content-disposition"],u=n,c&&(l=c.match(/filename="?(.+)"?/))&&(u=l[1]),r.download=u,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),t.n=3,mt.show({text:"Download started successfully",position:"top",duration:"short"});case 3:t.n=5;break;case 4:return t.p=4,s=t.v,console.error("Download error:",s),t.n=5,mt.show({text:"Download failed. Please try again.",position:"top",duration:"long"});case 5:return t.a(2)}},t,null,[[0,4]])}));return function(n){return t.apply(this,arguments)}}(),un=function(){var t=l(i().m(function t(){var n,e;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,Ut.value=!0,Gt.value=!1,t.n=1,g.get("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat(Rt),{headers:hn(),timeout:2e4});case 1:if(n=t.v,Vt.value=n.data,console.log("Notification loaded:",n.data),0!==n.data.is_read){t.n=2;break}return t.n=2,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat(Rt,"/read"),{},{headers:hn(),timeout:1e4});case 2:return t.n=3,ln();case 3:t.n=5;break;case 4:t.p=4,e=t.v,console.error("Error loading notification:",e),bn(e),Gt.value=!0;case 5:return t.p=5,Ut.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[0,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),ln=function(){var t=l(i().m(function t(){var n,e,o,r=arguments;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:1,t.p=1,t.n=2,g.get("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat(Rt,"/comments"),{params:{page:n},headers:hn(),timeout:1e4});case 2:e=t.v,Jt.value=1===n?e.data.data:[].concat(a(Jt.value),a(e.data.data)),Mt.value=n,Yt.value=!!e.data.next_page_url,t.n=4;break;case 3:t.p=3,o=t.v,console.error("Error loading comments:",o);case 4:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),sn=function(){var t=l(i().m(function t(n){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ln(Mt.value+1);case 1:n.target.complete();case 2:return t.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}(),dn=function(){var t=l(i().m(function t(){var n,e,o;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(qt.value.trim()){t.n=1;break}return t.a(2);case 1:return Ft.value=!0,t.p=2,t.n=3,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat(Rt,"/create_comment"),{comment_body:qt.value},{headers:hn(),timeout:1e4});case 3:n=t.v,e={id:n.data.comment.id,comment_body:n.data.comment.comment_body,created_at:n.data.comment.created_at,user_id:n.data.comment.user_id,user_name:n.data.comment.user_name,avatar:n.data.comment.avatar||null,upvotes_count:0,downvotes_count:0,user_vote:null},Jt.value.unshift(e),qt.value="",Vt.value&&(Vt.value.comments_count+=1),t.n=5;break;case 4:t.p=4,o=t.v,console.error("Error adding comment:",o);case 5:return t.p=5,Ft.value=!1,t.f(5);case 6:return t.a(2)}},t,null,[[2,4,5,6]])}));return function(){return t.apply(this,arguments)}}(),pn=function(){var t=l(i().m(function t(n){var e;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return Ht.value=n,t.p=1,t.n=2,g.delete("https://klegg-app-whh7m.ondigitalocean.app/api/comments/".concat(n),{headers:hn(),timeout:1e4});case 2:Jt.value=Jt.value.filter(function(t){return t.id!==n}),Vt.value&&(Vt.value.comments_count-=1),t.n=4;break;case 3:t.p=3,e=t.v,console.error("Error deleting comment:",e);case 4:return t.p=4,Ht.value=null,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(n){return t.apply(this,arguments)}}(),fn=function(){var t=l(i().m(function t(n){return i().w(function(t){for(;;)switch(t.n){case 0:if(tn.value!==n){t.n=2;break}return t.n=1,gn();case 1:t.n=3;break;case 2:return t.n=3,mn(n);case 3:return t.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}(),vn=function(){var t=l(i().m(function t(n,o){var a,r,c,u,l;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!Bt.value){t.n=1;break}return t.a(2);case 1:if(Bt.value=!0,t.p=2,-1!==(a=Jt.value.findIndex(function(t){return t.id===n}))){t.n=3;break}return t.a(2);case 3:return r=Jt.value[a],(c=r.user_vote)===o?(r.user_vote=null,"upvote"===o&&r.upvotes_count--,"downvote"===o&&r.downvotes_count--):("upvote"===c&&r.upvotes_count--,"downvote"===c&&r.downvotes_count--,r.user_vote=o,"upvote"===o&&r.upvotes_count++,"downvote"===o&&r.downvotes_count++),t.n=4,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/comments/".concat(n,"/vote"),{vote_type:o},{headers:hn(),timeout:1e4});case 4:u=t.v,Jt.value[a]=e(e({},Jt.value[a]),{},{upvotes_count:u.data.upvotes_count,downvotes_count:u.data.downvotes_count,user_vote:u.data.user_vote}),t.n=6;break;case 5:t.p=5,l=t.v,console.error("Error voting on comment:",l),ln(Mt.value);case 6:return t.p=6,Bt.value=!1,t.f(6);case 7:return t.a(2)}},t,null,[[2,5,6,7]])}));return function(n,e){return t.apply(this,arguments)}}(),mn=function(){var t=l(i().m(function t(n){var e,o;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return $t.value=!0,Wt.value=!1,t.p=1,t.n=2,g.post("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat(Rt,"/reactions"),{reaction_type:n},{headers:hn(),timeout:1e4});case 2:e=t.v,Vt.value&&(Vt.value.reaction_counts=e.data.reaction_counts,Vt.value.user_reaction={reaction_type:n},Zt.value=e.data.reaction_id,console.log("Reaction added:",Zt.value)),t.n=4;break;case 3:t.p=3,o=t.v,console.error("Error adding reaction:",o);case 4:return t.p=4,$t.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(n){return t.apply(this,arguments)}}(),gn=function(){var t=l(i().m(function t(){var n,e;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return $t.value=!0,t.p=1,t.n=2,g.delete("https://klegg-app-whh7m.ondigitalocean.app/api/notifications/".concat(Rt,"/delete_reaction"),{headers:hn(),timeout:1e4});case 2:n=t.v,Vt.value&&(Vt.value.reaction_counts=n.data.reaction_counts,Zt.value=0,Vt.value.user_reaction=null),t.n=4;break;case 3:t.p=3,e=t.v,console.error("Error removing reaction:",e);case 4:return t.p=4,$t.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),hn=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n)}},bn=function(t){if(console.error("Error fetching data:",t),g.isAxiosError(t)){var n;if(401===(null===(n=t.response)||void 0===n?void 0:n.status))return Lt.replace("/"),void mt.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===t.code)return void mt.show({text:"Request timeout. Please try again",position:"top"})}mt.show({text:"Failed to load data. Please try again later",position:"top"})},yn=function(t){var n=t.matches;b(n)},_n=function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return yn(t),t.addEventListener("change",yn),t};return s(function(){_n(),un();var t=localStorage.getItem("parisklegg_user");if(t){var n=JSON.parse(t);n&&(At.value.name=n.fullname,At.value.id=n.user_id,At.value.email=n.username,vt=n.user_id)}Qt.value=vt?Number(vt):0}),d(l(i().m(function t(){return i().w(function(t){for(;;)switch(t.n){case 0:_n();case 1:return t.a(2)}},t)}))),function(t,n){var e=k("ion-buttons");return it(),p(v(m),null,{default:f(function(){return[y(v(O),null,{default:f(function(){return[y(v(_),null,{default:f(function(){return[y(e,{slot:"start"},{default:f(function(){return[y(v(w))]}),_:1}),y(v(x),null,{default:f(function(){return a(n[8]||(n[8]=[j(" Notification ",-1)]))}),_:1})]}),_:1})]}),_:1}),y(v(nt),{fullscreen:!0},{default:f(function(){return[Ut.value?(it(),S("div",gt,[y(v(P),{name:"crescent",color:"primary"})])):Gt.value?(it(),S("div",ht,[y(v(E),{icon:v(z),color:"danger",size:"large"},null,8,["icon"]),y(v(D),null,{default:f(function(){return a(n[9]||(n[9]=[N("h3",null,"Error Loading Notification",-1),N("p",null,"Please try again later",-1)]))}),_:1}),y(v(T),{fill:"clear",onClick:un},{default:f(function(){return a(n[10]||(n[10]=[j("Retry",-1)]))}),_:1})])):Vt.value?(it(),S("div",bt,[y(v(A),{class:"notification-card"},{default:f(function(){return[y(v(I),null,{default:f(function(){return[y(v(L),{class:"notification-title"},{default:f(function(){return[j(R(Vt.value.title),1)]}),_:1}),y(v(U),null,{default:f(function(){return[j(R(en(Vt.value.created_at)),1)]}),_:1})]}),_:1}),y(v(G),null,{default:f(function(){return[N("p",yt,R(Vt.value.body),1),Vt.value.attachment&&an(Vt.value.attachment)?(it(),S("div",_t,[N("div",kt,[N("img",{src:on(Vt.value.attachment),alt:Vt.value.attachment,loading:"lazy",onClick:n[0]||(n[0]=function(t){return n=Vt.value.attachment,void(an(n)?Xt.value=n:cn(n));var n}),class:"attachment-image",onError:rn},null,40,wt)])])):Vt.value.attachment?(it(),S("div",xt,[y(v(F),{button:"",onClick:n[2]||(n[2]=function(t){return cn(Vt.value.attachment)})},{default:f(function(){return[y(v(E),{icon:v($),slot:"start",color:"primary"},null,8,["icon"]),y(v(B),null,{default:f(function(){return[N("h3",null,R(Vt.value.attachment),1),n[11]||(n[11]=N("p",null,"File Attachment",-1))]}),_:1}),y(v(T),{fill:"clear",slot:"end",onClick:n[1]||(n[1]=V(function(t){return cn(Vt.value.attachment)},["stop"]))},{default:f(function(){return[y(v(E),{icon:v(J)},null,8,["icon"])]}),_:1})]}),_:1})])):C("",!0),N("div",jt,[(it(!0),S(M,null,Y(Vt.value.reaction_counts,function(t,n){return it(),p(v(T),{key:n,fill:"clear",size:"small",onClick:function(t){return fn(n)},color:tn.value===n?"primary":"medium",disabled:$t.value},{default:f(function(){return[$t.value&&tn.value===n?(it(),p(v(P),{key:0,name:"dots",slot:"start"})):(it(),p(v(E),{key:1,icon:nn(n),slot:"start"},null,8,["icon"])),j(" "+R(t),1)]}),_:2},1032,["onClick","color","disabled"])}),128)),y(v(T),{fill:"clear",size:"small",onClick:n[3]||(n[3]=function(t){return Wt.value=!0}),disabled:$t.value},{default:f(function(){return[y(v(E),{icon:v(q),slot:"icon-only"},null,8,["icon"])]}),_:1},8,["disabled"])])]}),_:1})]}),_:1}),N("div",Ot,[y(v(H),null,{default:f(function(){return[y(v(W),null,{default:f(function(){return[y(v(B),null,{default:f(function(){return[j("Comments ("+R(Vt.value.comments_count)+")",1)]}),_:1})]}),_:1}),(it(!0),S(M,null,Y(Jt.value,function(t){return it(),p(v(F),{key:t.id,class:"comment-item"},{default:f(function(){return[y(v(ct),{slot:"start",style:{"margin-left":"20px"}},{default:f(function(){return[N("img",{src:t.avatar||"/assets/img/default-avatar.svg"},null,8,St)]}),_:2},1024),y(v(B),null,{default:f(function(){return[N("h3",null,R(t.user_name),1),N("p",null,R(t.comment_body),1),N("p",Ct,R(en(t.created_at)),1)]}),_:2},1024),N("div",Pt,[y(v(T),{fill:"clear",size:"small",onClick:function(n){return vn(t.id,"upvote")},disabled:Bt.value},{default:f(function(){return[y(v(E),{icon:v(ut),color:"upvote"===t.user_vote?"primary":"medium"},null,8,["icon","color"]),N("span",Et,R(t.upvotes_count),1)]}),_:2},1032,["onClick","disabled"]),y(v(T),{fill:"clear",size:"small",onClick:function(n){return vn(t.id,"downvote")},disabled:Bt.value},{default:f(function(){return[y(v(E),{icon:v(lt),color:"downvote"===t.user_vote?"danger":"medium"},null,8,["icon","color"]),N("span",zt,R(t.downvotes_count),1)]}),_:2},1032,["onClick","disabled"])]),t.user_id===Qt.value?(it(),p(v(T),{key:0,fill:"clear",color:"danger",onClick:function(n){return pn(t.id)},disabled:Ht.value===t.id},{default:f(function(){return[Ht.value===t.id?(it(),p(v(P),{key:0,name:"dots",slot:"icon-only"})):(it(),p(v(E),{key:1,icon:v(st),slot:"icon-only"},null,8,["icon"]))]}),_:2},1032,["onClick","disabled"])):C("",!0)]}),_:2},1024)}),128)),y(v(Z),{onIonInfinite:sn,threshold:"100px",disabled:!Yt.value},{default:f(function(){return[y(v(Q),{"loading-spinner":"bubbles","loading-text":"Loading more comments..."})]}),_:1},8,["disabled"])]}),_:1})]),N("div",Dt,[y(v(F),null,{default:f(function(){return[y(v(X),{modelValue:qt.value,"onUpdate:modelValue":n[4]||(n[4]=function(t){return qt.value=t}),placeholder:"Add a comment...","auto-grow":""},null,8,["modelValue"]),y(v(T),{slot:"end",fill:"clear",disabled:!qt.value.trim(),onClick:dn},{default:f(function(){return[Ft.value?(it(),p(v(P),{key:0,slot:"start",name:"dots"})):C("",!0),y(v(E),{icon:v(K),color:"primary"},null,8,["icon"])]}),_:1},8,["disabled"])]}),_:1})])])):C("",!0),y(v(tt),{"is-open":Wt.value,onDidDismiss:n[5]||(n[5]=function(t){return Wt.value=!1})},{default:f(function(){return[y(v(nt),null,{default:f(function(){return[y(v(et),null,{default:f(function(){return[y(v(ot),null,{default:f(function(){return[(it(),S(M,null,Y(Kt,function(t){return y(v(dt),{key:t,size:"auto",onClick:function(n){return mn(t)}},{default:f(function(){return[y(v(T),{fill:"clear"},{default:f(function(){return[y(v(E),{icon:nn(t),size:"large"},null,8,["icon"])]}),_:2},1024)]}),_:2},1032,["onClick"])}),64))]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["is-open"]),y(v(at),{"is-open":!!Xt.value,onDidDismiss:n[7]||(n[7]=function(t){return Xt.value=null}),class:"image-modal"},{default:f(function(){return[y(v(nt),null,{default:f(function(){return[Xt.value?(it(),S("div",Nt,[N("img",{src:on(Xt.value),alt:Xt.value,class:"modal-image"},null,8,Tt),y(v(T),{fill:"clear",color:"light",class:"close-btn",onClick:n[6]||(n[6]=function(t){return Xt.value=null})},{default:f(function(){return[y(v(E),{icon:v(rt)},null,8,["icon"])]}),_:1})])):C("",!0)]}),_:1})]}),_:1},8,["is-open"])]}),_:1})]}),_:1})}}});t("default",vt(At,[["__scopeId","data-v-076423c1"]]))}}})}();
