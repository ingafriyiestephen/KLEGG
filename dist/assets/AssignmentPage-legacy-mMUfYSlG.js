!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,a,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(e,o,r,i){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return t(s,"_invoke",function(e,t,o){var r,i,c,l=0,s=o||[],d=!1,f={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return r=e,i=0,c=n,f.n=t,u}};function m(e,t){for(i=e,c=t,a=0;!d&&l&&!o&&a<s.length;a++){var o,r=s[a],m=f.p,p=r[2];e>3?(o=p===t)&&(c=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=n):r[0]<=m&&((o=e<2&&m<r[1])?(i=0,f.v=t,f.n=r[1]):m<p&&(o=e<3||r[0]>t||t>p)&&(r[4]=e,r[5]=t,f.n=p,i=0))}if(o||e>1)return u;throw d=!0,t}return function(o,s,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,p),i=s,c=p;(a=i<2?n:c)||!d;){r||(i?i<3?(i>1&&(f.n=-1),m(i,c)):f.n=c:f.v=c);try{if(l=2,r){if(i||(o="next"),a=r[o]){if(!(a=a.call(r,c)))throw TypeError("iterator result is not an object");if(!a.done)return a;c=a.value,i<2&&(i=0)}else 1===i&&(a=r.return)&&a.call(r),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);r=n}else if((a=(d=f.n<0)?c:e.call(t,f))!==u)break}catch(a){r=n,i=1,c=a}finally{l=1}}return{value:a,done:d}}}(e,r,i),!0),s}var u={};function l(){}function s(){}function d(){}a=Object.getPrototypeOf;var f=[][r]?a(a([][r]())):(t(a={},r,function(){return this}),a),m=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=d,t(m,"constructor",d),t(d,"constructor",s),s.displayName="GeneratorFunction",t(d,i,"GeneratorFunction"),t(m),t(m,i,"Generator"),t(m,r,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:p}})()}function t(e,n,a,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}t=function(e,n,a,o){function i(n,a){t(e,n,function(e){return this._invoke(n,a,e)})}n?r?r(e,n,{value:a,enumerable:!o,configurable:!o,writable:!o}):e[n]=a:(i("next",0),i("throw",1),i("return",2))},t(e,n,a,o)}function n(e,t,n,a,o,r,i){try{var c=e[r](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(a,o)}System.register(["./index-legacy-DZ_oEP4m.js","./index-legacy-D37Tvi_R.js"],function(t,a){"use strict";var o,r,i,c,u,l,s,d,f,m,p,g,v,y,h,_,x,b,w,k,C,S,T,j,O,z,D,P,A,E,G,N,F,I,B,M,J,L,R,U,q,K,V,$,H,W,Y,Z,Q,X,ee,te,ne,ae,oe,re;return{setters:[function(e){o=e.d,r=e.ar,i=e.r,c=e.S,u=e.a,l=e.o,s=e.b,d=e.w,f=e.u,m=e.I,p=e.e,g=e.f,v=e.g,y=e.h,h=e.i,_=e.P,x=e.l,b=e.A,w=e.q,k=e.k,C=e.s,S=e.a9,T=e.a3,j=e.t,O=e.x,z=e.C,D=e.n,P=e.G,A=e.aG,E=e.v,G=e.az,N=e.m,F=e.a2,I=e.a4,B=e.T,M=e.U,J=e.M,L=e.N,R=e.av,U=e.a7,q=e.$,K=e.K,V=e.as,$=e.J,H=e.aF,W=e.aH,Y=e.aA,Z=e.aB,Q=e.am,X=e.aI,ee=e.aJ,te=e.aK,ne=e.aL,ae=e.aM,oe=e._},function(e){re=e.T}],execute:function(){var a=document.createElement("style");a.textContent=".header-section[data-v-9dcc013e]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);color:#fff;padding-bottom:16px}.header-section .title[data-v-9dcc013e]{display:block;font-size:1.5rem;font-weight:600;color:#fff;margin-bottom:16px}.summary-cards[data-v-9dcc013e]{display:flex;gap:16px;margin-top:8px}.summary-card[data-v-9dcc013e]{flex:1;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1);margin:0}.summary-card.open[data-v-9dcc013e]{--background: rgba(var(--ion-color-success-rgb), .1)}.summary-card.closed[data-v-9dcc013e]{--background: rgba(var(--ion-color-warning-rgb), .1)}.summary-content[data-v-9dcc013e]{display:flex;align-items:center;gap:12px}.summary-icon[data-v-9dcc013e]{font-size:32px}.summary-card.open .summary-icon[data-v-9dcc013e]{color:var(--ion-color-success)}.summary-card.closed .summary-icon[data-v-9dcc013e]{color:var(--ion-color-warning)}.summary-count[data-v-9dcc013e]{font-size:1.5rem;font-weight:700;display:block;line-height:1.2;color:var(--ion-color-light)}.summary-label[data-v-9dcc013e]{font-size:.875rem;opacity:.8;display:block;color:var(--ion-color-light)}.theme-text-nine[data-v-9dcc013e],.theme-text-eight[data-v-9dcc013e]{opacity:.9;color:var(--ion-text-color)}.loading-container[data-v-9dcc013e]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[data-v-9dcc013e],.error-state[data-v-9dcc013e]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;height:60vh;padding:20px}.empty-state ion-icon[data-v-9dcc013e],.error-state ion-icon[data-v-9dcc013e]{font-size:64px;margin-bottom:16px}.empty-state h3[data-v-9dcc013e],.error-state h3[data-v-9dcc013e]{font-size:1.2rem;font-weight:500;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state p[data-v-9dcc013e],.error-state p[data-v-9dcc013e]{font-size:.9rem;color:var(--ion-color-medium);margin-bottom:16px}.status-indicator[data-v-9dcc013e]{width:4px;height:100%;border-radius:4px;position:absolute;left:0}.assignment-item[data-v-9dcc013e]{--padding-start: 12px;--inner-padding-end: 12px;--background: var(--ion-item-background, var(--ion-background-color, #fff));margin-bottom:8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.assignment-content[data-v-9dcc013e]{margin-left:12px}.assignment-header[data-v-9dcc013e]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.assignment-title[data-v-9dcc013e]{font-weight:600;font-size:1rem;flex:1;margin-right:8px}.assignment-meta[data-v-9dcc013e]{font-size:.8rem;color:var(--ion-color-medium);margin-bottom:8px}.assignment-meta ion-icon[data-v-9dcc013e]{margin-right:4px;vertical-align:middle}.assignment-notes[data-v-9dcc013e]{font-size:.875rem;color:var(--ion-color-medium);margin-bottom:12px;line-height:1.5}.assignment-footer[data-v-9dcc013e]{display:flex;justify-content:space-between;align-items:center;padding-top:8px;border-top:1px solid var(--ion-color-light)}.due-date[data-v-9dcc013e]{font-size:.8rem;color:var(--ion-color-medium)}.due-date ion-icon[data-v-9dcc013e]{margin-right:4px;vertical-align:middle}@media (min-width: 768px){.summary-cards[data-v-9dcc013e]{gap:24px}.assignment-item[data-v-9dcc013e]{margin:0 auto 12px;max-width:800px}}\n",document.head.appendChild(a);var ie={class:"header-section ion-padding"},ce={class:"summary-cards"},ue={class:"summary-content"},le={class:"summary-content"},se={key:0,class:"loading-container"},de={key:1,class:"empty-state"},fe={key:2,class:"error-state"},me={key:3},pe={class:"assignment-header"},ge={class:"assignment-meta theme-text-eight"},ve={key:0,class:"assignment-notes"},ye={class:"assignment-footer"},he=o({__name:"AssignmentPage",setup:function(t){var a=localStorage.getItem("parisklegg_token")||"",o=localStorage.getItem("parisklegg_user"),oe=o?JSON.parse(o):null;null==oe||oe.user_id;var he=r(),_e=g(),xe=Number(he.params.id),be=i(""),we=i(!0),ke=i(!1),Ce=i(!1),Se=i([]),Te=i(0),je=i(0),Oe=function(e){var t=new Date,n=new Date(e.submission_date),a=n.getTime()-t.getTime(),o=Math.ceil(a/864e5);return t>n?"closed":o<=1?"dueSoon":o<=3?"upcoming":"open"},ze=function(e){switch(Oe(e)){case"closed":case"dueSoon":return"var(--ion-color-warning)";case"upcoming":return"var(--ion-color-primary)";default:return"var(--ion-color-success)"}},De=function(e){switch(Oe(e)){case"closed":case"dueSoon":return"warning";case"open":default:return"success";case"upcoming":return"primary"}},Pe=function(e){switch(Oe(e)){case"closed":case"open":return ae;case"dueSoon":return ne;case"upcoming":return te;default:return ee}},Ae=function(e){var t=new Date,n=new Date(e.submission_date),a=n.getTime()-t.getTime(),o=Math.ceil(a/864e5);return t>n?"Closed":o<=1?"Due Soon":o<=3?"Due in ".concat(o," days"):"Open"},Ee=function(e){var t=new Date(e),n=new Date(t);return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}).format(n)},Ge=function(){var t,a=(t=e().m(function t(){var n,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,we.value=!0,ke.value=!1,Se.value=[],Te.value=0,je.value=0,e.n=1,p.post("https://klegg-app-whh7m.ondigitalocean.app/api/assignment",{tutorship_id:xe},{headers:Ne(),timeout:2e4});case 1:(n=e.v).data.length>0&&(Ce.value=!0,be.value=n.data[0].tutorship_name||"My Assignments",Se.value=n.data.sort(function(e,t){return new Date(e.submission_date).getTime()-new Date(t.submission_date).getTime()}),Se.value.forEach(function(e){"closed"===Oe(e)?Te.value++:je.value++})),e.n=3;break;case 2:e.p=2,a=e.v,Fe(a),ke.value=!0;case 3:return e.p=3,we.value=!1,e.f(3);case 4:return e.a(2)}},t,null,[[0,2,3,4]])}),function(){var e=this,a=arguments;return new Promise(function(o,r){var i=t.apply(e,a);function c(e){n(i,o,r,c,u,"next",e)}function u(e){n(i,o,r,c,u,"throw",e)}c(void 0)})});return function(){return a.apply(this,arguments)}}(),Ne=function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}},Fe=function(e){if(console.error("Error fetching data:",e),p.isAxiosError(e)){var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status))return _e.replace("/"),void re.show({text:"Session expired. Please login again",position:"top",duration:"long"});if("ECONNABORTED"===e.code)return void re.show({text:"Request timeout. Please try again",position:"top"})}re.show({text:"Failed to load data. Please try again later",position:"top"})};return c.setOverlaysWebView({overlay:!1}),c.setBackgroundColor({color:"#ffffff"}),c.setStyle({style:u.Light}),l(function(){Ge()}),function(e,t){return L(),s(f(m),null,{default:d(function(){return[v(f(w),null,{default:d(function(){return[v(f(y),null,{default:d(function(){return[v(f(h),{slot:"start"},{default:d(function(){return[v(f(_),{"default-href":"/"})]}),_:1}),v(f(x),null,{default:d(function(){return t[1]||(t[1]=[b("Assignments",-1)])}),_:1,__:[1]})]}),_:1})]}),_:1}),v(f(J),{fullscreen:!0},{default:d(function(){return[k("div",ie,[be.value?(L(),s(f(T),{key:0,class:"title"},{default:d(function(){return[b(j(be.value),1)]}),_:1})):S("",!0),k("div",ce,[v(f(O),{class:"summary-card open"},{default:d(function(){return[v(f(z),null,{default:d(function(){return[k("div",ue,[v(f(D),{icon:f(P),class:"summary-icon"},null,8,["icon"]),k("div",null,[v(f(T),{class:"summary-count"},{default:d(function(){return[b(j(je.value),1)]}),_:1}),v(f(T),{class:"summary-label"},{default:d(function(){return t[2]||(t[2]=[b("Open",-1)])}),_:1,__:[2]})])])]}),_:1})]}),_:1}),v(f(O),{class:"summary-card closed"},{default:d(function(){return[v(f(z),null,{default:d(function(){return[k("div",le,[v(f(D),{icon:f(A),class:"summary-icon"},null,8,["icon"]),k("div",null,[v(f(T),{class:"summary-count"},{default:d(function(){return[b(j(Te.value),1)]}),_:1}),v(f(T),{class:"summary-label"},{default:d(function(){return t[3]||(t[3]=[b("Closed",-1)])}),_:1,__:[3]})])])]}),_:1})]}),_:1})])]),we.value?(L(),C("div",se,[v(f(E),{name:"crescent",color:"primary"})])):Ce.value||ke.value?ke.value?(L(),C("div",fe,[v(f(D),{icon:f(F),color:"warning"},null,8,["icon"]),v(f(T),null,{default:d(function(){return t[6]||(t[6]=[k("h3",null,"Error Loading Assignments",-1),k("p",null,"Please try again later",-1)])}),_:1,__:[6]}),v(f(N),{fill:"clear",onClick:Ge},{default:d(function(){return t[7]||(t[7]=[b("Retry",-1)])}),_:1,__:[7]})])):(L(),C("div",me,[v(f(I),{lines:"none"},{default:d(function(){return[(L(!0),C(B,null,M(Se.value,function(e,n){return L(),s(f(R),{key:n},{default:d(function(){return[v(f(U),{class:"assignment-item",detail:!1},{default:d(function(){return[k("div",{slot:"start",class:"status-indicator",style:q({backgroundColor:ze(e)})},null,4),v(f(K),{class:"assignment-content"},{default:d(function(){return[k("div",pe,[v(f(T),{class:"assignment-title"},{default:d(function(){return[b(j(e.assignment_name),1)]}),_:2},1024),v(f(V),{color:De(e)},{default:d(function(){return[v(f(D),{icon:Pe(e),slot:"start"},null,8,["icon"]),b(" "+j(Ae(e)),1)]}),_:2},1032,["color"])]),k("div",ge,[v(f(T),{class:"assignment-date"},{default:d(function(){return[v(f(D),{icon:f($)},null,8,["icon"]),b(" Posted: "+j(Ee(e.created_at)),1)]}),_:2},1024)]),e.additional_note?(L(),C("div",ve,[v(f(T),{class:"theme-text-nine"},{default:d(function(){return[b(j(e.additional_note),1)]}),_:2},1024)])):S("",!0),k("div",ye,[v(f(T),{class:"due-date"},{default:d(function(){return[v(f(D),{icon:f(H)},null,8,["icon"]),b(" Due: "+j(Ee(e.submission_date)),1)]}),_:2},1024),e.assignment_file?(L(),s(f(N),{key:0,fill:"clear",size:"small",onClick:function(t){return n=e.assignment_file,void window.open("https://klegg-app-whh7m.ondigitalocean.app/files/".concat(n),"_blank");var n}},{default:d(function(){return[v(f(D),{slot:"start",icon:f(W)},null,8,["icon"]),t[8]||(t[8]=b(" Download ",-1))]}),_:2,__:[8]},1032,["onClick"])):S("",!0)])]}),_:2},1024)]}),_:2},1024),v(f(Y),{side:"end"},{default:d(function(){return[v(f(Z),{color:"tertiary",onClick:function(t){return function(e){console.log("Sharing assignment:",e)}(e)}},{default:d(function(){return[v(f(D),{slot:"icon-only",icon:f(Q)},null,8,["icon"])]}),_:2},1032,["onClick"]),v(f(Z),{color:"primary",onClick:function(t){return function(e){console.log("Viewing submission for:",e)}(e)}},{default:d(function(){return[v(f(D),{slot:"icon-only",icon:f(X)},null,8,["icon"])]}),_:2},1032,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])):(L(),C("div",de,[v(f(D),{icon:f(G),color:"medium"},null,8,["icon"]),v(f(T),null,{default:d(function(){return t[4]||(t[4]=[k("h3",null,"No Assignments",-1),k("p",null,"Your assignments will appear here when created by your teacher",-1)])}),_:1,__:[4]}),v(f(N),{fill:"clear",onClick:t[0]||(t[0]=function(t){return e.$router.back()})},{default:d(function(){return t[5]||(t[5]=[b("Back to Classes",-1)])}),_:1,__:[5]})]))]}),_:1})]}),_:1})}}});t("default",oe(he,[["__scopeId","data-v-9dcc013e"]]))}}})}();
